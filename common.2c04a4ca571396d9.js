"use strict";(self.webpackChunkjsapi_angular_cli=self.webpackChunkjsapi_angular_cli||[]).push([[8592],{73903:(Q,V,e)=>{e.d(V,{Z:()=>O});var o=e(50484),E=e(73514),v=e(57678),P=e(25387),p=e(84373),_=e(89317),a=e(80543),L=(e(1535),e(14007),e(10141));let x=0,U=class extends((0,_.eC)((0,P.J)((0,p.IG)(E.Z)))){constructor(D){super(D),this.id=`${Date.now().toString(16)}-analysis-${x++}`,this.title=null}get parent(){return this._get("parent")}set parent(D){const l=this.parent;if(null!=l)switch(l.type){case"line-of-sight":case"dimension":l.releaseAnalysis(this);break;case"2d":case"3d":l.analyses.includes(this)&&l.analyses.remove(this)}this._set("parent",D)}get isEditable(){return this.requiredPropertiesForEditing.every(v.pC)}};(0,o._)([(0,a.Cb)({type:String,constructOnly:!0,clonable:!1})],U.prototype,"id",void 0),(0,o._)([(0,a.Cb)({type:String})],U.prototype,"title",void 0),(0,o._)([(0,a.Cb)({constructOnly:!0})],U.prototype,"type",void 0),(0,o._)([(0,a.Cb)({clonable:!1,value:null})],U.prototype,"parent",null),(0,o._)([(0,a.Cb)({readOnly:!0})],U.prototype,"isEditable",null),(0,o._)([(0,a.Cb)({readOnly:!0})],U.prototype,"requiredPropertiesForEditing",void 0),U=(0,o._)([(0,L.j)("esri.analysis.Analysis")],U);const O=U},56803:(Q,V,e)=>{e.d(V,{B:()=>v,R:()=>E});var o=e(60616);class E extends o.a5{_beforeChanged(){super._beforeChanged(),(this.isDirty("cornerRadiusTL")||this.isDirty("cornerRadiusTR")||this.isDirty("cornerRadiusBR")||this.isDirty("cornerRadiusBL"))&&(this._clear=!0)}_draw(){let p=this.width(),_=this.height(),a=p,j=_,I=a/Math.abs(p),L=j/Math.abs(_);if((0,o.g)(a)&&(0,o.g)(j)){let x=Math.min(a,j)/2,U=(0,o.az)(this.get("cornerRadiusTL",8),x),O=(0,o.az)(this.get("cornerRadiusTR",8),x),D=(0,o.az)(this.get("cornerRadiusBR",8),x),l=(0,o.az)(this.get("cornerRadiusBL",8),x),C=Math.min(Math.abs(a/2),Math.abs(j/2));U=(0,o.aj)(U,0,C),O=(0,o.aj)(O,0,C),D=(0,o.aj)(D,0,C),l=(0,o.aj)(l,0,C);const f=this._display;f.moveTo(U*I,0),f.lineTo(a-O*I,0),O>0&&f.arcTo(a,0,a,O*L,O),f.lineTo(a,j-D*L),D>0&&f.arcTo(a,j,a-D*I,j,D),f.lineTo(l*I,j),l>0&&f.arcTo(0,j,0,j-l*L,l),f.lineTo(0,U*L),U>0&&f.arcTo(0,0,U*I,0,U),f.closePath()}}}Object.defineProperty(E,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RoundedRectangle"}),Object.defineProperty(E,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:o.a5.classNames.concat([E.className])});class v extends o.a3{_afterNew(){this._settings.themeTags=(0,o.ak)(this._settings.themeTags,["button"]),super._afterNew(),this._settings.background||this.set("background",E.new(this._root,{themeTags:(0,o.ak)(this._settings.themeTags,["background"])}))}_prepareChildren(){if(super._prepareChildren(),this.isDirty("icon")){const p=this._prevSettings.icon,_=this.get("icon");_!==p&&(this._disposeProperty("icon"),p&&p.dispose(),_&&this.children.push(_),this._prevSettings.icon=_)}if(this.isDirty("label")){const p=this._prevSettings.label,_=this.get("label");_!==p&&(this._disposeProperty("label"),p&&p.dispose(),_&&this.children.push(_),this._prevSettings.label=_)}}}Object.defineProperty(v,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Button"}),Object.defineProperty(v,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:o.a3.classNames.concat([v.className])})},58661:(Q,V,e)=>{e.d(V,{T:()=>v});var o=e(60616);class E extends o.a7{_beforeChanged(){super._beforeChanged(),(this.isDirty("pointerBaseWidth")||this.isDirty("cornerRadius")||this.isDirty("pointerLength")||this.isDirty("pointerX")||this.isDirty("pointerY")||this.isDirty("width")||this.isDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){this.markDirtyBounds();let p=this.width(),_=this.height();if(p>0&&_>0){let a=this.get("cornerRadius",8);a=(0,o.aj)(a,0,Math.min(p/2,_/2));let j=this.get("pointerX",0),I=this.get("pointerY",0),L=this.get("pointerBaseWidth",15)/2,x=0,U=0,O=0,D=(j-x)*(_-U)-(I-U)*(p-x),l=(j-O)*(0-_)-(I-_)*(p-O);const C=this._display;if(C.moveTo(a,0),D>0&&l>0){let f=Math.round((0,o.aj)(j,a+L,p-L-a));I=(0,o.aj)(I,-1/0,0),C.lineTo(f-L,0),C.lineTo(j,I),C.lineTo(f+L,0)}if(C.lineTo(p-a,0),C.arcTo(p,0,p,a,a),D>0&&l<0){let f=Math.round((0,o.aj)(I,a+L,_-L-a));j=(0,o.aj)(j,p,1/0),C.lineTo(p,a),C.lineTo(p,Math.max(f-L,a)),C.lineTo(j,I),C.lineTo(p,f+L)}if(C.lineTo(p,_-a),C.arcTo(p,_,p-a,_,a),D<0&&l<0){let f=Math.round((0,o.aj)(j,a+L,p-L-a));I=(0,o.aj)(I,_,1/0),C.lineTo(p-a,_),C.lineTo(f+L,_),C.lineTo(j,I),C.lineTo(f-L,_)}if(C.lineTo(a,_),C.arcTo(0,_,0,_-a,a),D<0&&l>0){let f=Math.round((0,o.aj)(I,a+L,_-a-L));j=(0,o.aj)(j,-1/0,0),C.lineTo(0,_-a),C.lineTo(0,f+L),C.lineTo(j,I),C.lineTo(0,Math.max(f-L,a))}C.lineTo(0,a),C.arcTo(0,0,a,0,a),C.closePath()}}}}Object.defineProperty(E,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PointedRectangle"}),Object.defineProperty(E,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:o.a7.classNames.concat([E.className])});class v extends o.a3{constructor(p,_,a,j=[]){super(p,_,a,j),Object.defineProperty(this,"_fx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_fy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_label",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fillDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_labelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_w",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_h",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_keepHoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlContentHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._settings.themeTags=(0,o.ak)(this._settings.themeTags,["tooltip"]),super._afterNew(),this.set("background",E.new(this._root,{themeTags:["tooltip","background"]})),this._label=this.children.push(o.al.new(this._root,{})),this._disposers.push(this._label.events.on("boundschanged",()=>{this._updateBackground()})),this._disposers.push(this.on("bounds",()=>{this._updateBackground()})),this._updateTextColor(),this._root.tooltipContainer.children.push(this),this.hide(0),this._disposers.push(this.label.onPrivate("htmlElement",p=>{p&&((0,o.z)(p,"pointerover",_=>{this._htmlContentHovered=!0}),(0,o.z)(p,"pointerout",_=>{this._htmlContentHovered=!1}))})),this._root._tooltips.push(this)}get label(){return this._label}dispose(){super.dispose(),(0,o.ad)(this._root._tooltips,this)}_updateChildren(){super._updateChildren(),(this.isDirty("pointerOrientation")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&this.get("background")._markDirtyKey("width"),null!=this.get("labelText")&&this.label.set("text",this.get("labelText")),null!=this.get("labelHTML")&&this.label.set("html",this.get("labelHTML"))}_changed(){if(super._changed(),(this.isDirty("pointTo")||this.isDirty("pointerOrientation"))&&this._updateBackground(),this.isDirty("tooltipTarget")&&this.updateBackgroundColor(),this.isDirty("keepTargetHover"))if(this.get("keepTargetHover")){const p=this.get("background");this._keepHoverDp=new o.M([p.events.on("pointerover",_=>{let a=this.get("tooltipTarget");a&&(a.parent&&a.parent.getPrivate("tooltipTarget")==a&&(a=a.parent),a.hover())}),p.events.on("pointerout",_=>{let a=this.get("tooltipTarget");a&&(a.parent&&a.parent.getPrivate("tooltipTarget")==a&&(a=a.parent),this._htmlContentHovered||a.unhover())})]),this.label.onPrivate("htmlElement",_=>{this._keepHoverDp&&_&&this._keepHoverDp.disposers.push((0,o.z)(_,"pointerleave",a=>{const j=this.root._renderer.getEvent(a);p.events.dispatch("pointerout",{type:"pointerout",originalEvent:j.event,point:j.point,simulated:!1,target:p})}))})}else this._keepHoverDp&&(this._keepHoverDp.dispose(),this._keepHoverDp=void 0)}_onShow(){super._onShow(),this.updateBackgroundColor()}updateBackgroundColor(){let p=this.get("tooltipTarget");const _=this.get("background");let a,j;p&&_&&(a=p.get("fill"),j=p.get("stroke"),null==a&&(a=j),this.get("getFillFromSprite")&&(this._fillDp&&this._fillDp.dispose(),null!=a&&_.set("fill",a),this._fillDp=p.on("fill",I=>{null!=I&&(_.set("fill",I),this._updateTextColor(I))}),this._disposers.push(this._fillDp)),this.get("getStrokeFromSprite")&&(this._strokeDp&&this._strokeDp.dispose(),null!=a&&_.set("stroke",a),this._strokeDp=p.on("fill",I=>{null!=I&&_.set("stroke",I)}),this._disposers.push(this._strokeDp)),this.get("getLabelFillFromSprite")&&(this._labelDp&&this._labelDp.dispose(),null!=a&&this.label.set("fill",a),this._labelDp=p.on("fill",I=>{null!=I&&this.label.set("fill",I)}),this._disposers.push(this._labelDp))),this._updateTextColor(a)}_updateTextColor(p){this.get("autoTextColor")&&(null==p&&(p=this.get("background").get("fill")),null==p&&(p=this._root.interfaceColors.get("background")),p instanceof o.C&&this.label.set("fill",o.C.alternative(p,this._root.interfaceColors.get("alternativeText"),this._root.interfaceColors.get("text"))))}_setDataItem(p){super._setDataItem(p),this.label._setDataItem(p)}_updateBackground(){super.updateBackground();const p=this._root.container;if(p){let _=.5,a=.5,j=this.get("centerX");j instanceof o.Q&&(_=j.value);let I=this.get("centerY");I instanceof o.Q&&(a=I.value);let L=p.width(),x=p.height(),U=this.parent,O=0,D=0;if(U){O=U.x(),D=U.y();const i=U.get("layerMargin");i&&(O+=i.left||0,D+=i.top||0,L+=(i.left||0)+(i.right||0),x+=(i.top||0)+(i.bottom||0))}const l=this.get("bounds",{left:-O,top:-D,right:L-O,bottom:x-D});this._updateBounds();let C=this.width(),f=this.height();0===C&&(C=this._w),0===f&&(f=this._h);let h=this.get("pointTo",{x:L/2,y:x/2}),T=h.x,g=h.y,c=this.get("pointerOrientation"),m=this.get("background"),M=0,W=0,F=0;m instanceof E&&(M=m.get("pointerLength",0),W=m.get("strokeWidth",0)/2,F=W,m.set("width",C),m.set("height",f));let A=0,B=0,Z=l.right-l.left,b=l.bottom-l.top;"horizontal"==c||"left"==c||"right"==c?(W=0,"horizontal"==c?T>l.left+Z/2?(T-=C*(1-_)+M,F*=-1):T+=C*_+M:"left"==c?T+=C*(1-_)+M:(T-=C*_+M,F*=-1)):(F=0,"vertical"==c?g>l.top+f/2+M?g-=f*(1-a)+M:(g+=f*a+M,W*=-1):"down"==c?g-=f*(1-a)+M:(g+=f*a+M,W*=-1)),T=(0,o.aj)(T,l.left+C*_,l.left+Z-C*(1-_))+F,g=(0,o.aj)(g,l.top+f*a,l.top+b-f*(1-a))-W,A=h.x-T+C*_+F,B=h.y-g+f*a-W,this._fx=T,this._fy=g;const s=this.get("animationDuration",0);if(s>0&&this.get("visible")&&this.get("opacity")>.1){const i=this.get("animationEasing");this.animate({key:"x",to:T,duration:s,easing:i}),this.animate({key:"y",to:g,duration:s,easing:i})}else this.set("x",T),this.set("y",g);m instanceof E&&(m.set("pointerX",A),m.set("pointerY",B)),C>0&&(this._w=C),f>0&&(this._h=f)}}}Object.defineProperty(v,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tooltip"}),Object.defineProperty(v,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:o.a3.classNames.concat([v.className])})},4254:(Q,V,e)=>{e.d(V,{A:()=>Z,B:()=>b,C:()=>s,D:()=>i,E:()=>y,F:()=>u,G:()=>S,H:()=>K,I:()=>N,J:()=>H,K:()=>k,L:()=>J,M:()=>G,N:()=>$,a:()=>p,b:()=>_,c:()=>P,d:()=>a,e:()=>v,f:()=>j,g:()=>Y,h:()=>I,i:()=>L,j:()=>O,k:()=>C,l:()=>h,m:()=>T,n:()=>g,o:()=>D,p:()=>c,q:()=>M,r:()=>l,s:()=>f,t:()=>x,u:()=>m,v:()=>W,w:()=>U,x:()=>F,y:()=>A,z:()=>B});var o=e(89465),E=e(27545);function v(d){return o.G.extendedSpatialReferenceInfo(d)}function P(d,R,w){return o.G.clip(E.N,d,R,w)}function p(d,R,w){return o.G.cut(E.N,d,R,w)}function _(d,R,w){return o.G.contains(E.N,d,R,w)}function a(d,R,w){return o.G.crosses(E.N,d,R,w)}function j(d,R,w,z){return o.G.distance(E.N,d,R,w,z)}function I(d,R,w){return o.G.equals(E.N,d,R,w)}function L(d,R,w){return o.G.intersects(E.N,d,R,w)}function x(d,R,w){return o.G.touches(E.N,d,R,w)}function U(d,R,w){return o.G.within(E.N,d,R,w)}function O(d,R,w){return o.G.disjoint(E.N,d,R,w)}function D(d,R,w){return o.G.overlaps(E.N,d,R,w)}function l(d,R,w,z){return o.G.relate(E.N,d,R,w,z)}function C(d,R){return o.G.isSimple(E.N,d,R)}function f(d,R){return o.G.simplify(E.N,d,R)}function h(d,R,w=!1){return o.G.convexHull(E.N,d,R,w)}function T(d,R,w){return o.G.difference(E.N,d,R,w)}function g(d,R,w){return o.G.symmetricDifference(E.N,d,R,w)}function c(d,R,w){return o.G.intersect(E.N,d,R,w)}function m(d,R,w=null){return o.G.union(E.N,d,R,w)}function M(d,R,w,z,X,q,se){return o.G.offset(E.N,d,R,w,z,X,q,se)}function W(d,R,w,z,X=!1){return o.G.buffer(E.N,d,R,w,z,X)}function F(d,R,w,z,X,q,se){return o.G.geodesicBuffer(E.N,d,R,w,z,X,q,se)}function A(d,R,w,z=!0){return o.G.nearestCoordinate(E.N,d,R,w,z)}function B(d,R,w){return o.G.nearestVertex(E.N,d,R,w)}function Z(d,R,w,z,X){return o.G.nearestVertices(E.N,d,R,w,z,X)}function b(d,R,w,z){if(null==R||null==z)throw new Error("Illegal Argument Exception");const X=o.G.rotate(R,w,z);return X.spatialReference=d,X}function s(d,R,w){if(null==R||null==w)throw new Error("Illegal Argument Exception");const z=o.G.flipHorizontal(R,w);return z.spatialReference=d,z}function i(d,R,w){if(null==R||null==w)throw new Error("Illegal Argument Exception");const z=o.G.flipVertical(R,w);return z.spatialReference=d,z}function y(d,R,w,z,X){return o.G.generalize(E.N,d,R,w,z,X)}function u(d,R,w,z){return o.G.densify(E.N,d,R,w,z)}function S(d,R,w,z,X=0){return o.G.geodesicDensify(E.N,d,R,w,z,X)}function K(d,R,w){return o.G.planarArea(E.N,d,R,w)}function N(d,R,w){return o.G.planarLength(E.N,d,R,w)}function H(d,R,w,z){return o.G.geodesicArea(E.N,d,R,w,z)}function k(d,R,w,z){return o.G.geodesicLength(E.N,d,R,w,z)}function J(d,R,w){return null==R||null==w?[]:o.G.intersectLinesToPoints(E.N,d,R,w)}function G(d,R){o.G.changeDefaultSpatialReferenceTolerance(d,R)}function $(d){o.G.clearDefaultSpatialReferenceTolerance(d)}const Y=Object.freeze(Object.defineProperty({__proto__:null,buffer:W,changeDefaultSpatialReferenceTolerance:G,clearDefaultSpatialReferenceTolerance:$,clip:P,contains:_,convexHull:h,crosses:a,cut:p,densify:u,difference:T,disjoint:O,distance:j,equals:I,extendedSpatialReferenceInfo:v,flipHorizontal:s,flipVertical:i,generalize:y,geodesicArea:H,geodesicBuffer:F,geodesicDensify:S,geodesicLength:k,intersect:c,intersectLinesToPoints:J,intersects:L,isSimple:C,nearestCoordinate:A,nearestVertex:B,nearestVertices:Z,offset:M,overlaps:D,planarArea:K,planarLength:N,relate:l,rotate:b,simplify:f,symmetricDifference:g,touches:x,union:m,within:U},Symbol.toStringTag,{value:"Module"}))},42214:(Q,V,e)=>{e.d(V,{B:()=>x});var o=e(57964),E=e(19799),v=e(26496),P=e(6785),p=e(19986),_=e(9203),a=e(60301),j=e(80543),I=e(79387),L=e(19677);function x(c){const m=c?.origins??[void 0];return(M,W)=>{const F=function U(c,m,M){if("resource"===c?.type)return function O(c,m,M){const W=(0,_.Oe)(m,M);return{type:String,read:(F,A,B)=>{const Z=(0,L.r)(F,A,B);return W.type===String?Z:"function"==typeof W.type?new W.type({url:Z}):void 0},write:{writer(F,A,B,Z){if(!Z?.resources)return"string"==typeof F?void(A[B]=(0,L.t)(F,Z)):void(A[B]=F.write({},Z));const b=function T(c){return null==c?null:"string"==typeof c?c:c.url}(F),s=(0,L.t)(b,{...Z,verifyItemRelativeUrls:Z?.verifyItemRelativeUrls?{writtenUrls:Z.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},L.M.NO),i=W.type!==String&&(!(0,v.l)(this)||Z?.origin&&this.originIdOf(M)>(0,a.M9)(Z.origin)),y={object:this,propertyName:M,value:F,targetUrl:s,dest:A,targetPropertyName:B,context:Z,params:c};Z?.portalItem&&s&&!(0,P.YP)(s)?i&&c?.contentAddressed?D(y):i?function l(c){const{context:m,targetUrl:M,params:W,value:F,dest:A,targetPropertyName:B}=c;if(!m.portalItem)return;const Z=m.portalItem.resourceFromPath(M),b=h(F,M,m),s=(0,I.B)(b),i=(0,P.Ml)(Z.path),y=W?.compress??!1;s===i?(m.resources&&f({...c,resource:Z,content:b,compress:y,updates:m.resources.toUpdate}),A[B]=M):D(c)}(y):function C({context:c,targetUrl:m,dest:M,targetPropertyName:W}){c.portalItem&&c.resources&&(c.resources.toKeep.push({resource:c.portalItem.resourceFromPath(m),compress:!1}),M[W]=m)}(y):Z?.portalItem&&(null==s||null!=(0,L.i)(s)||(0,P.jc)(s)||i)?D(y):A[B]=s}}}}(c,m,M);switch(c?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:W,write:F}=L.a;return{read:W,write:F}}}}(c,M,W);for(const A of m){const B=(0,j.CJ)(M,A,W);for(const Z in F)B[Z]=F[Z]}}}function D(c){const{targetUrl:m,params:M,value:W,context:F,dest:A,targetPropertyName:B}=c;if(!F.portalItem)return;const Z=(0,L.p)(m),b=h(W,m,F);if(M?.contentAddressed&&"json"!==b.type)return void F.messages?.push(new o.Z("persistable:contentAddressingUnsupported",`Property "${B}" is trying to serializing a resource with content of type ${b.type} with content addressing. Content addressing is only supported for json resources.`,{content:b}));const s=M?.contentAddressed&&"json"===b.type?(0,E.F)(b.jsonString):Z?.filename??(0,p.DO)(),i=(0,P.v_)(M?.prefix??Z?.prefix,s),y=`${i}.${(0,I.B)(b)}`;if(M?.contentAddressed&&F.resources&&"json"===b.type){const K=F.resources.toKeep.find(N=>N.resource.path===y)??F.resources.toAdd.find(N=>N.resource.path===y);if(K)return void(A[B]=K.resource.itemRelativeUrl)}const u=F.portalItem.resourceFromPath(y);(0,P.jc)(m)&&F.resources&&F.resources.pendingOperations.push((0,P.gi)(m).then(K=>{u.path=`${i}.${(0,I.B)({type:"blob",blob:K})}`,A[B]=u.itemRelativeUrl}).catch(()=>{}));const S=M?.compress??!1;F.resources&&f({...c,resource:u,content:b,compress:S,updates:F.resources.toAdd}),A[B]=u.itemRelativeUrl}function f({object:c,propertyName:m,updates:M,resource:W,content:F,compress:A}){M.push({resource:W,content:F,compress:A,finish:B=>{!function g(c,m,M){"string"==typeof c[m]?c[m]=M.url:c[m].url=M.url}(c,m,B)}})}function h(c,m,M){return"string"==typeof c?{type:"url",url:m}:{type:"json",jsonString:JSON.stringify(c.toJSON(M))}}},12933:(Q,V,e)=>{e.d(V,{E:()=>x,H:()=>L});var o=e(51006),E=e(93530),v=e(46033),P=e(43589);const _=(0,e(8554).c)(),a=(0,E.a)(),j=(0,E.a)(),I=(0,E.a)();function L(O,D,l){return(0,P.s)(_,D[0],D[1],1),(0,P.t)(_,_,(0,o.t)(a,l)),0===_[2]?(0,v.s)(O,_[0],_[1]):(0,v.s)(O,_[0]/_[2],_[1]/_[2])}function x(O,D,l){return U(j,D[0],D[1],D[2],D[3],D[4],D[5],D[6],D[7]),U(I,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7]),(0,o.m)(O,(0,o.a)(j,j),I),0!==O[8]&&(O[0]/=O[8],O[1]/=O[8],O[2]/=O[8],O[3]/=O[8],O[4]/=O[8],O[5]/=O[8],O[6]/=O[8],O[7]/=O[8],O[8]/=O[8]),O}function U(O,D,l,C,f,h,T,g,c){(0,o.s)(O,D,C,h,l,f,T,1,1,1),(0,P.s)(_,g,c,1),(0,o.a)(a,O);const[m,M,W]=(0,P.t)(_,_,(0,o.t)(a,a));return(0,o.s)(a,m,0,0,0,M,0,0,0,W),(0,o.m)(O,a,O)}},82664:(Q,V,e)=>{e.d(V,{bU:()=>c,fC:()=>W,tp:()=>M,v7:()=>m});const _=new Float64Array(2),a=new Float64Array(2),U="0123456789bcdefghjkmnpqrstuvwxyz";function D(b){return U[b]}function l(b){return(b[0]+b[1])/2}function C(b,s,i){return b[0]=s,b[1]=i,b}function h(b,s){const i=s>l(b);return function f(b,s){const i=l(b),y=s,u=!s;b[0]=u*b[0]+y*i,b[1]=u*i+y*b[1]}(b,i),i}function c(b,s){let i=-90,y=90,u=-180,S=180;for(let K=0;K<s;K++){const N=Math.ceil((K+1)/2),H=Math.floor((K+1)/2),k=1-K%2,J=30-(3*N+2*H),G=30-(2*N+3*H),Y=2*k+3*(1-k),R=(7*k+3*(1-k)<<J&b.geohashX)>>J,w=(3*k+7*(1-k)<<G&b.geohashY)>>G;for(let z=3*k+2*(1-k)-1;z>=0;z--){const X=(u+S)/2,q=R&1<<z?1:0;u=(1-q)*u+q*X,S=(1-q)*X+q*S}for(let z=Y-1;z>=0;z--){const X=(i+y)/2,q=w&1<<z?1:0;i=(1-q)*i+q*X,y=(1-q)*X+q*y}}return[u,i,S,y]}function m(b,s,i,y){y%2&&(y+=1);let u=0,S=0,K=-90,N=90,H=-180,k=180;for(let J=0;J<y/2;J++){for(let G=0;G<5;G++){const $=(H+k)/2,Y=i>$?1:0;u|=Y<<29-(G+5*J),H=(1-Y)*H+Y*$,k=(1-Y)*$+Y*k}for(let G=0;G<5;G++){const $=(K+N)/2,Y=s>$?1:0;S|=Y<<29-(G+5*J),K=(1-Y)*K+Y*$,N=(1-Y)*$+Y*N}}b.geohashX=u,b.geohashY=S}function M(b,s,i,y,u){u%2&&(u+=1);let S=0,K=0,N=-90,H=90,k=-180,J=180;for(let G=0;G<u/2;G++){for(let $=0;$<5;$++){const Y=(k+J)/2,d=y>Y?1:0;S|=d<<29-($+5*G),k=(1-d)*k+d*Y,J=(1-d)*Y+d*J}for(let $=0;$<5;$++){const Y=(N+H)/2,d=i>Y?1:0;K|=d<<29-($+5*G),N=(1-d)*N+d*Y,H=(1-d)*Y+d*H}}b[2*s]=S,b[2*s+1]=K}function W(b,s,i){let y="";const u=C(_,-90,90),S=C(a,-180,180);for(let K=0;K<i;K++){let N=0;K%2?(N|=h(u,b)<<4,N|=h(S,s)<<3,N|=h(u,b)<<2,N|=h(S,s)<<1,N|=h(u,b)<<0):(N|=h(S,s)<<4,N|=h(u,b)<<3,N|=h(S,s)<<2,N|=h(u,b)<<1,N|=h(S,s)<<0),y+=D(N)}return y}},65601:(Q,V,e)=>{e.r(V),e.d(V,{hydratedAdapter:()=>_});var o=e(26894),E=e(12628),v=e(85039),P=e(5391),p=e(64222);const _={convertToGEGeometry:function a(O,D){if(null==D)return null;let l="cache"in D?D.cache._geVersion:void 0;return null==l&&(l=O.convertJSONToGeometry(D),"cache"in D&&(D.cache._geVersion=l)),l},exportPoint:function j(O,D,l){const C=O.hasZ(D),f=O.hasM(D),h=new v.Z({x:O.getPointX(D),y:O.getPointY(D),spatialReference:l});return C&&(h.z=O.getPointZ(D)),f&&(h.m=O.getPointM(D)),h.cache._geVersion=D,h},exportPolygon:function I(O,D,l){const C=new P.Z({rings:O.exportPaths(D),hasZ:O.hasZ(D),hasM:O.hasM(D),spatialReference:l});return C.cache._geVersion=D,C},exportPolyline:function L(O,D,l){const C=new p.Z({paths:O.exportPaths(D),hasZ:O.hasZ(D),hasM:O.hasM(D),spatialReference:l});return C.cache._geVersion=D,C},exportMultipoint:function x(O,D,l){const C=new E.Z({hasZ:O.hasZ(D),hasM:O.hasM(D),points:O.exportPoints(D),spatialReference:l});return C.cache._geVersion=D,C},exportExtent:function U(O,D,l){const C=O.hasZ(D),f=O.hasM(D),h=new o.Z({xmin:O.getXMin(D),ymin:O.getYMin(D),xmax:O.getXMax(D),ymax:O.getYMax(D),spatialReference:l});if(C){const T=O.getZExtent(D);h.zmin=T.vmin,h.zmax=T.vmax}if(f){const T=O.getMExtent(D);h.mmin=T.vmin,h.mmax=T.vmax}return h.cache._geVersion=D,h}}},49574:(Q,V,e)=>{e.r(V),e.d(V,{buffer:()=>v.v,changeDefaultSpatialReferenceTolerance:()=>v.M,clearDefaultSpatialReferenceTolerance:()=>v.N,clip:()=>v.c,contains:()=>v.b,convexHull:()=>v.l,crosses:()=>v.d,cut:()=>v.a,densify:()=>v.F,difference:()=>v.m,disjoint:()=>v.j,distance:()=>v.f,equals:()=>v.h,extendedSpatialReferenceInfo:()=>v.e,flipHorizontal:()=>v.C,flipVertical:()=>v.D,generalize:()=>v.E,geodesicArea:()=>v.J,geodesicBuffer:()=>v.x,geodesicDensify:()=>v.G,geodesicLength:()=>v.K,intersect:()=>v.p,intersectLinesToPoints:()=>v.L,intersects:()=>v.i,isSimple:()=>v.k,nearestCoordinate:()=>v.y,nearestVertex:()=>v.z,nearestVertices:()=>v.A,offset:()=>v.q,overlaps:()=>v.o,planarArea:()=>v.H,planarLength:()=>v.I,relate:()=>v.r,rotate:()=>v.B,simplify:()=>v.s,symmetricDifference:()=>v.n,touches:()=>v.t,union:()=>v.u,within:()=>v.w}),e(89465),e(27545);var v=e(4254)},93404:(Q,V,e)=>{e.d(V,{JK:()=>p,QZ:()=>v,Rq:()=>P,bg:()=>E,mB:()=>_});var o=e(40271);function E(a,j=!1){return a<=o.c8?j?new Array(a).fill(0):new Array(a):new Float64Array(a)}function v(a){return((0,o.kJ)(a)?a.length:a.byteLength/8)<=o.c8?Array.from(a):new Float64Array(a)}function P(a,j,I){return Array.isArray(a)?a.slice(j,j+I):a.subarray(j,j+I)}function p(a,j){for(let I=0;I<j.length;++I)a[I]=j[I];return a}function _(a){return Array.isArray(a)?new Float64Array(a):a}},99279:(Q,V,e)=>{e.d(V,{Z:()=>O});var o=e(50484),E=e(25387),v=e(89317),P=e(80543),j=(e(1535),e(57678),e(14007),e(21070)),I=e(10141),L=e(8554),x=e(85039);let U=class extends((0,E.J)(v.wq)){constructor(D){super(D),this.type="georeferenced-relative",this.isRelative=!0,this.isGeoreferenced=!0,this.origin=(0,L.c)()}getOriginPoint(D){const[l,C,f]=this.origin;return new x.Z({x:l,y:C,z:f,spatialReference:D})}setOriginFromPoint({x:D,y:l,z:C}){this.origin=(0,L.f)(D,l,C??0)}};(0,o._)([(0,j.J)({georeferencedRelative:"georeferenced-relative"},{readOnly:!0})],U.prototype,"type",void 0),(0,o._)([(0,P.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],U.prototype,"origin",void 0),U=(0,o._)([(0,I.j)("esri.geometry.support.MeshGeoreferencedRelativeVertexSpace")],U);const O=U},81255:(Q,V,e)=>{e.d(V,{Z:()=>O});var o=e(50484),E=e(25387),v=e(89317),P=e(80543),j=(e(1535),e(57678),e(14007),e(21070)),I=e(10141),L=e(8554),x=e(85039);let U=class extends((0,E.J)(v.wq)){constructor(D){super(D),this.type="local",this.isRelative=!0,this.isGeoreferenced=!1,this.origin=(0,L.c)()}getOriginPoint(D){const[l,C,f]=this.origin;return new x.Z({x:l,y:C,z:f,spatialReference:D})}setOriginFromPoint({x:D,y:l,z:C}){this.origin=(0,L.f)(D,l,C??0)}};(0,o._)([(0,j.J)({local:"local"},{readOnly:!0})],U.prototype,"type",void 0),(0,o._)([(0,P.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],U.prototype,"origin",void 0),U=(0,o._)([(0,I.j)("esri.geometry.support.MeshLocalVertexSpace")],U);const O=U},47689:(Q,V,e)=>{e.d(V,{CP:()=>_,JG:()=>D,LL:()=>a,NZ:()=>j,fV:()=>l,vj:()=>h,yT:()=>g,zE:()=>T});var o=e(15861),E=e(66476),v=e(57678),P=e(79412),p=e(11642);class _{constructor(m,M,W){this.assetName=m,this.assetMimeType=M,this.parts=W}equals(m){return this===m||this.assetName===m.assetName&&this.assetMimeType===m.assetMimeType&&(0,v.fS)(this.parts,m.parts,(M,W)=>M.equals(W))}isOnService(m){return this.parts.every(M=>M.isOnService(m))}makeHash(){let m="";for(const M of this.parts)m+=M.partHash;return m}toBlob(m){var M=this;return(0,o.Z)(function*(){const{parts:W}=M;if(1===W.length)return W[0].toBlob(m);const F=yield Promise.all(W.map(A=>A.toBlob(m)));return(0,P.k_)(m),new Blob(F)})()}}class a{constructor(m,M){this.partUrl=m,this.partHash=M}equals(m){return this===m||this.partUrl===m.partUrl&&this.partHash===m.partHash}isOnService(m){return this.partUrl.startsWith(`${m.path}/assets/`)}toBlob(m){var M=this;return(0,o.Z)(function*(){const{data:W}=yield(0,E.Z)(M.partUrl,{responseType:"blob"});return(0,P.k_)(m),W})()}}function j(c){return function U(c){return!!c&&(Array.isArray(c)?c.some(O):O(c))}(c?.source)}function I(c){return!!Array.isArray(c)&&c.every(m=>m instanceof _)}const L=/^(model\/gltf\+json)|(model\/gltf-binary)$/,x=/\.(gltf|glb)/i;function O(c){if(c instanceof File){const{type:m,name:M}=c;return L.test(m)||x.test(M)}return L.test(c.assetMimeType)||x.test(c.assetName)}function D(c,m){if(!c)return!1;const{source:M}=c;return function C(c,m){return Array.isArray(c)?c.length>0&&c.every(W=>f(W,m)):f(c,m)}(M,m)}function l(c,m){if(c===m)return!0;const{source:M}=c,{source:W}=m;if(M===W)return!0;if(I(M)&&I(W)){if(M.length!==W.length)return!1;const F=(Z,b)=>Z.assetName<b.assetName?-1:Z.assetName>b.assetName?1:0,A=[...M].sort(F),B=[...W].sort(F);for(let Z=0;Z<A.length;++Z)if(!A[Z].equals(B[Z]))return!1;return!0}return!1}function f(c,m){return c instanceof _&&c.isOnService(m)}function h(c,m){return c instanceof File?(0,p.dm)(c,m):(0,p.S0)(c.assetMimeType,m)??(0,p.Ow)(c.assetName,m)}function T(c){return Array.isArray(c)?c:[c]}function g(c){return!!c.original}},45049:(Q,V,e)=>{e.d(V,{Z:()=>D});var o=e(50484),E=e(80543),_=(e(1535),e(57678),e(14007),e(10141)),a=e(18714),j=e(95060),I=e(19855),L=e(29717),x=e(72262),U=e(86516);let O=class extends((0,I.h)((0,L.M)(j.Z))){constructor(l){super(l),this.elevationInfo=null,this.graphics=new x.J,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(l){return this.graphics.add(l),this}addMany(l){return this.graphics.addMany(l),this}removeAll(){return this.graphics.removeAll(),this}remove(l){this.graphics.remove(l)}removeMany(l){this.graphics.removeMany(l)}on(l,C){return super.on(l,C)}graphicChanged(l){this.emit("graphic-update",l)}};(0,o._)([(0,E.Cb)({type:U.Z})],O.prototype,"elevationInfo",void 0),(0,o._)([(0,E.Cb)((0,a.z)(x.J,"graphics"))],O.prototype,"graphics",void 0),(0,o._)([(0,E.Cb)({type:["show","hide"]})],O.prototype,"listMode",void 0),(0,o._)([(0,E.Cb)()],O.prototype,"screenSizePerspectiveEnabled",void 0),(0,o._)([(0,E.Cb)({readOnly:!0})],O.prototype,"type",void 0),(0,o._)([(0,E.Cb)({constructOnly:!0})],O.prototype,"internal",void 0),O=(0,o._)([(0,_.j)("esri.layers.GraphicsLayer")],O);const D=O},54556:(Q,V,e)=>{e.r(V),e.d(V,{default:()=>i});var b,o=e(15861),E=e(50484),P=(e(2189),e(66476)),p=e(57964),_=e(3233),a=e(72578),j=e(6785),I=e(80543),O=(e(1535),e(57678),e(14007),e(62185)),D=e(10141),l=e(7547),C=e(95060),f=e(19855),h=e(80099),T=e(70509),g=e(25836),c=e(29717),m=e(53715),M=e(8321),W=e(30220),F=e(1340),A=e(26894),B=e(43814),Z=e(85039);let s=b=class extends((0,f.h)((0,g.Q)((0,c.M)((0,h.q)((0,T.I)((0,_.R)(C.Z))))))){constructor(...y){super(...y),this.copyright="",this.fullExtent=new A.Z(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,B.Z.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=B.Z.WebMercator,this.subDomains=null,this.tileInfo=new W.Z({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new Z.Z({x:-20037508.342787,y:20037508.342787,spatialReference:B.Z.WebMercator}),spatialReference:B.Z.WebMercator,lods:[new M.Z({level:0,scale:591657527.591555,resolution:156543.033928}),new M.Z({level:1,scale:295828763.795777,resolution:78271.5169639999}),new M.Z({level:2,scale:147914381.897889,resolution:39135.7584820001}),new M.Z({level:3,scale:73957190.948944,resolution:19567.8792409999}),new M.Z({level:4,scale:36978595.474472,resolution:9783.93962049996}),new M.Z({level:5,scale:18489297.737236,resolution:4891.96981024998}),new M.Z({level:6,scale:9244648.868618,resolution:2445.98490512499}),new M.Z({level:7,scale:4622324.434309,resolution:1222.99245256249}),new M.Z({level:8,scale:2311162.217155,resolution:611.49622628138}),new M.Z({level:9,scale:1155581.108577,resolution:305.748113140558}),new M.Z({level:10,scale:577790.554289,resolution:152.874056570411}),new M.Z({level:11,scale:288895.277144,resolution:76.4370282850732}),new M.Z({level:12,scale:144447.638572,resolution:38.2185141425366}),new M.Z({level:13,scale:72223.819286,resolution:19.1092570712683}),new M.Z({level:14,scale:36111.909643,resolution:9.55462853563415}),new M.Z({level:15,scale:18055.954822,resolution:4.77731426794937}),new M.Z({level:16,scale:9027.977411,resolution:2.38865713397468}),new M.Z({level:17,scale:4513.988705,resolution:1.19432856685505}),new M.Z({level:18,scale:2256.994353,resolution:.597164283559817}),new M.Z({level:19,scale:1128.497176,resolution:.298582141647617}),new M.Z({level:20,scale:564.248588,resolution:.14929107082380833}),new M.Z({level:21,scale:282.124294,resolution:.07464553541190416}),new M.Z({level:22,scale:141.062147,resolution:.03732276770595208}),new M.Z({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(y,u){return"string"==typeof y?{urlTemplate:y,...u}:y}load(y){const u=this.loadFromPortal({supportedTypes:["WMTS"]},y).then(()=>{let S="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const K=new j.R9(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&K.authority?.includes("{subDomain}")&&(S="is missing 'subDomains' property")}else S="spatialReference must match tileInfo.spatialReference";else S="is missing the required 'urlTemplate' property value";if(S)throw new p.Z("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${S}`)});return this.addResolvingPromise(u),Promise.resolve(this)}get levelValues(){const y=[];if(!this.tileInfo)return null;for(const u of this.tileInfo.lods)y[u.level]=u.levelValue||u.level;return y}readSpatialReference(y,u){return y||B.Z.fromJSON(u.fullExtent?.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const y=[],{urlTemplate:u,subDomains:S}=this,K=new j.R9(u),N=K.scheme?K.scheme+"://":"//",H=N+K.authority+"/",k=K.authority;if(k?.includes("{subDomain}")){if(S&&S.length>0&&k.split(".").length>1)for(const J of S)y.push(N+k.replaceAll(/\{subDomain\}/gi,J)+"/")}else y.push(H);return y.map(j.xs)}get urlPath(){if(!this.urlTemplate)return null;const y=this.urlTemplate,u=new j.R9(y);return y.substring(((u.scheme?u.scheme+"://":"//")+u.authority+"/").length)}readUrlTemplate(y,u){return y||u.templateUrl}writeUrlTemplate(y,u){(0,j.oC)(y)&&(y="https:"+y),y&&(y=y.replaceAll(/\{z\}/gi,"{level}").replaceAll(/\{x\}/gi,"{col}").replaceAll(/\{y\}/gi,"{row}"),y=(0,j.Fv)(y)),u.templateUrl=y}fetchTile(y,u,S,K={}){const{signal:N}=K,H=this.getTileUrl(y,u,S),k={responseType:"image",signal:N,query:{...this.refreshParameters}};return(0,P.Z)(H,k).then(J=>J.data)}fetchImageBitmapTile(y,u,S,K={}){var N=this;return(0,o.Z)(function*(){const{signal:H}=K;if(N.fetchTile!==b.prototype.fetchTile){const $=yield N.fetchTile(y,u,S,K);return(0,m.V)($,y,u,S,H)}const k=N.getTileUrl(y,u,S),J={responseType:"blob",signal:H,query:{...N.refreshParameters}},{data:G}=yield(0,P.Z)(k,J);return(0,m.V)(G,y,u,S,H)})()}getTileUrl(y,u,S){const{levelValues:K,tileServers:N,urlPath:H}=this;if(!K||!N||!H)return"";const k=K[y];return N[u%N.length]+(0,a.gx)(H,{level:k,z:k,col:S,x:S,row:u,y:u})}};(0,E._)([(0,I.Cb)({type:String,value:"",json:{write:!0}})],s.prototype,"copyright",void 0),(0,E._)([(0,I.Cb)({type:A.Z,json:{write:!0},nonNullable:!0})],s.prototype,"fullExtent",void 0),(0,E._)([(0,I.Cb)({readOnly:!0,json:{read:!1,write:!1}})],s.prototype,"legendEnabled",void 0),(0,E._)([(0,I.Cb)({type:["show","hide"]})],s.prototype,"listMode",void 0),(0,E._)([(0,I.Cb)({json:{read:!0,write:!0}})],s.prototype,"blendMode",void 0),(0,E._)([(0,I.Cb)()],s.prototype,"levelValues",null),(0,E._)([(0,I.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],s.prototype,"isReference",void 0),(0,E._)([(0,I.Cb)({type:["WebTiledLayer"],value:"WebTiledLayer"})],s.prototype,"operationalLayerType",void 0),(0,E._)([(0,I.Cb)({readOnly:!0,json:{read:!1,write:!1}})],s.prototype,"popupEnabled",void 0),(0,E._)([(0,I.Cb)({type:B.Z})],s.prototype,"spatialReference",void 0),(0,E._)([(0,O.r)("spatialReference",["spatialReference","fullExtent.spatialReference"])],s.prototype,"readSpatialReference",null),(0,E._)([(0,I.Cb)({type:[String],json:{write:!0}})],s.prototype,"subDomains",void 0),(0,E._)([(0,I.Cb)({type:W.Z,json:{write:!0}})],s.prototype,"tileInfo",void 0),(0,E._)([(0,I.Cb)({readOnly:!0})],s.prototype,"tileServers",null),(0,E._)([(0,I.Cb)({json:{read:!1}})],s.prototype,"type",void 0),(0,E._)([(0,I.Cb)()],s.prototype,"urlPath",null),(0,E._)([(0,I.Cb)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],s.prototype,"urlTemplate",void 0),(0,E._)([(0,O.r)("urlTemplate",["urlTemplate","templateUrl"])],s.prototype,"readUrlTemplate",null),(0,E._)([(0,l.c)("urlTemplate",{templateUrl:{type:String}})],s.prototype,"writeUrlTemplate",null),(0,E._)([(0,I.Cb)({type:F.B,json:{write:!0}})],s.prototype,"wmtsInfo",void 0),s=b=(0,E._)([(0,D.j)("esri.layers.WebTileLayer")],s);const i=s},52334:(Q,V,e)=>{e.r(V),e.d(V,{applyEdits:()=>g,checkEditingCapabilities:()=>H,isFeatureIdentifierArrayWithGlobalId:()=>T,isFeatureIdentifierArrayWithObjectId:()=>f,isFeatureIdentifierWithGlobalId:()=>h,isFeatureIdentifierWithObjectId:()=>C,normalizeCollections:()=>K,normalizeEdits:()=>N,normalizeGeometries:()=>u,shallowCloneFeature:()=>k,uploadAssets:()=>Y});var o=e(15861),E=e(35458),v=e(83944),P=e(57964),p=e(34222),_=e(4703),a=e(79412),j=e(6785),I=e(19986),L=e(93566),x=e(92344),U=e(85295),O=e(11642),D=e(85971);function l(d){return null!=d?.applyEdits}function C(d){return"object"==typeof d&&null!=d&&"objectId"in d&&!!d.objectId}function f(d){return d.every(C)}function h(d){return"object"==typeof d&&null!=d&&"globalId"in d&&!!d.globalId}function T(d){return d.every(h)}function g(d,R,w){return c.apply(this,arguments)}function c(){return c=(0,o.Z)(function*(d,R,w,z={}){let X;const se=z.gdbVersion??("gdbVersion"in d?d.gdbVersion:null);(0,x.lQ)(d)&&d.url?X=(0,x.jF)(d.url,d.layerId,se,"original-and-current-features"===z.returnServiceEditsOption):(X=(0,a.hh)(),X.promise.then(te=>{(te.addedFeatures.length||te.updatedFeatures.length||te.deletedFeatures.length||te.addedAttachments.length||te.updatedAttachments.length||te.deletedAttachments.length)&&d.emit("edits",te)}),d.emit("apply-edits",{result:X.promise}));try{const{results:ee,edits:te}=yield function m(d,R,w,z){return M.apply(this,arguments)}(d,R,w,z),ne=re=>re.filter(ie=>!ie.error).map(p.d9),oe={edits:te,addedFeatures:ne(ee.addFeatureResults),updatedFeatures:ne(ee.updateFeatureResults),deletedFeatures:ne(ee.deleteFeatureResults),addedAttachments:ne(ee.addAttachmentResults),updatedAttachments:ne(ee.updateAttachmentResults),deletedAttachments:ne(ee.deleteAttachmentResults),exceededTransferLimit:!1,historicMoment:ee.editMoment?new Date(ee.editMoment):null,globalIdToObjectId:z.globalIdToObjectId};return ee.editedFeatureResults?.length&&(oe.editedFeatures=ee.editedFeatureResults),X.resolve(oe),ee}catch(ee){throw X.reject(ee),ee}}),c.apply(this,arguments)}function M(){return M=(0,o.Z)(function*(d,R,w,z){if(yield d.load(),!l(R))throw new P.Z(`${d.type}-layer:no-editing-support`,"Layer source does not support applyEdits capability",{layer:d});if(!(0,D.ln)(d))throw new P.Z(`${d.type}-layer:editing-disabled`,"Editing is disabled for layer",{layer:d});const{edits:X,options:q}=yield function W(d,R,w){return F.apply(this,arguments)}(d,w,z);return X.addFeatures?.length||X.updateFeatures?.length||X.deleteFeatures?.length||X.addAttachments?.length||X.updateAttachments?.length||X.deleteAttachments?.length?{edits:X,results:yield R.applyEdits(X,q)}:{edits:X,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}),M.apply(this,arguments)}function F(){return F=(0,o.Z)(function*(d,R,w){const z=(0,D.S1)(d),se=null!=d.infoFor3D;if(H(R,z,w,!(!R||!(R.addFeatures||R.updateFeatures||R.deleteFeatures)),!(!R||!(R.addAttachments||R.updateAttachments||R.deleteAttachments)),`${d.type}-layer`),!z.data.isVersioned&&w?.gdbVersion)throw new P.Z(`${d.type}-layer:invalid-parameter`,"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'");if(!z.editing.supportsRollbackOnFailure&&w?.rollbackOnFailureEnabled)throw new P.Z(`${d.type}-layer:invalid-parameter`,"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'");const ee={...w};if(null!=ee.rollbackOnFailureEnabled||z.editing.supportsRollbackOnFailure||(ee.rollbackOnFailureEnabled=!0),ee.rollbackOnFailureEnabled||"original-and-current-features"!==ee.returnServiceEditsOption||(!1===ee.rollbackOnFailureEnabled&&_.Z.getLogger("esri.layers.graphics.editingSupport").warn(`${d.type}-layer:invalid-parameter`,"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true, but 'rollBackOnFailure' was set to false. 'rollBackOnFailure' has been overwrritten and set to true."),ee.rollbackOnFailureEnabled=!0),!z.editing.supportsReturnServiceEditsInSourceSpatialReference&&ee.returnServiceEditsInSourceSR)throw new P.Z(`${d.type}-layer:invalid-parameter`,"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'");if(ee.returnServiceEditsInSourceSR&&"original-and-current-features"!==ee.returnServiceEditsOption)throw new P.Z(`${d.type}-layer:invalid-parameter`,"'returnServiceEditsInSourceSR' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'");const te=N(R,z,`${d.type}-layer`),ne=w?.globalIdUsed||se,oe=d.fields.filter(re=>"big-integer"===re.type||"oid"===re.type&&(re.length||0)>=8);if(ne){const{globalIdField:re}=d;if(null==re)throw new P.Z(`${d.type}-layer:invalid-parameter`,"Layer does not specify a global id field.");te.addFeatures.forEach(ie=>function y(d,R){const{attributes:w}=d;null==w[R]&&(w[R]=(0,I.zS)())}(ie,re))}return te.addFeatures.forEach(re=>function Z(d,R,w,z){A(d,R,w,z),B(d,R)}(re,d,ne,oe)),te.updateFeatures.forEach(re=>function s(d,R,w,z){A(d,R,w,z),B(d,R);const X=(0,D.S1)(R);if("geometry"in d&&null!=d.geometry&&!X?.editing.supportsGeometryUpdate)throw new P.Z(`${R.type}-layer:unsupported-operation`,"Layer does not support geometry updates.")}(re,d,ne,oe)),te.deleteFeatures.forEach(re=>function b(d,R,w,z){A(d,R,w,z)}(re,d,ne,oe)),te.addAttachments.forEach(re=>i(re,d)),te.updateAttachments.forEach(re=>i(re,d)),se&&(yield function J(d,R){return G.apply(this,arguments)}(te,d)),{edits:yield u(te),options:ee}}),F.apply(this,arguments)}function A(d,R,w,z){if(w){if("attributes"in d&&!d.attributes[R.globalIdField])throw new P.Z(`${R.type}-layer:invalid-parameter`,`Feature should have '${R.globalIdField}' when 'globalIdUsed' is true`);if(!("attributes"in d)&&!d.globalId)throw new P.Z(`${R.type}-layer:invalid-parameter`,"`'globalId' of the feature should be passed when 'globalIdUsed' is true")}if(z.length&&"attributes"in d)for(const X of z){const q=d.attributes[X.name];if(void 0!==q&&!(0,U.d2)(X,q))throw new P.Z(`${R.type}-layer:invalid-parameter`,`Big-integer field '${X.name}' of the feature must be less than ${Number.MAX_SAFE_INTEGER}`,{feature:d})}if("geometry"in d&&null!=d.geometry){if(d.geometry.hasZ&&!1===R.capabilities?.data.supportsZ)throw new P.Z(`${R.type}-layer:z-unsupported`,"Layer does not support z values while feature has z values.");if(d.geometry.hasM&&!1===R.capabilities?.data.supportsM)throw new P.Z(`${R.type}-layer:m-unsupported`,"Layer does not support m values while feature has m values.")}}function B(d,R){if("geometry"in d&&"mesh"===d.geometry?.type&&null!=R.infoFor3D){const{geometry:w}=d;if(w.vertexSpace.isGeoreferenced)throw new P.Z(`${R.type}-layer:georeferenced-mesh-unsupported`,"Uploading georeferenced meshes to a layer is not supported.")}}function i(d,R){const{feature:w,attachment:z}=d;if(!w||"attributes"in w&&!w.attributes[R.globalIdField])throw new P.Z(`${R.type}-layer:invalid-parameter`,"Attachment should have reference to a feature with 'globalId'");if(!("attributes"in w)&&!w.globalId)throw new P.Z(`${R.type}-layer:invalid-parameter`,"Attachment should have reference to 'globalId' of the parent feature");if(!z.globalId)throw new P.Z(`${R.type}-layer:invalid-parameter`,"Attachment should have 'globalId'");if(!z.data&&!z.uploadId)throw new P.Z(`${R.type}-layer:invalid-parameter`,"Attachment should have 'data' or 'uploadId'");if(!(z.data instanceof File&&z.data.name||z.name))throw new P.Z(`${R.type}-layer:invalid-parameter`,"'name' is required when attachment is specified as Base64 encoded string using 'data'");if(!R.capabilities?.editing.supportsUploadWithItemId&&z.uploadId)throw new P.Z(`${R.type}-layer:invalid-parameter`,"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'");if("string"==typeof z.data){const X=(0,j.sJ)(z.data);if(X&&!X.isBase64)throw new P.Z(`${R.type}-layer:invalid-parameter`,"Attachment 'data' should be a Blob, File or Base64 encoded string")}}function u(d){return S.apply(this,arguments)}function S(){return(S=(0,o.Z)(function*(d){const R=d.addFeatures??[],w=d.updateFeatures??[],z=R.concat(w).map(ee=>ee.geometry),X=yield(0,L.aX)(z),q=R.length,se=w.length;return X.slice(0,q).forEach((ee,te)=>R[te].geometry=ee),X.slice(q,q+se).forEach((ee,te)=>w[te].geometry=ee),d})).apply(this,arguments)}function K(d){return{addFeatures:Array.from(d?.addFeatures??[]),updateFeatures:Array.from(d?.updateFeatures??[]),deleteFeatures:d&&v.Z.isCollection(d.deleteFeatures)?d.deleteFeatures.toArray():d.deleteFeatures||[],addAttachments:d.addAttachments||[],updateAttachments:d.updateAttachments||[],deleteAttachments:d.deleteAttachments||[]}}function N(d,R,w){const z=K(d);if(z.addFeatures?.length&&!R.operations.supportsAdd)throw new P.Z(`${w}:unsupported-operation`,"Layer does not support adding features.");if(z.updateFeatures?.length&&!R.operations.supportsUpdate)throw new P.Z(`${w}:unsupported-operation`,"Layer does not support updating features.");if(z.deleteFeatures?.length&&!R.operations.supportsDelete)throw new P.Z(`${w}:unsupported-operation`,"Layer does not support deleting features.");return z.addFeatures=z.addFeatures.map(k),z.updateFeatures=z.updateFeatures.map(k),z.addAssetFeatures=[],z}function H(d,R,w,z,X,q){if(!d||!z&&!X)throw new P.Z(`${q}:missing-parameters`,"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required");if(!R.editing.supportsGlobalId&&w?.globalIdUsed)throw new P.Z(`${q}:invalid-parameter`,"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'");if(!R.editing.supportsGlobalId&&X)throw new P.Z(`${q}:invalid-parameter`,"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'");if(!w?.globalIdUsed&&X)throw new P.Z(`${q}:invalid-parameter`,"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true")}function k(d){const R=new E.Z;return d.attributes||(d.attributes={}),R.geometry=d.geometry,R.attributes=d.attributes,R}function G(){return(G=(0,o.Z)(function*(d,R){if(null==R.infoFor3D)return;const{infoFor3D:w}=R,z=(0,O.S0)("model/gltf-binary",w.supportedFormats)??(0,O.Ow)("glb",w.supportedFormats);if(!z||!w.editFormats.includes(z))throw new P.Z(`${R.type}-layer:binary-gltf-asset-not-supported`,"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.");d.addAssetFeatures??=[];const{addAssetFeatures:X}=d;for(const q of d.addFeatures??[])$(q)&&X.push(q);for(const q of d.updateFeatures??[])$(q)&&X.push(q)})).apply(this,arguments)}function $(d){return"mesh"===d?.geometry?.type}function Y(d,R,w,z){if(!l(R))throw new P.Z(`${d.type}-layer:no-editing-support`,"Layer source does not support applyEdits capability",{layer:d});if(!R.uploadAssets)throw new P.Z(`${d.type}-layer:no-asset-upload-support`,"Layer source does not support uploadAssets capability",{layer:d});return R.uploadAssets(w,z)}},64761:(Q,V,e)=>{e.d(V,{S:()=>E,X:()=>o});const o=1;function E(v,P){let p=0;for(const _ of P){const a=_.attributes?.[v];"number"==typeof a&&isFinite(a)&&(p=Math.max(p,a))}return p}},80751:(Q,V,e)=>{e.r(V),e.d(V,{createConnection:()=>b});var o=e(15861),E=e(50484),P=(e(2189),e(66476)),p=e(57964),_=e(4703),a=e(79412),j=e(6785),U=(e(1535),e(57678),e(14007),e(10141)),O=e(80543),D=e(53456),l=e(88278);let C=class extends l.Z.EventedAccessor{destroy(){this.emit("destroy")}get connectionError(){return this.errorString?new p.Z("stream-connection",this.errorString):null}onFeature(s){this.emit("data-received",s)}onMessage(s){this.emit("message-received",s)}};(0,E._)([(0,O.Cb)({readOnly:!0})],C.prototype,"connectionError",null),C=(0,E._)([(0,U.j)("esri.layers.support.StreamConnection")],C);const f=C;var h,s;(s=h||(h={}))[s.CONNECTING=0]="CONNECTING",s[s.OPEN=1]="OPEN",s[s.CLOSING=2]="CLOSING",s[s.CLOSED=3]="CLOSED";let T=class extends f{constructor(s){super(),this._outstandingMessages=[],this.errorString=null;const{geometryType:i,spatialReference:y,sourceSpatialReference:u}=s;this._config=s,this._featureZScaler=(0,D.k)(i,u,y),this._open()}_open(){var s=this;return(0,o.Z)(function*(){yield s._tryCreateWebSocket(),s.destroyed||(yield s._handshake())})()}destroy(){super.destroy(),null!=this._websocket&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null}get connectionStatus(){if(null==this._websocket)return"disconnected";switch(this._websocket.readyState){case h.CONNECTING:case h.OPEN:return"connected";case h.CLOSING:case h.CLOSED:return"disconnected"}}sendMessageToSocket(s){null!=this._websocket?this._websocket.send(JSON.stringify(s)):this._outstandingMessages.push(s)}sendMessageToClient(s){this._onMessage(s)}updateCustomParameters(s){this._config.customParameters=s,null!=this._websocket&&this._websocket.close()}_tryCreateWebSocket(s=this._config.source.path,i=1e3,y=0){var u=this;return(0,o.Z)(function*(){try{if(u.destroyed)return;const S=(0,j.fl)(s,u._config.customParameters??{});u._websocket=yield u._createWebSocket(S),u.notifyChange("connectionStatus")}catch(S){const K=i/1e3;return u._config.maxReconnectionAttempts&&y>=u._config.maxReconnectionAttempts?(_.Z.getLogger(u).error(new p.Z("websocket-connection","Exceeded maxReconnectionAttempts attempts. No further attempts will be made")),void u.destroy()):(_.Z.getLogger(u).error(new p.Z("websocket-connection",`Failed to connect. Attempting to reconnect in ${K}s`,S)),yield(0,a.e4)(i),u._tryCreateWebSocket(s,Math.min(1.5*i,1e3*u._config.maxReconnectionInterval),y+1))}})()}_setWebSocketJSONParseHandler(s){s.onmessage=i=>{try{const y=JSON.parse(i.data);this._onMessage(y)}catch(y){return void _.Z.getLogger(this).error(new p.Z("websocket-connection","Failed to parse message, invalid JSON",{error:y}))}}}_createWebSocket(s){return new Promise((i,y)=>{const u=new WebSocket(s);u.onopen=()=>{if(u.onopen=null,this.destroyed)return u.onclose=null,void u.close();u.onclose=S=>this._onClose(S),u.onerror=S=>this._onError(S),this._setWebSocketJSONParseHandler(u),i(u)},u.onclose=S=>{u.onopen=u.onclose=null,y(S)}})}_handshake(s=1e4){var i=this;return(0,o.Z)(function*(){const y=i._websocket;if(null==y)return;const u=(0,a.hh)(),S=y.onmessage,{filter:K,outFields:N,spatialReference:H}=i._config;return u.timeout(s),y.onmessage=k=>{let J=null;try{J=JSON.parse(k.data)}catch{}J&&"object"==typeof J||(_.Z.getLogger(i).error(new p.Z("websocket-connection","Protocol violation. Handshake failed - malformed message",k.data)),u.reject(),i.destroy()),J.spatialReference?.wkid!==H?.wkid&&(_.Z.getLogger(i).error(new p.Z("websocket-connection",`Protocol violation. Handshake failed - expected wkid of ${H.wkid}`,k.data)),u.reject(),i.destroy()),"json"!==J.format&&(_.Z.getLogger(i).error(new p.Z("websocket-connection","Protocol violation. Handshake failed - format is not set",k.data)),u.reject(),i.destroy()),K&&J.filter!==K&&_.Z.getLogger(i).error(new p.Z("websocket-connection","Tried to set filter, but server doesn't support it")),N&&J.outFields!==N&&_.Z.getLogger(i).error(new p.Z("websocket-connection","Tried to set outFields, but server doesn't support it")),y.onmessage=S;for(const G of i._outstandingMessages)y.send(JSON.stringify(G));i._outstandingMessages=[],u.resolve()},y.send(JSON.stringify({filter:K,outFields:N,format:"json",spatialReference:{wkid:H.wkid}})),u.promise})()}_onMessage(s){if(this.onMessage(s),"type"in s)switch(s.type){case"features":case"featureResult":for(const i of s.features)null!=this._featureZScaler&&this._featureZScaler(i.geometry),this.onFeature(i)}}_onError(s){const i="Encountered an error over WebSocket connection";this._set("errorString",i),_.Z.getLogger(this).error("websocket-connection",i)}_onClose(s){this._websocket=null,this.notifyChange("connectionStatus"),1e3!==s.code&&_.Z.getLogger(this).error("websocket-connection",`WebSocket closed unexpectedly with error code ${s.code}`),this.destroyed||this._open()}};(0,E._)([(0,O.Cb)()],T.prototype,"connectionStatus",null),(0,E._)([(0,O.Cb)()],T.prototype,"errorString",void 0),T=(0,E._)([(0,U.j)("esri.layers.graphics.sources.connections.WebSocketConnection")],T);var g=e(82784),c=e(91866),m=e(40637),M=e(43814);const F={maxQueryDepth:5,maxRecordCountFactor:3};let A=class extends T{constructor(s){super({...F,...s}),this._buddyServicesQuery=null,this._relatedFeatures=null}_open(){var s=this;return(0,o.Z)(function*(){const i=yield s._fetchServiceDefinition(s._config.source);i.timeInfo.trackIdField||_.Z.getLogger(s).warn("GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.");const y=s._fetchWebSocketUrl(i.streamUrls,s._config.spatialReference);s._buddyServicesQuery||(s._buddyServicesQuery=s._queryBuddyServices()),yield s._buddyServicesQuery,yield s._tryCreateWebSocket(y);const{filter:u,outFields:S}=s._config;s.destroyed||s._setFilter(u,S)})()}_onMessage(s){if("attributes"in s){let i;try{i=this._enrich(s),null!=this._featureZScaler&&this._featureZScaler(i.geometry)}catch(y){return void _.Z.getLogger(this).error(new p.Z("geoevent-connection","Failed to parse message",y))}this.onFeature(i)}else this.onMessage(s)}_fetchServiceDefinition(s){var i=this;return(0,o.Z)(function*(){const y={f:"json",...i._config.customParameters},u=(0,P.Z)(s.path,{query:y,responseType:"json"}),S=(yield u).data;return i._serviceDefinition=S,S})()}_fetchWebSocketUrl(s,i){const y=s[0],{urls:u,token:S}=y,K=this._inferWebSocketBaseUrl(u);return(0,j.fl)(`${K}/subscribe`,{outSR:""+i.wkid,token:S})}_inferWebSocketBaseUrl(s){if(1===s.length)return s[0];for(const i of s)if(i.includes("wss"))return i;return _.Z.getLogger(this).error(new p.Z("geoevent-connection","Unable to infer WebSocket url",s)),null}_setFilter(s,i){var y=this;return(0,o.Z)(function*(){const u=y._websocket;if(null==u||null==s&&null==i)return;const S=JSON.stringify({filter:y._serializeFilter(s,i)});let K=!1;const N=(0,a.hh)();return u.onmessage=J=>{const G=JSON.parse(J.data);G.filter&&(G.error&&(_.Z.getLogger(y).error(new p.Z("geoevent-connection","Failed to set service filter",G.error)),y._set("errorString",`Could not set service filter - ${G.error}`),N.reject(G.error)),y._setWebSocketJSONParseHandler(u),K=!0,N.resolve())},u.send(S),setTimeout(()=>{K||(y.destroyed||y._websocket!==u||_.Z.getLogger(y).error(new p.Z("geoevent-connection","Server timed out when setting filter")),N.reject())},1e4),N.promise})()}_serializeFilter(s,i){const y={};if(null==s&&null==i)return y;if(s?.geometry)try{const u=(0,m.im)(s.geometry);if("extent"!==u.type)throw new p.Z(`Expected extent but found type ${u.type}`);y.geometry=JSON.stringify(u.shiftCentralMeridian())}catch(u){_.Z.getLogger(this).error(new p.Z("geoevent-connection","Encountered an error when setting connection geometryDefinition",u))}return s?.where&&"1 = 1"!==s.where&&"1=1"!==s.where&&(y.where=s.where),null!=i&&(y.outFields=i.join(",")),y}_enrich(s){if(!this._relatedFeatures)return s;const u=this._relatedFeatures.get(s.attributes[this._serviceDefinition.relatedFeatures.joinField]);if(!u)return _.Z.getLogger(this).warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",s),s;const{attributes:S,geometry:K}=u;for(const N in S)s.attributes[N]=S[N];return K&&(s.geometry=K),s.geometry||s.centroid||_.Z.getLogger(this).error(new p.Z("geoevent-connection","Found malformed feature - no geometry found",s)),s}_queryBuddyServices(){var s=this;return(0,o.Z)(function*(){try{const{relatedFeatures:i,keepLatestArchive:y}=s._serviceDefinition,u=s._queryRelatedFeatures(i),S=s._queryArchive(y);yield u;const K=yield S;if(!K)return;for(const N of K.features)s.onFeature(s._enrich(N))}catch(i){_.Z.getLogger(s).error(new p.Z("geoevent-connection","Encountered an error when querying buddy services",{error:i}))}})()}_queryRelatedFeatures(s){var i=this;return(0,o.Z)(function*(){if(!s)return;const y=yield i._queryBuddy(s.featuresUrl);i._addRelatedFeatures(y)})()}_queryArchive(s){var i=this;return(0,o.Z)(function*(){if(s)return i._queryBuddy(s.featuresUrl)})()}_queryBuddy(s){var i=this;return(0,o.Z)(function*(){const y=new((yield Promise.resolve().then(e.bind(e,90373))).default)({url:s}),{capabilities:u}=yield y.load(),S=u.query.supportsMaxRecordCountFactor,K=u.query.supportsPagination,N=u.query.supportsCentroid,H=i._config.maxRecordCountFactor,k=y.capabilities.query.maxRecordCount,J=S?k*H:k,G=new c.Z;if(G.outFields=i._config.outFields??["*"],G.where=i._config.filter?.where??"1=1",G.returnGeometry=!0,G.returnExceededLimitFeatures=!0,G.outSpatialReference=M.Z.fromJSON(i._config.spatialReference),N&&(G.returnCentroid=!0),S&&(G.maxRecordCountFactor=H),K)return G.num=J,y.destroy(),i._queryPages(s,G);const $=yield(0,g.JT)(s,G,i._config.sourceSpatialReference);return y.destroy(),$.data})()}_queryPages(s,i,y=[],u=0){var S=this;return(0,o.Z)(function*(){i.start=null!=i.num?u*i.num:null;const{data:K}=yield(0,g.JT)(s,i,S._config.sourceSpatialReference);return K.exceededTransferLimit&&u<(S._config.maxQueryDepth??0)?(K.features.forEach(N=>y.push(N)),S._queryPages(s,i,y,u+1)):(y.forEach(N=>K.features.push(N)),K)})()}_addRelatedFeatures(s){const i=new Map,y=s.features,u=this._serviceDefinition.relatedFeatures.joinField;for(const S of y)i.set(S.attributes[u],S);this._relatedFeatures=i}};A=(0,E._)([(0,U.j)("esri.layers.graphics.sources.connections.GeoEventConnection")],A);const B=A;let Z=class extends f{constructor(s){super(),this.connectionStatus="connected",this.errorString=null;const{geometryType:i,spatialReference:y,sourceSpatialReference:u}=s;this._featureZScaler=(0,D.k)(i,u,y)}updateCustomParameters(s){}sendMessageToSocket(s){}sendMessageToClient(s){if("type"in s)switch(s.type){case"features":case"featureResult":for(const i of s.features)null!=this._featureZScaler&&this._featureZScaler(i.geometry),this.onFeature(i)}this.onMessage(s)}};function b(s,i,y,u,S,K,N,H){const k={source:s,sourceSpatialReference:i,spatialReference:y,geometryType:u,filter:S,maxReconnectionAttempts:K,maxReconnectionInterval:N,customParameters:H};return s?s.path.startsWith("wss://")||s.path.startsWith("ws://")?new T(k):new B(k):new Z(k)}(0,E._)([(0,O.Cb)()],Z.prototype,"connectionStatus",void 0),(0,E._)([(0,O.Cb)()],Z.prototype,"errorString",void 0),Z=(0,E._)([(0,U.j)("esri.layers.support.ClientSideConnection")],Z)},42726:(Q,V,e)=>{e.d(V,{O0:()=>x,av:()=>a,b:()=>h,d1:()=>I,og:()=>l});var o=e(15861),E=e(51310),v=e(33721),P=e(85295);class p{constructor(){this.code=null,this.description=null}}class _{constructor(c){this.error=new p,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=c}}function a(g){return new _(g)}class j{constructor(c){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=c}}function I(g){return new j(g)}const L=new Set;function x(g,c,m,M=!1){L.clear();for(const W in m){const F=g.get(W);if(!F)continue;const A=O(F,m[W]);if(L.add(F.name),F&&(M||F.editable)){const B=(0,P.Qc)(F,A);if(B)return a((0,P.vP)(B,F,A));c[F.name]=A}}for(const W of g?.requiredFields??[])if(!L.has(W.name))return a(`missing required field "${W.name}"`);return null}function O(g,c){let m=c;return(0,P.H7)(g)&&"string"==typeof c?m=parseFloat(c):(0,P.qN)(g)&&null!=c&&"string"!=typeof c?m=String(c):(0,P.y2)(g)&&"string"==typeof c&&(m=(0,E.sG)(c)),(0,P.Pz)(m)}let D;function l(g,c){if(!g||!(0,v.JY)(c))return g;if("rings"in g||"paths"in g){if(null==D)throw new TypeError("geometry engine not loaded");return D.simplify(c,g)}return g}function f(){return(f=(0,o.Z)(function*(){return null==D&&(D=yield Promise.all([e.e(9465),e.e(8592)]).then(e.bind(e,49574))),D})).apply(this,arguments)}function h(g,c){return T.apply(this,arguments)}function T(){return T=(0,o.Z)(function*(g,c){!(0,v.JY)(g)||"esriGeometryPolygon"!==c&&"esriGeometryPolyline"!==c||(yield function C(){return f.apply(this,arguments)}())}),T.apply(this,arguments)}},13597:(Q,V,e)=>{e.d(V,{Z:()=>O});var o=e(50484),v=(e(2189),e(80543)),a=(e(1535),e(57678),e(14007),e(62185)),j=e(10141),I=e(30220),L=e(58296),x=e(27627),U=e(43814);const O=D=>{let l=class extends D{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){this.tilemapCache?.destroy?.()}readMinScale(C,f){return null!=f.minLOD&&null!=f.maxLOD?C:0}readMaxScale(C,f){return null!=f.minLOD&&null!=f.maxLOD?C:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(C,f,h){const T=f.capabilities?.includes("Tilemap");let{minLOD:g,maxLOD:c,minScale:m,maxScale:M}=f;if(null==g&&null==c&&0!==m&&0!==M){const W=F=>Math.round(1e4*F)/1e4;m=W(m||f.tileInfo.lods[0].scale),M=W(M||f.tileInfo.lods[f.tileInfo.lods.length-1].scale);for(const F of f.tileInfo.lods){const A=W(F.scale);g=A>=m?F.level:g,c=A>=M?F.level:c}}if(T)return new x.y({layer:this,minLOD:g,maxLOD:c});if(f.tileInfo){const W=new I.Z;return W.read(f.tileInfo,h),new L.Z(W,g,c)}return null}};return(0,o._)([(0,v.Cb)({json:{read:{source:"copyrightText"}}})],l.prototype,"copyright",void 0),(0,o._)([(0,v.Cb)()],l.prototype,"minScale",void 0),(0,o._)([(0,a.r)("service","minScale")],l.prototype,"readMinScale",null),(0,o._)([(0,v.Cb)()],l.prototype,"maxScale",void 0),(0,o._)([(0,a.r)("service","maxScale")],l.prototype,"readMaxScale",null),(0,o._)([(0,v.Cb)({type:U.Z})],l.prototype,"spatialReference",void 0),(0,o._)([(0,v.Cb)({readOnly:!0})],l.prototype,"supportsBlankTile",null),(0,o._)([(0,v.Cb)({type:I.Z})],l.prototype,"tileInfo",void 0),(0,o._)([(0,v.Cb)()],l.prototype,"tilemapCache",void 0),(0,o._)([(0,a.r)("service","tilemapCache",["capabilities","tileInfo"])],l.prototype,"readTilemapCache",null),(0,o._)([(0,v.Cb)()],l.prototype,"version",void 0),l=(0,o._)([(0,j.j)("esri.layers.mixins.ArcGISCachedService")],l),l}},74623:(Q,V,e)=>{e.d(V,{A:()=>E});const o=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function E(v){return null!=v&&o.some(([P,p])=>v>=P&&v<=p)}},85155:(Q,V,e)=>{e.d(V,{DC:()=>I,Nw:()=>f,UY:()=>T,Ym:()=>D,a1:()=>m,jX:()=>g,po:()=>W,uT:()=>l,xG:()=>U});var o=e(15861),E=e(57964),v=e(60084),P=e(61018),p=e(27835),_=e(453),a=e(50318),j=e(65820);function I(A,B,Z){const b=Z(A);if(!b.isValid)throw new E.Z(`${B}:invalid-parameters`,b.errorMessage,{layer:A})}function L(A){return x.apply(this,arguments)}function x(){return(x=(0,o.Z)(function*(A){const{layer:B,errorNamePrefix:Z,validateLayer:b}=A;yield B.load(),I(B,Z,b)})).apply(this,arguments)}function U(A,B){return`Layer (title: ${A.title}, id: ${A.id}) of type '${A.declaredClass}' ${B}`}function O(A){const{item:B,itemType:Z,errorNamePrefix:b,layer:s,validateItem:i}=A;if((0,j.w)(B),B.type!==Z)throw new E.Z(`${b}:portal-item-wrong-type`,`Portal item type should be "${Z}"`,{item:B,layer:s});if(i){const y=i(B);if(!y.isValid)throw new E.Z(`${b}:invalid-parameters`,y.errorMessage,{layer:s})}}function D(A){const{layer:B,errorNamePrefix:Z}=A,{portalItem:b}=B;if(!b)throw new E.Z(`${Z}:portal-item-not-set`,U(B,"requires the portalItem property to be set"));if(!b.loaded)throw new E.Z(`${Z}:portal-item-not-loaded`,U(B,"cannot be saved to a portal item that does not exist or is inaccessible"));O({...A,item:b})}function l(A){const{newItem:B,itemType:Z}=A;let b=p.default.from(B);return b.id&&(b=b.clone(),b.id=null),b.type??=Z,b.portal??=P.Z.getDefault(),O({...A,item:b}),b}function f(A,B,Z){return h.apply(this,arguments)}function h(){return(h=(0,o.Z)(function*(A,B,Z){"beforeSave"in A&&"function"==typeof A.beforeSave&&(yield A.beforeSave());const b=A.write({},B);return yield Promise.all(B.resources?.pendingOperations??[]),function C(A,B){let Z=(A.messages??[]).filter(({type:b})=>"error"===b).map(({name:b,message:s,details:i})=>new E.Z(b,s,i));if(A.blockedRelativeUrls&&(Z=Z.concat(A.blockedRelativeUrls.map(b=>new E.Z("url:unsupported",`Relative url '${b}' is not supported`)))),B?.ignoreUnsupported&&(Z=Z.filter(({name:b})=>"layer:unsupported"!==b&&"symbol:unsupported"!==b&&"symbol-layer:unsupported"!==b&&"property:unsupported"!==b&&"url:unsupported"!==b)),Z.length>0)throw new E.Z("layer-write:unsupported","Failed to save layer due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:Z})}(B,Z),b})).apply(this,arguments)}function T(A){(0,a.qj)(A,a.Kz.JSAPI),A.typeKeywords&&(A.typeKeywords=A.typeKeywords.filter((B,Z,b)=>b.indexOf(B)===Z))}function g(A,B,Z){return c.apply(this,arguments)}function c(){return(c=(0,o.Z)(function*(A,B,Z){const b=A.portal;yield b.signIn(),yield b.user?.addItem({item:A,data:B,folder:Z?.folder})})).apply(this,arguments)}function m(A,B){return M.apply(this,arguments)}function M(){return(M=(0,o.Z)(function*(A,B){const{layer:Z,createItemData:b,createJSONContext:s,saveResources:i}=A;yield L(A),D(A);const y=Z.portalItem,u=s?s(y):(0,_.Yv)(y),S=yield f(Z,u,B),K=yield b({layer:Z,layerJSON:S},y);return T(y),yield y.update({data:K}),(0,v.D)(u),yield i?.(y,u),y})).apply(this,arguments)}function W(A,B){return F.apply(this,arguments)}function F(){return(F=(0,o.Z)(function*(A,B){const{layer:Z,createItemData:b,createJSONContext:s,setItemProperties:i,saveResources:y}=A;yield L(A);const u=l(A),S=s?s(u):(0,_.Yv)(u),K=yield f(Z,S,B),N=yield b({layer:Z,layerJSON:K},u);return yield i(Z,u),T(u),yield g(u,N,B),Z.portalItem=u,(0,v.D)(S),yield y?.(u,S),u})).apply(this,arguments)}},6523:(Q,V,e)=>{e.d(V,{j:()=>I});var o=e(50484),E=e(73514),v=e(80543),a=(e(1535),e(57678),e(14007),e(10141));const j={visible:"visibleSublayers"};let I=class extends E.Z{constructor(L){super(L),this.scale=0}set layer(L){this._get("layer")!==L&&(this._set("layer",L),this.removeHandles("layer"),L&&this.addHandles([L.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),L.on("wms-sublayer-update",x=>this.notifyChange(j[x.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:L})=>L).map(({name:L})=>L).join()}get version(){this.commitProperty("layers");const L=this.layer;return L&&L.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:L,scale:x}=this,U=L?.sublayers,O=[],D=l=>{const{minScale:C,maxScale:f,sublayers:h,visible:T}=l;T&&(0===x||(0===C||x<=C)&&(0===f||x>=f))&&(h?h.forEach(D):O.push(l))};return U?.forEach(D),O}toJSON(){const{layer:L,layers:x}=this,{imageFormat:U,imageTransparency:O,version:D}=L;return{format:U,request:"GetMap",service:"WMS",styles:"",transparent:O?"TRUE":"FALSE",version:D,layers:x}}};(0,o._)([(0,v.Cb)()],I.prototype,"layer",null),(0,o._)([(0,v.Cb)({readOnly:!0})],I.prototype,"layers",null),(0,o._)([(0,v.Cb)({type:Number})],I.prototype,"scale",void 0),(0,o._)([(0,v.Cb)({readOnly:!0})],I.prototype,"version",null),(0,o._)([(0,v.Cb)({readOnly:!0})],I.prototype,"visibleSublayers",null),I=(0,o._)([(0,a.j)("esri.layers.support.ExportWMSImageParameters")],I)},46687:(Q,V,e)=>{e.d(V,{L:()=>U});var o=e(50484),E=e(73514),v=e(80543),a=(e(1535),e(57678),e(14007),e(10141)),j=e(5391),I=e(83821),L=e(45425),x=e(95150);let U=class extends E.Z{constructor(O){super(O)}get bounds(){const O=this.coords;return null==O?.extent?null:(0,L.oJ)(O.extent)}get coords(){const O=this.element.georeference?.coords;return(0,I.projectOrLoad)(O,this.spatialReference).geometry}get normalizedCoords(){return j.Z.fromJSON((0,x.Ui)(this.coords))}get normalizedBounds(){const O=null!=this.normalizedCoords?this.normalizedCoords.extent:null;return null!=O?(0,L.oJ)(O):null}};(0,o._)([(0,v.Cb)()],U.prototype,"spatialReference",void 0),(0,o._)([(0,v.Cb)()],U.prototype,"element",void 0),(0,o._)([(0,v.Cb)()],U.prototype,"bounds",null),(0,o._)([(0,v.Cb)()],U.prototype,"coords",null),(0,o._)([(0,v.Cb)()],U.prototype,"normalizedCoords",null),(0,o._)([(0,v.Cb)()],U.prototype,"normalizedBounds",null),U=(0,o._)([(0,a.j)("esri.layers.support.MediaElementView")],U)},58296:(Q,V,e)=>{e.d(V,{Z:()=>P});var o=e(15861),E=e(57964),v=e(79412);class P{constructor(_,a=0,j=_.lods[_.lods.length-1].level){this.tileInfo=_,this.minLOD=a,this.maxLOD=j,_.lodAt(a)||(this.minLOD=_.lods[0].level),_.lodAt(j)||(this.maxLOD=_.lods[_.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(_,a,j){const I=this.tileInfo?.lodAt(_);return!I||_<this.minLOD||_>this.maxLOD?"unavailable":I.cols&&I.rows?j>=I.cols[0]&&j<=I.cols[1]&&a>=I.rows[0]&&a<=I.rows[1]?"unknown":"unavailable":"unknown"}fetchAvailability(_,a,j,I){var L=this;return(0,o.Z)(function*(){yield(0,v.Yn)(I);const x=L.getAvailability(_,a,j);if("unavailable"===x)throw new E.Z("tile-map:tile-unavailable","Tile is not available",{level:_,row:a,col:j});return x})()}fetchAvailabilityUpsample(_,a,j,I,L){var x=this;return(0,o.Z)(function*(){yield(0,v.Yn)(L),I.level=_,I.row=a,I.col=j;const U=x.tileInfo;return U.updateTileInfo(I),x.fetchAvailability(_,a,j,L).catch(O=>{if((0,v.D_)(O))throw O;if(U.upsampleTile(I))return x.fetchAvailabilityUpsample(I.level,I.row,I.col,I,L);throw O})})()}}},27627:(Q,V,e)=>{e.d(V,{y:()=>b});var Z,o=e(15861),E=e(50484),v=e(66476),P=e(73514),p=e(38737),_=e(57964),a=e(1258),j=e(52540),I=e(43029),L=e(79412),x=e(77675),U=e(66679),O=e(6785),D=e(80543),C=(e(1535),e(57678)),h=(e(14007),e(10141)),T=e(74901),g=e(34222),c=e(40271);class F{constructor(i){this._validateJSON(i);const{location:y,data:u}=i;this.location=Object.freeze((0,g.d9)(y));let N=!0,H=!0;const J=function m(s,i=!1){return s<=c.c8?i?new Array(s).fill(0):new Array(s):new Uint32Array(s)}(Math.ceil(this.location.width*this.location.height/32));let G=0;for(let $=0;$<u.length;$++){const Y=$%32;u[$]?(H=!1,J[G]|=1<<Y):N=!1,31===Y&&++G}H?(this._availability="unavailable",this.byteSize=40):N?(this._availability="available",this.byteSize=40):(this._availability=J,this.byteSize=40+(0,c.Xw)(J))}getAvailability(i,y){if("unavailable"===this._availability||"available"===this._availability)return this._availability;const u=(i-this.location.top)*this.location.width+(y-this.location.left),K=u>>5,N=this._availability;return K<0||K>N.length?"unknown":N[K]&1<<u%32?"available":"unavailable"}static fromDefinition(i,y){const u=i.service.request||v.Z,{row:S,col:K,width:N,height:H}=i,k={query:{f:"json"}};return y=y?{...k,...y}:k,u(function B(s){let i;if(s.service.tileServers?.length){const u=s.service.tileServers;i=`${u&&u.length?u[s.row%u.length]:s.service.url}/tilemap/${s.level}/${s.row}/${s.col}/${s.width}/${s.height}`}else i=`${s.service.url}/tilemap/${s.level}/${s.row}/${s.col}/${s.width}/${s.height}`;const y=s.service.query;return y&&(i=`${i}?${y}`),i}(i),y).then(J=>J.data).catch(J=>{if(J&&J.details&&422===J.details.httpStatus)return{location:{top:S,left:K,width:N,height:H},valid:!0,data:(0,C.a9)(N*H,0)};throw J}).then(J=>{if(J.location&&(J.location.top!==S||J.location.left!==K||J.location.width!==N||J.location.height!==H))throw new _.Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:J,definition:{top:S,left:K,width:N,height:H}});return F.fromJSON(J)})}static fromJSON(i){return Object.freeze(new F(i))}_validateJSON(i){if(!i?.location)throw new _.Z("tilemap:missing-location","Location missing from tilemap response");if(!1===i.valid)throw new _.Z("tilemap:invalid","Tilemap response was marked as invalid");if(!i.data)throw new _.Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(i.data))throw new _.Z("tilemap:data-mismatch","Data must be an array of numbers");if(i.data.length!==i.location.width*i.location.height)throw new _.Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function A(s){return`${s.level}/${s.row}/${s.col}/${s.width}/${s.height}`}let b=Z=class extends P.Z{constructor(s){super(s),this._pendingTilemapRequests={},this.request=v.Z,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new j.z(2*p.Y.MEGABYTES),this.addHandles([(0,x.YP)(()=>{const{layer:s}=this;return[s?.parsedUrl,s?.tileServers,s?.apiKey,s?.customParameters]},()=>this._initializeTilemapDefinition(),x.nn)])}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}fetchTilemap(s,i,y,u){if(!this.layer.tileInfo.lodAt(s)||s<this.effectiveMinLOD||s>this.effectiveMaxLOD)return Promise.reject(new _.Z("tilemap-cache:level-unavailable",`Level ${s} is unavailable in the service`));const S=this._tmpTilemapDefinition,K=this._tilemapFromCache(s,i,y,S);if(K)return Promise.resolve(K);const N=u?.signal;return u={...u,signal:null},new Promise((H,k)=>{(0,L.fu)(N,()=>k((0,L.zE)()));const J=A(S);let G=this._pendingTilemapRequests[J];if(!G){G=F.fromDefinition(S,u).then(Y=>(this._tilemapCache.put(J,Y,Y.byteSize),Y));const $=()=>{delete this._pendingTilemapRequests[J]};this._pendingTilemapRequests[J]=G,G.then($,$)}G.then(H,k)})}getAvailability(s,i,y){if(!this.layer.tileInfo.lodAt(s)||s<this.effectiveMinLOD||s>this.effectiveMaxLOD)return"unavailable";const u=this._tilemapFromCache(s,i,y,this._tmpTilemapDefinition);return u?u.getAvailability(i,y):"unknown"}fetchAvailability(s,i,y,u){return!this.layer.tileInfo.lodAt(s)||s<this.effectiveMinLOD||s>this.effectiveMaxLOD?Promise.reject(new _.Z("tile-map:tile-unavailable","Tile is not available",{level:s,row:i,col:y})):this.fetchTilemap(s,i,y,u).catch(S=>S).then(S=>{if(S instanceof F){const K=S.getAvailability(i,y);if("unavailable"===K)throw new _.Z("tile-map:tile-unavailable","Tile is not available",{level:s,row:i,col:y});return K}if((0,L.D_)(S))throw S;return"unknown"})}fetchAvailabilityUpsample(s,i,y,u,S){u.level=s,u.row=i,u.col=y;const K=this.layer.tileInfo;K.updateTileInfo(u);const N=this.fetchAvailability(s,i,y,S).catch(H=>{if((0,L.D_)(H))throw H;if(K.upsampleTile(u))return this.fetchAvailabilityUpsample(u.level,u.row,u.col,u,S);throw H});return this._fetchAvailabilityUpsamplePrefetch(u.id,s,i,y,S,N),N}_fetchAvailabilityUpsamplePrefetch(s,i,y,u,S,K){var N=this;return(0,o.Z)(function*(){if(!N._prefetchingEnabled||null==s)return;const H=`prefetch-${s}`;if(N.hasHandles(H))return;const k=new AbortController;K.then(()=>k.abort(),()=>k.abort());let J=!1;const G=(0,a.kB)(()=>{J||(J=!0,k.abort())});if(N.addHandles(G,H),yield(0,U.MU)(10,k.signal).catch(()=>{}),J||(J=!0,N.removeHandles(H)),(0,L.Hc)(k))return;const $=new T.f(s,i,y,u),Y={...S,signal:k.signal},d=N.layer.tileInfo;for(let R=0;Z._prefetches.length<Z._maxPrefetch&&d.upsampleTile($);++R){const w=N.fetchAvailability($.level,$.row,$.col,Y);Z._prefetches.push(w);const z=()=>{Z._prefetches.removeUnordered(w)};w.then(z,z)}})()}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:s,apiKey:i,customParameters:y}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:s.path,query:(0,O.B7)({...s.query,...y,token:i??s.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(s,i,y,u){u.level=s,u.row=i-i%this.size,u.col=y-y%this.size;const S=A(u);return this._tilemapCache.get(S)}get test(){const s=this;return{get prefetchingEnabled(){return s._prefetchingEnabled},set prefetchingEnabled(i){s._prefetchingEnabled=i},hasTilemap:(i,y,u)=>!!s._tilemapFromCache(i,y,u,s._tmpTilemapDefinition)}}};b._maxPrefetch=4,b._prefetches=new I.Z({initialSize:Z._maxPrefetch}),(0,E._)([(0,D.Cb)({constructOnly:!0})],b.prototype,"layer",void 0),(0,E._)([(0,D.Cb)({constructOnly:!0})],b.prototype,"minLOD",void 0),(0,E._)([(0,D.Cb)({constructOnly:!0})],b.prototype,"maxLOD",void 0),(0,E._)([(0,D.Cb)({constructOnly:!0})],b.prototype,"request",void 0),(0,E._)([(0,D.Cb)({constructOnly:!0})],b.prototype,"size",void 0),b=Z=(0,E._)([(0,h.j)("esri.layers.support.TilemapCache")],b)},1340:(Q,V,e)=>{e.d(V,{B:()=>j});var a,o=e(50484),E=e(89317),v=e(34222),P=e(80543),_=(e(1535),e(10141));let j=a=class extends E.wq{constructor(I){super(I)}clone(){return new a({customLayerParameters:(0,v.d9)(this.customLayerParameters),customParameters:(0,v.d9)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};(0,o._)([(0,P.Cb)({json:{type:Object,write:!0}})],j.prototype,"customLayerParameters",void 0),(0,o._)([(0,P.Cb)({json:{type:Object,write:!0}})],j.prototype,"customParameters",void 0),(0,o._)([(0,P.Cb)({type:String,json:{write:!0}})],j.prototype,"layerIdentifier",void 0),(0,o._)([(0,P.Cb)({type:String,json:{write:!0}})],j.prototype,"tileMatrixSet",void 0),(0,o._)([(0,P.Cb)({type:String,json:{write:!0}})],j.prototype,"url",void 0),j=a=(0,o._)([(0,_.j)("esri.layer.support.WMTSLayerInfo")],j)},23933:(Q,V,e)=>{e.d(V,{V:()=>v});var o=e(15861),E=e(6661);function v(x,U){return P.apply(this,arguments)}function P(){return(P=(0,o.Z)(function*(x,U){const O=yield(0,E.T)(x,U);L(O),a(O);const D={serviceJSON:O};if((O.currentVersion??0)<10.5)return D;const l=yield(0,E.T)(x+"/layers",U);return L(l),a(l),D.layersJSON={layers:l.layers,tables:l.tables},D})).apply(this,arguments)}function p(x){return"Feature Layer"===x.type||"Oriented Imagery Layer"===x.type}function _(x){return"Table"===x.type}function a(x){x.layers=x.layers?.filter(p),x.tables=x.tables?.filter(_)}function j(x){x.type||="Feature Layer"}function I(x){x.type||="Table"}function L(x){x.layers?.forEach(j),x.tables?.forEach(I)}},82001:(Q,V,e)=>{e.d(V,{CS:()=>l,Cw:()=>D,Yu:()=>g,j5:()=>C,lm:()=>m});var o=e(15861),E=e(11931),v=e(26152),P=e(62691),p=e(66476),_=e(34222),a=e(6785),j=e(43814),I=e(27048),L=e(43585),x=e(91963),U=e(93792);const O={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function D(M){const W=M.folders||[],F=W.slice(),A=new Map,B=new Map,Z=new Map,b=new Map,s=new Map,i={esriGeometryPoint:B,esriGeometryPolyline:Z,esriGeometryPolygon:b};(M.featureCollection?.layers||[]).forEach(u=>{const S=(0,_.d9)(u);S.featureSet.features=[];const K=u.featureSet.geometryType;A.set(K,S);const N=u.layerDefinition.objectIdField;"esriGeometryPoint"===K?f(B,N,u.featureSet.features):"esriGeometryPolyline"===K?f(Z,N,u.featureSet.features):"esriGeometryPolygon"===K&&f(b,N,u.featureSet.features)}),M.groundOverlays&&M.groundOverlays.forEach(u=>{s.set(u.id,u)}),W.forEach(u=>{u.networkLinkIds.forEach(S=>{const K=function T(M,W,F){const A=function h(M,W){let F;return W.some(A=>A.id===M&&(F=A,!0)),F}(M,F);return A&&(A.parentFolderId=W,A.networkLink=A),A}(S,u.id,M.networkLinks);K&&F.push(K)})}),F.forEach(u=>{if(u.featureInfos){u.points=(0,_.d9)(A.get("esriGeometryPoint")),u.polylines=(0,_.d9)(A.get("esriGeometryPolyline")),u.polygons=(0,_.d9)(A.get("esriGeometryPolygon")),u.mapImages=[];for(const S of u.featureInfos)switch(S.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const K=i[S.type].get(S.id);K&&u[O[S.type]]?.featureSet.features.push(K);break}case"GroundOverlay":{const K=s.get(S.id);K&&u.mapImages.push(K);break}}u.fullExtent=m([u])}});const y=m(F);return{folders:W,sublayers:F,extent:y}}function l(M,W,F,A){const B=v.id?.findCredential(M);return M=(0,a.fl)(M,{token:B?.token}),(0,p.Z)(E.default.kmlServiceUrl,{query:{url:M,model:"simple",folders:"",refresh:0!==F||void 0,outSR:JSON.stringify(W)},responseType:"json",signal:A})}function C(M,W,F=null,A=[]){const B=[],Z={},b=W.sublayers,s=new Set(W.folders.map(i=>i.id));return b.forEach(i=>{const y=new M;if(F?y.read(i,F):y.read(i),A.length&&s.has(y.id)&&(y.visible=A.includes(y.id)),Z[i.id]=y,null!=i.parentFolderId&&-1!==i.parentFolderId){const u=Z[i.parentFolderId];u.sublayers||(u.sublayers=[]),u.sublayers?.unshift(y)}else B.unshift(y)}),B}function f(M,W,F){F.forEach(A=>{M.set(A.attributes[W],A)})}function g(M){return c.apply(this,arguments)}function c(){return(c=(0,o.Z)(function*(M){const W=U.Z.fromJSON(M.featureSet).features,A=(0,x.i)(M.layerDefinition.drawingInfo.renderer),B=P.Z.fromJSON(M.popupInfo),Z=[];for(const b of W){const s=yield A.getSymbolAsync(b);b.symbol=s,b.popupTemplate=B,b.visible=!0,Z.push(b)}return Z})).apply(this,arguments)}function m(M){const W=(0,I.Ue)(I.G_),F=(0,I.Ue)(I.G_);for(const A of M){if(A.polygons?.featureSet?.features)for(const B of A.polygons.featureSet.features)(0,L.Yg)(W,B.geometry),(0,I.TC)(F,W);if(A.polylines?.featureSet?.features)for(const B of A.polylines.featureSet.features)(0,L.Yg)(W,B.geometry),(0,I.TC)(F,W);if(A.points?.featureSet?.features)for(const B of A.points.featureSet.features)(0,L.Yg)(W,B.geometry),(0,I.TC)(F,W);if(A.mapImages)for(const B of A.mapImages)(0,L.Yg)(W,B.extent),(0,I.TC)(F,W)}return(0,I.fS)(F,I.G_)?void 0:{xmin:F[0],ymin:F[1],zmin:F[2],xmax:F[3],ymax:F[4],zmax:F[5],spatialReference:j.Z.WGS84}}},4906:(Q,V,e)=>{e.r(V),e.d(V,{populateGroupLayer:()=>S,populateOperationalLayers:()=>O});var o=e(15861),E=e(83944),P=(e(14007),e(81390)),p=e(79936),_=e(27835);function L(G,$){return!(!G.layerType||"ArcGISFeatureLayer"!==G.layerType)&&G.featureCollectionType===$}var x=e(82772),U=e(39262);function O(G,$,Y){return D.apply(this,arguments)}function D(){return(D=(0,o.Z)(function*(G,$,Y){if(!$)return;const d=[];for(const w of $)d.push(F(w,Y));const R=yield Promise.allSettled(d);for(const w of R)"rejected"===w.status||w.value&&G.add(w.value)})).apply(this,arguments)}const l={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",GeoJSON:"GeoJSONLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer",LineOfSightLayer:"LineOfSightLayer"},C={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},f={ArcGISFeatureLayer:"FeatureLayer"},h={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",DefaultTileLayer:"TileLayer"},T={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},g={ArcGISFeatureLayer:"FeatureLayer"},c={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"},m={...T,LinkChartLayer:"LinkChartLayer"},M={...g},W={...c};function F(G,$){return A.apply(this,arguments)}function A(){return A=(0,o.Z)(function*(G,$){return function B(G,$,Y){return Z.apply(this,arguments)}(yield function b(G,$){return s.apply(this,arguments)}(G,$),G,$)}),A.apply(this,arguments)}function Z(){return Z=(0,o.Z)(function*(G,$,Y){const d=new G;return d.read($,Y.context),"group"===d.type&&("GroupLayer"===$.layerType?yield S(d,$,Y):y($)?function N(G,$,Y){$.itemId&&(G.portalItem=new _.default({id:$.itemId,portal:Y?.portal}),G.when(()=>{const d=R=>{const w=R.layerId;J(R,G,$,w,Y);const z=$.featureCollection?.layers?.[w];z&&R.read(z,Y)};G.layers?.forEach(d),G.tables?.forEach(d)}))}(d,$,Y.context):i($)&&(yield function H(G,$,Y){return k.apply(this,arguments)}(d,$,Y.context))),yield(0,U.y)(d,Y.context),d}),Z.apply(this,arguments)}function s(){return(s=(0,o.Z)(function*(G,$){const Y=$.context,d=function u(G){let $;switch(G.origin){case"web-scene":switch(G.layerContainerType){case"basemap":$=h;break;case"ground":$=C;break;case"tables":$=f;break;default:$=l}break;case"link-chart":switch(G.layerContainerType){case"basemap":$=W;break;case"tables":$=M;break;default:$=m}break;default:switch(G.layerContainerType){case"basemap":$=c;break;case"tables":$=g;break;default:$=T}}return $}(Y);let R=G.layerType||G.type;!R&&$?.defaultLayerType&&(R=$.defaultLayerType);const w=d[R];let z=w?p.T[w]:p.T.UnknownLayer;if(y(G)){const X=Y?.portal;if(G.itemId){const q=new _.default({id:G.itemId,portal:X});yield q.load();const se=(yield(0,x.selectLayerClassPath)(q,new P.L)).className||"UnknownLayer";z=p.T[se]}}else"ArcGISFeatureLayer"===R?function a(G){return L(G,"notes")}(G)||function j(G){return L(G,"markup")}(G)?z=p.T.MapNotesLayer:function I(G){return L(G,"route")}(G)?z=p.T.RouteLayer:i(G)&&(z=p.T.GroupLayer):G.wmtsInfo?.url&&G.wmtsInfo.layerIdentifier?z=p.T.WMTSLayer:"WFS"===R&&"2.0.0"!==G.wfsInfo?.version&&(z=p.T.UnsupportedLayer);return z()})).apply(this,arguments)}function i(G){return"ArcGISFeatureLayer"===G.layerType&&!y(G)&&(G.featureCollection?.layers?.length??0)>1}function y(G){return"Feature Collection"===G.type}function S(G,$,Y){return K.apply(this,arguments)}function K(){return(K=(0,o.Z)(function*(G,$,Y){const d=new E.Z,R=O(d,Array.isArray($.layers)?$.layers:[],Y);try{try{if(yield R,"group"===G.type)return G.layers.addMany(d),G}catch(w){G.destroy();for(const z of d)z.destroy();throw w}}catch(w){throw w}})).apply(this,arguments)}function k(){return(k=(0,o.Z)(function*(G,$,Y){const d=p.T.FeatureLayer,R=yield d(),w=$.featureCollection,z=w?.showLegend,X=w?.layers?.map((q,se)=>{const ee=new R;ee.read(q,Y);const te={...Y,ignoreDefaults:!0};return J(ee,G,$,se,te),null!=z&&ee.read({showLegend:z},te),ee});G.layers.addMany(X??[])})).apply(this,arguments)}function J(G,$,Y,d,R){G.read({id:`${$.id}-sublayer-${d}`,visibility:Y.visibleLayers?.includes(d)??!0},R)}},68595:(Q,V,e)=>{e.d(V,{OE:()=>x,Gc:()=>D,Qg:()=>U,Rq:()=>a,gX:()=>O,z2:()=>j,ET:()=>I,Vx:()=>C}),e(2189);var v=e(89350),P=e(85039);const p=new Map,_=new class E{constructor(h=15e3,T=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=h,this._interval=Math.min(h,T)}decreaseRefCount(h,T){const g=h+"/"+T,c=this._cachedBlocks;if(c.has(g)){const m=c.get(g);return m.refCount--,m.refCount<=0&&(c.delete(g),m.controller&&m.controller.abort()),m.refCount}return 0}getBlock(h,T){const g=h+"/"+T,c=this._cachedBlocks;if(c.has(g)){const m=c.get(g);return m.ts=Date.now(),m.refCount++,c.delete(g),c.set(g,m),m.block}return null}putBlock(h,T,g,c){const m=this._cachedBlocks,M=h+"/"+T;if(m.has(M)){const W=m.get(M);W.ts=Date.now(),W.refCount++}else m.set(M,{block:g,ts:Date.now(),refCount:1,controller:c});this._trim(),this._updateTimer()}deleteBlock(h,T){const g=this._cachedBlocks,c=h+"/"+T;g.has(c)&&g.delete(c)}updateMaxSize(h){this._size=h,this._trim()}empty(){this._cachedBlocks.clear(),this._clearTimer()}getCurrentSize(){return this._cachedBlocks.size}_updateTimer(){if(null!=this._timer)return;const h=this._cachedBlocks;this._timer=setInterval(()=>{const T=Array.from(h),g=Date.now();for(let c=0;c<T.length&&T[c][1].ts<=g-this._duration;c++)h.delete(T[c][0]);0===h.size&&this._clearTimer()},this._interval)}_trim(){const h=this._cachedBlocks;if(-1===this._size||this._size>=h.size)return;const T=Array.from(h);for(let g=0;g<T.length-this._size;g++)h.delete(T[g][0])}_clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function a(f,h){return null==h?f:`${f}?sliceId=${h}`}function j(f,h){const T={extent:null,rasterInfo:h,cache:new Map},g=p.get(f);return g?(g.push(T),g.length-1):(p.set(f,[T]),0)}function I(f,h){const T=p.get(f);T&&(T[h]=null,T.some(g=>null!=g)||p.delete(f))}function x(f,h,T){const g=p.get(f);if(!g)return null==h?_.decreaseRefCount(f,T):0;if(null==h||null==g[h])return _.decreaseRefCount(f,T);const c=g[h]?.cache,m=c?.get(T);if(c&&m){if(m.refCount--,0===m.refCount){c.delete(T);for(let M=0;M<g.length;M++)g[M]?.cache.delete(T);m.controller&&m.controller.abort()}return m.refCount}return 0}function U(f,h,T){const g=p.get(f);if(!g)return null==h?_.getBlock(f,T):null;if(null==h||null==g[h]){for(let m=0;m<g.length;m++){const M=g[m]?.cache.get(T);if(M)return M.refCount++,M.block}return _.getBlock(f,T)}const c=g[h]?.cache.get(T);if(c)return c.refCount++,c.block;for(let m=0;m<g.length;m++){if(m===h||!g[m])continue;const M=g[m]?.cache,W=M?.get(T);if(M&&W)return W.refCount++,M.set(T,W),W.block}return null}function O(f,h,T,g,c=null){const m=p.get(f);if(!m)return void(null==h&&_.putBlock(f,T,g,c));if(null==h||null==m[h])return void _.putBlock(f,T,g,c);const M={refCount:1,block:g,isResolved:!1,isRejected:!1,controller:c};g.then(()=>M.isResolved=!0).catch(()=>M.isRejected=!0),m[h]?.cache.set(T,M)}function D(f,h,T){const g=p.get(f);g?null!=h&&null!=g[h]?g[h]?.cache.delete(T):_.deleteBlock(f,T):null==h&&_.deleteBlock(f,T)}function C(f,h,T,g,c,m,M=null){const W=function l(f,h){const T=p.get(f);return T?T[h]??null:null}(f,h);if(!W)return;const F=W.extent,{cache:A,rasterInfo:B}=W;if(F&&F.xmin===T.xmin&&F.xmax===T.xmax&&F.ymin===T.ymin&&F.ymax===T.ymax)return;g=g??0;const Z=T.clone().normalize(),{spatialReference:b,transform:s}=B,i=new Set;for(let y=0;y<Z.length;y++){const u=Z[y];if(u.xmax-u.xmin<=g||u.ymax-u.ymin<=g)continue;let S=(0,v.tB)(u,b,M);null!=s&&(S=s.inverseTransform(S));const K=new P.Z({x:g,y:g,spatialReference:u.spatialReference});if(null==c&&!(c=(0,v.VO)(K,b,u,M)))return;const{pyramidLevel:N,pyramidResolution:H,excessiveReading:k}=(0,v.kr)(c,B,m||"closest");if(k)return;const{storageInfo:J}=B,{origin:G}=J,$={x:Math.max(0,Math.floor((S.xmin-G.x)/H.x)),y:Math.max(0,Math.floor((G.y-S.ymax)/H.y))},Y=Math.ceil((S.xmax-S.xmin)/H.x-.1),d=Math.ceil((S.ymax-S.ymin)/H.y-.1),R=N>0?J.pyramidBlockWidth:J.blockWidth,w=N>0?J.pyramidBlockHeight:J.blockHeight,z=1,X=Math.max(0,Math.floor($.x/R)-z),q=Math.max(0,Math.floor($.y/w)-z),se=Math.floor(($.x+Y-1)/R)+z,ee=Math.floor(($.y+d-1)/w)+z;for(let te=q;te<=ee;te++)for(let ne=X;ne<=se;ne++)i.add(`${N}/${te}/${ne}`)}A.forEach((y,u)=>{if(!i.has(u)){const S=A.get(u);(null==S||S.isResolved||S.isRejected)&&A.delete(u)}}),W.extent={xmin:T.xmin,ymin:T.ymin,xmax:T.xmax,ymax:T.ymax}}},453:(Q,V,e)=>{e.d(V,{M4:()=>_,Yv:()=>P,ht:()=>v,wk:()=>p});var o=e(6785),E=e(61018);function v(a){return{origin:"portal-item",url:(0,o.mN)(a.itemUrl),portal:a.portal||E.Z.getDefault(),portalItem:a,readResourcePaths:[]}}function P(a){const j=(0,o.mN)(a.itemUrl);return{origin:"portal-item",messages:[],writtenProperties:[],url:j,portal:a.portal||E.Z.getDefault(),portalItem:a,verifyItemRelativeUrls:j?{rootPath:j.path,writtenUrls:[]}:null,blockedRelativeUrls:[]}}function p(a){return{origin:"web-map",url:(0,o.mN)(a.itemUrl),portal:a.portal||E.Z.getDefault(),portalItem:a,readResourcePaths:[]}}function _(a,j){const I=(0,o.mN)(a.itemUrl);return{origin:"web-map",messages:[],writtenProperties:[],url:I,portal:a.portal||E.Z.getDefault(),portalItem:a,initiator:j,verifyItemRelativeUrls:I?{rootPath:I.path,writtenUrls:[]}:null,blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}}},79387:(Q,V,e)=>{e.d(V,{B:()=>E});var o=e(6785);function E(I){return p[function v(I){return"json"===I.type?"application/json":"blob"===I.type?I.blob.type:function P(I){const L=(0,o.Ml)(I);return j[L]||_}(I.url)}(I)]||a}const p={},_="text/plain",a=p[_],j={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const I in j)p[j[I]]=I},21705:(Q,V,e)=>{e.d(V,{Z:()=>C});var x,o=e(50484),E=e(34222),v=e(80543),P=e(1535),p=e(21070),_=e(10141),a=e(86627),j=e(37764),I=e(66599),L=e(89317);let U=x=class extends L.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new x({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:(0,E.d9)(this.color)})}};(0,o._)([(0,v.Cb)({type:String,json:{write:!0}})],U.prototype,"description",void 0),(0,o._)([(0,v.Cb)({type:String,json:{write:!0}})],U.prototype,"label",void 0),(0,o._)([(0,v.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],U.prototype,"minValue",void 0),(0,o._)([(0,v.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],U.prototype,"maxValue",void 0),(0,o._)([(0,v.Cb)({type:I.Z,json:{type:[P.z8],write:!0}})],U.prototype,"color",void 0),U=x=(0,o._)([(0,_.j)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],U);const O=U;var D;let l=D=class extends a.Z{constructor(f){super(f),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new D({...this.cloneProperties(),field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:(0,E.d9)(this.colorClassBreakInfos),legendOptions:(0,E.d9)(this.legendOptions)})}};(0,o._)([(0,p.J)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],l.prototype,"type",void 0),(0,o._)([(0,v.Cb)({json:{write:!0},type:String})],l.prototype,"field",void 0),(0,o._)([(0,v.Cb)({type:j.I,json:{write:!0}})],l.prototype,"legendOptions",void 0),(0,o._)([(0,v.Cb)({type:a.Z.fieldTransformTypeKebabDict.apiValues,json:{type:a.Z.fieldTransformTypeKebabDict.jsonValues,read:a.Z.fieldTransformTypeKebabDict.read,write:a.Z.fieldTransformTypeKebabDict.write}})],l.prototype,"fieldTransformType",void 0),(0,o._)([(0,v.Cb)({type:[O],json:{write:!0}})],l.prototype,"colorClassBreakInfos",void 0),l=D=(0,o._)([(0,_.j)("esri.renderers.PointCloudClassBreaksRenderer")],l);const C=l},86627:(Q,V,e)=>{e.d(V,{Z:()=>A});var L,o=e(50484),E=e(84303),v=e(89317),P=e(34222),p=e(80543),a=(e(1535),e(10141));e(57678),e(14007);let x=L=class extends v.wq{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new L({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};(0,o._)([(0,p.Cb)({type:String,json:{write:!0}})],x.prototype,"field",void 0),(0,o._)([(0,p.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],x.prototype,"minValue",void 0),(0,o._)([(0,p.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],x.prototype,"maxValue",void 0),x=L=(0,o._)([(0,a.j)("esri.renderers.support.pointCloud.ColorModulation")],x);const U=x,O=new E.X({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let D=class extends v.wq{};(0,o._)([(0,p.Cb)({type:O.apiValues,readOnly:!0,nonNullable:!0,json:{type:O.jsonValues,read:!1,write:O.write}})],D.prototype,"type",void 0),D=(0,o._)([(0,a.j)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],D);const l=D;var f,C=e(21070);let h=f=class extends l{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new f({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};(0,o._)([(0,C.J)({pointCloudFixedSizeAlgorithm:"fixed-size"})],h.prototype,"type",void 0),(0,o._)([(0,p.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],h.prototype,"size",void 0),(0,o._)([(0,p.Cb)({type:Boolean,json:{write:!0}})],h.prototype,"useRealWorldSymbolSizes",void 0),h=f=(0,o._)([(0,a.j)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],h);const T=h;var g;let c=g=class extends l{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new g({scaleFactor:this.scaleFactor})}};(0,o._)([(0,C.J)({pointCloudSplatAlgorithm:"splat"})],c.prototype,"type",void 0),(0,o._)([(0,p.Cb)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],c.prototype,"scaleFactor",void 0),c=g=(0,o._)([(0,a.j)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],c);const M={key:"type",base:l,typeMap:{"fixed-size":T,splat:c}},W=(0,E.w)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let F=class extends v.wq{constructor(B){super(B),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:(0,P.d9)(this.pointSizeAlgorithm),colorModulation:(0,P.d9)(this.colorModulation),pointsPerInch:(0,P.d9)(this.pointsPerInch)}}};(0,o._)([(0,p.Cb)({type:W.apiValues,readOnly:!0,nonNullable:!0,json:{type:W.jsonValues,read:!1,write:W.write}})],F.prototype,"type",void 0),(0,o._)([(0,p.Cb)({types:M,json:{write:!0}})],F.prototype,"pointSizeAlgorithm",void 0),(0,o._)([(0,p.Cb)({type:U,json:{write:!0}})],F.prototype,"colorModulation",void 0),(0,o._)([(0,p.Cb)({json:{write:!0},nonNullable:!0,type:Number})],F.prototype,"pointsPerInch",void 0),F=(0,o._)([(0,a.j)("esri.renderers.PointCloudRenderer")],F),(F||(F={})).fieldTransformTypeKebabDict=new E.X({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});const A=F},71212:(Q,V,e)=>{e.d(V,{Z:()=>U});var L,o=e(50484),E=e(34222),v=e(80543),p=(e(1535),e(21070)),_=e(10141),a=e(86627),j=e(37764),I=e(11892);let x=L=class extends a.Z{constructor(O){super(O),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new L({...this.cloneProperties(),field:(0,E.d9)(this.field),fieldTransformType:(0,E.d9)(this.fieldTransformType),stops:(0,E.d9)(this.stops),legendOptions:(0,E.d9)(this.legendOptions)})}};(0,o._)([(0,p.J)({pointCloudStretchRenderer:"point-cloud-stretch"})],x.prototype,"type",void 0),(0,o._)([(0,v.Cb)({json:{write:!0},type:String})],x.prototype,"field",void 0),(0,o._)([(0,v.Cb)({type:j.I,json:{write:!0}})],x.prototype,"legendOptions",void 0),(0,o._)([(0,v.Cb)({type:a.Z.fieldTransformTypeKebabDict.apiValues,json:{type:a.Z.fieldTransformTypeKebabDict.jsonValues,read:a.Z.fieldTransformTypeKebabDict.read,write:a.Z.fieldTransformTypeKebabDict.write}})],x.prototype,"fieldTransformType",void 0),(0,o._)([(0,v.Cb)({type:[I.Z],json:{write:!0}})],x.prototype,"stops",void 0),x=L=(0,o._)([(0,_.j)("esri.renderers.PointCloudStretchRenderer")],x);const U=x},70615:(Q,V,e)=>{e.d(V,{Z:()=>C});var x,o=e(50484),E=e(34222),v=e(80543),P=e(1535),p=e(21070),_=e(10141),a=e(86627),j=e(37764),I=e(66599),L=e(89317);let U=x=class extends L.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new x({description:this.description,label:this.label,values:(0,E.d9)(this.values),color:(0,E.d9)(this.color)})}};(0,o._)([(0,v.Cb)({type:String,json:{write:!0}})],U.prototype,"description",void 0),(0,o._)([(0,v.Cb)({type:String,json:{write:!0}})],U.prototype,"label",void 0),(0,o._)([(0,v.Cb)({type:[String],json:{write:!0}})],U.prototype,"values",void 0),(0,o._)([(0,v.Cb)({type:I.Z,json:{type:[P.z8],write:!0}})],U.prototype,"color",void 0),U=x=(0,o._)([(0,_.j)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],U);const O=U;var D;let l=D=class extends a.Z{constructor(f){super(f),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new D({...this.cloneProperties(),field:(0,E.d9)(this.field),fieldTransformType:(0,E.d9)(this.fieldTransformType),colorUniqueValueInfos:(0,E.d9)(this.colorUniqueValueInfos),legendOptions:(0,E.d9)(this.legendOptions)})}};(0,o._)([(0,p.J)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],l.prototype,"type",void 0),(0,o._)([(0,v.Cb)({json:{write:!0},type:String})],l.prototype,"field",void 0),(0,o._)([(0,v.Cb)({type:a.Z.fieldTransformTypeKebabDict.apiValues,json:{type:a.Z.fieldTransformTypeKebabDict.jsonValues,read:a.Z.fieldTransformTypeKebabDict.read,write:a.Z.fieldTransformTypeKebabDict.write}})],l.prototype,"fieldTransformType",void 0),(0,o._)([(0,v.Cb)({type:[O],json:{write:!0}})],l.prototype,"colorUniqueValueInfos",void 0),(0,o._)([(0,v.Cb)({type:j.I,json:{write:!0}})],l.prototype,"legendOptions",void 0),l=D=(0,o._)([(0,_.j)("esri.renderers.PointCloudUniqueValueRenderer")],l);const C=l},3587:(Q,V,e)=>{e.d(V,{Z:()=>D});var o=e(50484),v=(e(2189),e(89317)),P=e(80543),j=(e(1535),e(57678),e(14007),e(62185)),I=e(10141),L=e(7547),x=e(27321),U=e(64222);let O=class extends v.wq{constructor(l){super(l),this.globalId=null,this.associationType=null,this.fromNetworkElement=null,this.toNetworkElement=null,this.geometry=null,this.errorMessage=null,this.percentAlong=null,this.errorCode=null,this.isContentVisible=null,this.status=null}readFromNetworkElement(l,C){const f=new x.Z;return f.globalId=C.fromGlobalId,f.networkSourceId=C.fromNetworkSourceId,f.terminalId=C.fromTerminalId,f}writeFromNetworkElement(l,C){l&&(C.fromGlobalId=l.globalId,C.fromNetworkSourceId=l.networkSourceId,C.fromTerminalId=l.terminalId)}readToNetworkElement(l,C){const f=new x.Z;return f.globalId=C.toGlobalId,f.networkSourceId=C.toNetworkSourceId,f.terminalId=C.toTerminalId,f}writeToNetworkElement(l,C){l&&(C.toGlobalId=l.globalId,C.toNetworkSourceId=l.networkSourceId,C.toTerminalId=l.terminalId)}};(0,o._)([(0,P.Cb)({type:String,json:{write:!0}})],O.prototype,"globalId",void 0),(0,o._)([(0,P.Cb)({type:["attachment","connectivity","containment"],json:{write:!0}})],O.prototype,"associationType",void 0),(0,o._)([(0,P.Cb)({type:x.Z,json:{write:{target:{fromGlobalId:{type:String},fromNetworkSourceId:{type:Number},fromTerminalId:{type:Number}}},read:{source:["fromGlobalId","fromNetworkSourceId","fromTerminalId"]}}})],O.prototype,"fromNetworkElement",void 0),(0,o._)([(0,j.r)("fromNetworkElement")],O.prototype,"readFromNetworkElement",null),(0,o._)([(0,L.c)("fromNetworkElement")],O.prototype,"writeFromNetworkElement",null),(0,o._)([(0,P.Cb)({type:x.Z,json:{write:{target:{toGlobalId:{type:String},toNetworkSourceId:{type:Number},toTerminalId:{type:Number}}},read:{source:["toGlobalId","toNetworkSourceId","toTerminalId"]}}})],O.prototype,"toNetworkElement",void 0),(0,o._)([(0,j.r)("toNetworkElement")],O.prototype,"readToNetworkElement",null),(0,o._)([(0,L.c)("toNetworkElement")],O.prototype,"writeToNetworkElement",null),(0,o._)([(0,P.Cb)({type:U.Z,json:{write:!0}})],O.prototype,"geometry",void 0),(0,o._)([(0,P.Cb)({type:String,json:{write:!0}})],O.prototype,"errorMessage",void 0),(0,o._)([(0,P.Cb)({type:Number,json:{write:!0}})],O.prototype,"percentAlong",void 0),(0,o._)([(0,P.Cb)({type:Number,json:{write:!0}})],O.prototype,"errorCode",void 0),(0,o._)([(0,P.Cb)({type:Boolean,json:{write:!0}})],O.prototype,"isContentVisible",void 0),(0,o._)([(0,P.Cb)({type:Number,json:{write:!0}})],O.prototype,"status",void 0),O=(0,o._)([(0,I.j)("esri.rest.networks.support.Association")],O);const D=O},18719:(Q,V,e)=>{e.d(V,{IJ:()=>x,m5:()=>l,vB:()=>f,w7:()=>O});var o=e(15861),E=e(66476),v=e(6785),P=e(40637),p=e(93566),_=e(33721),a=e(90356),j=e(8295);const I="Layer does not support extent calculation.";function L(T,g){const c=T.geometry,m=T.toJSON(),M=m;if(null!=c&&(M.geometry=JSON.stringify(c),M.geometryType=(0,P.Ji)(c),M.inSR=(0,_.B9)(c.spatialReference)),m.topFilter?.groupByFields&&(M.topFilter.groupByFields=m.topFilter.groupByFields.join(",")),m.topFilter?.orderByFields&&(M.topFilter.orderByFields=m.topFilter.orderByFields.join(",")),m.topFilter&&(M.topFilter=JSON.stringify(M.topFilter)),m.objectIds&&(M.objectIds=m.objectIds.join(",")),m.orderByFields&&(M.orderByFields=m.orderByFields.join(",")),m.outFields&&!(g?.returnCountOnly||g?.returnExtentOnly||g?.returnIdsOnly)?M.outFields=m.outFields.includes("*")?"*":m.outFields.join(","):delete M.outFields,m.outSR?M.outSR=(0,_.B9)(m.outSR):c&&m.returnGeometry&&(M.outSR=M.inSR),m.returnGeometry&&delete m.returnGeometry,m.timeExtent){const W=m.timeExtent,{start:F,end:A}=W;null==F&&null==A||(M.time=F===A?F:`${F??"null"},${A??"null"}`),delete m.timeExtent}return M}function x(T,g,c,m){return U.apply(this,arguments)}function U(){return(U=(0,o.Z)(function*(T,g,c,m){const M=yield h(T,g,"json",m);return(0,j.p)(g,c,M.data),M})).apply(this,arguments)}function O(T,g,c){return D.apply(this,arguments)}function D(){return(D=(0,o.Z)(function*(T,g,c){return null!=g.timeExtent&&g.timeExtent.isEmpty?{data:{objectIds:[]}}:h(T,g,"json",c,{returnIdsOnly:!0})})).apply(this,arguments)}function l(T,g,c){return C.apply(this,arguments)}function C(){return(C=(0,o.Z)(function*(T,g,c){return null!=g.timeExtent&&g.timeExtent.isEmpty?{data:{count:0,extent:null}}:h(T,g,"json",c,{returnExtentOnly:!0,returnCountOnly:!0}).then(m=>{const M=m.data;if(M.hasOwnProperty("extent"))return m;if(M.features)throw new Error(I);if(M.hasOwnProperty("count"))throw new Error(I);return m})})).apply(this,arguments)}function f(T,g,c){return null!=g.timeExtent&&g.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):h(T,g,"json",c,{returnIdsOnly:!0,returnCountOnly:!0})}function h(T,g,c,m={},M={}){const W="string"==typeof T?(0,v.mN)(T):T,F=g.geometry?[g.geometry]:[];return m.responseType="pbf"===c?"array-buffer":"json",(0,p.aX)(F,null,m).then(A=>{const B=A?.[0];null!=B&&((g=g.clone()).geometry=B);const Z=(0,a.A)({...W.query,f:c,...M,...L(g,M)});return(0,E.Z)((0,v.v_)(W.path,"queryTopFeatures"),{...m,query:{...Z,...m.query}})})}},83068:(Q,V,e)=>{e.d(V,{t:()=>v});var o=e(15861),E=e(66476);function v(p,_){return P.apply(this,arguments)}function P(){return(P=(0,o.Z)(function*(p,_){const{data:a}=yield(0,E.Z)(p,{responseType:"image",..._});return a})).apply(this,arguments)}},51571:(Q,V,e)=>{e.d(V,{Z:()=>P});var o=e(15861),E=e(56123),v=e(26517);class P{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(_){return this._resourceMap.get(_)??null}fetchResource(_,a){var j=this;return(0,o.Z)(function*(){const I=j._resourceMap.get(_);if(I)return{width:I.width,height:I.height};let L=j._inFlightResourceMap.get(_);return L?L.then(x=>({width:x.width,height:x.height})):(L=(0,v.n$)(_,a),j._inFlightResourceMap.set(_,L),L.then(x=>(j._inFlightResourceMap.delete(_),j._resourceMap.set(_,x),{width:x.width,height:x.height}),()=>({width:0,height:0})))})()}deleteResource(_){this._inFlightResourceMap.delete(_),this._resourceMap.delete(_)}loadFont(_){return(0,E.mx)(_)}}},81065:(Q,V,e)=>{e.d(V,{c:()=>P});var o=e(88098),E=e(43101),v=e(92311);class P extends v.Z{constructor(){super(...arguments),this._hasCrossfade=!1}get requiresDedicatedFBO(){return super.requiresDedicatedFBO||this._hasCrossfade}beforeRender(_){super.beforeRender(_),this._manageFade()}prepareRenderPasses(_){const a=_.registerRenderPass({name:"bitmap",brushes:[o.U.bitmap],target:()=>this.children,drawPhase:E.jx.MAP});return[...super.prepareRenderPasses(_),a]}_manageFade(){this.children.reduce((_,a)=>_+(a.inFadeTransition?1:0),0)>=2?(this.children.forEach(_=>_.blendFunction="additive"),this._hasCrossfade=!0):(this.children.forEach(_=>_.blendFunction="standard"),this._hasCrossfade=!1)}}},93114:(Q,V,e)=>{e.d(V,{Y:()=>I});var o=e(50484),a=(e(4703),e(1535),e(57678),e(14007),e(57964),e(10141)),j=e(35244);const I=L=>{let x=class extends L{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new j.s(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView?.removeAllChildren(),this._bitmapView=null}};return x=(0,o._)([(0,a.j)("esri.views.2d.layers.BitmapTileLayerView2D")],x),x}},12915:(Q,V,e)=>{e.d(V,{k:()=>U,p:()=>O});var o=e(90295),E=e(88278),P=(e(14007),e(62168)),p=e(27048),_=e(10405),a=e(69378);const j=(0,p.Ue)();function I(D,l){return D<<16|l}function L(D){return(4294901760&D)>>>16}function x(D){return 65535&D}const U={getObjectId:D=>D.getObjectId(),getAttributes:D=>D.readAttributes(),getAttribute:(D,l)=>D.readAttribute(l),getAttributeAsTimestamp:(D,l)=>D.readAttributeAsTimestamp(l),cloneWithGeometry:(D,l)=>D,getGeometry:D=>D.readHydratedGeometry(),getCentroid:(D,l)=>D.readCentroid()};class O extends _.J{constructor(l,C,f){super(l,C),this.featureAdapter=U,this.events=new E.Z,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._indexSearchCache=new o.Z(50),this._index=(0,P.r)(9,h=>({minX:this._storage.getXMin(h),minY:this._storage.getYMin(h),maxX:this._storage.getXMax(h),maxY:this._storage.getYMax(h)})),this.mode=f}get storeStatistics(){let l=0,C=0,f=0;return this.forEach(h=>{const T=h.readGeometry();T&&(C+=T.isPoint?1:T.lengths.reduce((g,c)=>g+c,0),f+=T.isPoint?1:T.lengths.length,l+=1)}),{featureCount:l,vertexCount:C,ringCount:f}}hasInstance(l){return this._featureSetsByInstance.has(l)}onTileData(l,C,f){if(null==C.addOrUpdate)return C;if(C.addOrUpdate.attachStorage(this._storage),"snapshot"===this.mode){const T=C.addOrUpdate.getCursor();for(;T.next();){const g=T.getDisplayId();this.setComputedAttributes(this._storage,T,g,l.scale,f)}return C}this._featureSetsByInstance.set(C.addOrUpdate.instance,C.addOrUpdate);const h=C.addOrUpdate.getCursor();for(;h.next();)this._insertFeature(h,l.scale,f);return this._spatialIndexInvalid=!0,this.events.emit("changed"),C}search(l){this._rebuildIndex();const C=l.id,f=this._indexSearchCache.find(c=>c.tileId===C);if(null!=f)return f.readers;const h=new Map,T=this._searchIndex(l.bounds),g=[];for(const c of T){const m=this._storage.getInstanceId(c),M=L(m),W=x(m);h.has(M)||h.set(M,[]),h.get(M).push(W)}return h.forEach((c,m)=>{const M=this._featureSetsByInstance.get(m);g.push(a.t.from(M,c))}),this._indexSearchCache.enqueue({tileId:C,readers:g}),g}insert(l){const C=l.getCursor(),f=this._storage;for(;C.next();){const h=I(C.instance,C.getIndex()),T=C.getObjectId(),g=this._objectIdToDisplayId.get(T)??this._storage.createDisplayId();C.setDisplayId(g),f.setInstanceId(g,h),this._objectIdToDisplayId.set(T,g)}this._featureSetsByInstance.set(l.instance,l),this._spatialIndexInvalid=!0}remove(l){const C=this._objectIdToDisplayId.get(l);if(!C)return;const f=this._storage.getInstanceId(C),h=x(f),T=L(f),g=this._featureSetsByInstance.get(T);this._objectIdToDisplayId.delete(l),this._storage.releaseDisplayId(C),g.removeAtIndex(h),g.isEmpty&&this._featureSetsByInstance.delete(T),this._spatialIndexInvalid=!0}forEach(l){this._objectIdToDisplayId.forEach(C=>{const f=this._storage.getInstanceId(C),h=this._lookupFeature(f);l(h)})}forEachUnsafe(l){this._objectIdToDisplayId.forEach(C=>{const f=this._storage.getInstanceId(C),h=L(f),T=x(f),g=this._getFeatureSet(h);g.setIndex(T),l(g)})}forEachInBounds(l,C){const f=this._searchIndex(l);for(const h of f)C(this.lookupFeatureByDisplayId(h,this._storage))}forEachBounds(l,C){this._rebuildIndex();for(const f of l){if(!f.readGeometry())continue;const h=f.getDisplayId();(0,p.bZ)(j,this._storage.getXMin(h),this._storage.getYMin(h),this._storage.getXMax(h),this._storage.getYMax(h)),C(j)}}sweepFeatures(l,C,f){this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach((h,T)=>{l.has(h)||(C.releaseDisplayId(h),f&&f.unsetAttributeData(h),this._objectIdToDisplayId.delete(T))}),this.events.emit("changed")}sweepFeatureSets(l){this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach((C,f)=>{l.has(f)||this._featureSetsByInstance.delete(f)})}lookupObjectId(l,C){const f=this.lookupFeatureByDisplayId(l,C);return null==f?null:f.getObjectId()}lookupDisplayId(l){return this._objectIdToDisplayId.get(l)}lookupFeatureByDisplayId(l,C){const f=C.getInstanceId(l);return this._lookupFeature(f)}lookupByDisplayIdUnsafe(l){const C=this._storage.getInstanceId(l),f=L(C),h=x(C),T=this._getFeatureSet(f);return T?(T.setIndex(h),T):null}_insertFeature(l,C,f){const h=this._storage,T=l.getObjectId(),g=I(l.instance,l.getIndex());h.getInstanceId(l.getDisplayId());let c=this._objectIdToDisplayId.get(T);c||(c=h.createDisplayId(),this._objectIdToDisplayId.set(T,c),this._spatialIndexInvalid=!0),l.setDisplayId(c),h.setInstanceId(c,g),this.setComputedAttributes(h,l,c,C,f)}_searchIndex(l){return this._rebuildIndex(),this._index.search({minX:l[0],minY:l[1],maxX:l[2],maxY:l[3]})}_rebuildIndex(){if(!this._spatialIndexInvalid)return;const l=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach(C=>{const f=C.getCursor();for(;f.next();){const h=f.getDisplayId();this._storage.setBounds(h,f)&&l.push(h)}}):this._objectIdToDisplayId.forEach(C=>{const f=this._storage.getInstanceId(C);this._storage.setBounds(C,this._lookupFeature(f))&&l.push(C)}),this._index.clear(),this._index.load(l),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}_lookupFeature(l){const C=L(l),f=this._getFeatureSet(C);if(!f)return;const h=f.getCursor(),T=x(l);return h.setIndex(T),h}_getFeatureSet(l){return this._featureSetsByInstance.get(l)}}},10405:(Q,V,e)=>{e.d(V,{J:()=>a});var o=e(15861),E=e(14007),v=e(657),P=e(4978),p=e(4703);class a{constructor(I,L){this._canCacheExpressionValue=!1,this._sourceInfo=I,this._storage=L,this._bitsets={computed:L.getBitset(L.createBitset())}}get storage(){return this._storage}invalidate(){this._bitsets.computed.clear()}updateSchema(I,L){var x=this;return(0,o.Z)(function*(){const U=(0,v.Hg)(x._schema,L);if(x._schema=L,!L||null==U||!(0,v.uD)(U,"attributes"))return;(0,E.Z)("esri-2d-update-debug")&&console.debug("Applying Update - Store:",U),x._bitsets.computed.clear(),I.targets[L.name]=!0;const O=L.attributes,D=[],l=[];for(const C in O){const f=O[C];switch(f.type){case"field":break;case"expression":D.push(x._createArcadeComputedField(f));break;case"label-expression":D.push(x._createLabelArcadeComputedField(f));break;case"statistic":l.push(f)}}x._computedFields=yield Promise.all(D),x._canCacheExpressionValue=!x._computedFields.some(C=>"expression"===C.type&&null!=C.expression&&C.expression.referencesScale()),x._statisticFields=l})()}setComputedAttributes(I,L,x,U,O){const D=this._bitsets.computed;if(!this._canCacheExpressionValue||!D.has(x)){D.set(x);for(const l of this._computedFields){const C=this._evaluateField(L,l,U,O);switch(l.resultType){case"numeric":I.setComputedNumericAtIndex(x,l.fieldIndex,C);break;case"string":I.setComputedStringAtIndex(x,l.fieldIndex,C)}}}}_createArcadeComputedField(I){var L=this;return(0,o.Z)(function*(){const x=L._sourceInfo.spatialReference,U=L._sourceInfo.fieldsIndex;return{...I,expression:yield(0,P.Yi)(I.valueExpression,x,U)}})()}_createLabelArcadeComputedField(I){var L=this;return(0,o.Z)(function*(){const x=L._sourceInfo.spatialReference,U=L._sourceInfo.fieldsIndex,{createLabelFunction:O}=yield e.e(5570).then(e.bind(e,15570)),D=yield O(I.label,U,x);return{...I,builder:D}})()}_evaluateField(I,L,x,U){switch(L.type){case"label-expression":{const O=I.readArcadeFeature();return L.builder.evaluate(O,U)||""}case"expression":{const{expression:O}=L;return function _(j,I,L){if(null==j)return null;const x=I.readArcadeFeature();I.contextTimeZone=L.$view?.timeZone;try{return j.evaluate({...L,$feature:x},j.services)}catch(U){return p.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",U),null}}(O,I,{$view:{scale:x,timeZone:U}})}}}}},5863:(Q,V,e)=>{e.d(V,{Z:()=>I});var o=e(50484),E=e(73514),v=e(80543),a=(e(1535),e(57678),e(14007),e(10141));let j=class extends E.Z{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const L=this.tileStore.tileScheme.spatialReference;return L&&L.toJSON()||null}};(0,o._)([(0,v.Cb)({readOnly:!0})],j.prototype,"supportsTileUpdates",null),(0,o._)([(0,v.Cb)({constructOnly:!0})],j.prototype,"remoteClient",void 0),(0,o._)([(0,v.Cb)({constructOnly:!0})],j.prototype,"service",void 0),(0,o._)([(0,v.Cb)()],j.prototype,"spatialReference",null),(0,o._)([(0,v.Cb)({constructOnly:!0})],j.prototype,"tileInfo",void 0),(0,o._)([(0,v.Cb)({constructOnly:!0})],j.prototype,"tileStore",void 0),j=(0,o._)([(0,a.j)("esri.views.2d.layers.features.processors.BaseProcessor")],j);const I=j},69378:(Q,V,e)=>{e.d(V,{t:()=>E});var o=e(14050);class E extends o.s{static from(P,p){return new E(P.copy(),p)}constructor(P,p){super(o.s.createInstance(),P.fullSchema()),this._currentIndex=-1,this._reader=P,this._indices=p}get fields(){return this._reader.fields}get hasNext(){return this._currentIndex+1<this._indices.length}getSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const P=new E(this._reader.copy(),this._indices);return P._currentIndex=this._currentIndex,P}next(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}setArcadeSpatialReference(P){this._reader.setArcadeSpatialReference(P)}attachStorage(P){this._reader.attachStorage(P)}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}get contextTimeZone(){return this._reader.contextTimeZone}set contextTimeZone(P){this._reader.contextTimeZone=P}getStorage(){return this._reader.getStorage()}getComputedNumeric(P){return this._reader.getComputedNumericAtIndex(0)}setComputedNumeric(P,p){return this._reader.setComputedNumericAtIndex(p,0)}getComputedString(P){return this._reader.getComputedStringAtIndex(0)}setComputedString(P,p){return this._reader.setComputedStringAtIndex(0,p)}getComputedNumericAtIndex(P){return this._reader.getComputedNumericAtIndex(P)}setComputedNumericAtIndex(P,p){this._reader.setComputedNumericAtIndex(P,p)}getComputedStringAtIndex(P){return this._reader.getComputedStringAtIndex(P)}setComputedStringAtIndex(P,p){return this._reader.setComputedStringAtIndex(P,p)}transform(P,p,_,a){const j=this.copy();return j._reader=this._reader.transform(P,p,_,a),j}readAttribute(P,p=!1){return this._reader.readAttribute(P,p)}readAttributes(){return this._reader.readAttributes()}joinAttributes(P){return this._reader.joinAttributes(P)}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(P){return this.readAttribute(P,!0)}hasField(P){return this._reader.hasField(P)}setField(P,p){return this._reader.setField(P,p)}keys(){return this._reader.keys()}castToText(P=!1){return this._reader.castToText(P)}getQuantizationTransform(){return this._reader.getQuantizationTransform()}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(P){return this._reader.setDisplayId(P)}getGroupId(){return this._reader.getGroupId()}setGroupId(P){return this._reader.setGroupId(P)}getXHydrated(){return this._reader.getXHydrated()}getYHydrated(){return this._reader.getYHydrated()}getX(){return this._reader.getX()}getY(){return this._reader.getY()}setIndex(P){return this._reader.setIndex(P)}getIndex(){return this._reader.getIndex()}readLegacyFeature(){return this._reader.readLegacyFeature()}readOptimizedFeature(){return this._reader.readOptimizedFeature()}readLegacyPointGeometry(){return this._reader.readLegacyPointGeometry()}readLegacyGeometry(){return this._reader.readLegacyGeometry()}readLegacyCentroid(){return this._reader.readLegacyCentroid()}readGeometryArea(){return this._reader.readGeometryArea()}readUnquantizedGeometry(){return this._reader.readUnquantizedGeometry()}readHydratedGeometry(){return this._reader.readHydratedGeometry()}readGeometry(){return this._reader.readGeometry()}readCentroid(){return this._reader.readCentroid()}_readAttribute(P,p){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}_readAttributes(){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}}},87653:(Q,V,e)=>{e.d(V,{Z:()=>F});var o=e(15861),E=e(50484),v=e(73514),p=(e(14007),e(79412)),_=e(80543),I=(e(1535),e(57678),e(10141)),L=e(45425),x=e(33721),U=e(30220);const O=Math.PI/180;var f=e(6118),h=e(6777),T=e(54529);const g=(0,L.Ue)(),c=[0,0],m=new T.Z(0,0,0,0);let W=class extends v.Z{constructor(A){var B;super(A),B=this,this._imagePromise=null,this.bitmaps=[],this.hidpi=false,this.imageMaxWidth=2048,this.imageMaxHeight=2048,this.imageRotationSupported=false,this.imageNormalizationSupported=false,this.update=(0,p.Ds)(function(){var Z=(0,o.Z)(function*(b,s){if((0,p.k_)(s),!b.stationary||B.destroyed)return;const i=b.state,y=(0,x.C5)(i.spatialReference),u=B.hidpi?b.pixelRatio:1,S=B.imageNormalizationSupported&&i.worldScreenWidth&&i.worldScreenWidth<i.size[0],K=B.imageMaxWidth??0,N=B.imageMaxHeight??0;S?(c[0]=i.worldScreenWidth,c[1]=i.size[1]):B.imageRotationSupported?(c[0]=i.size[0],c[1]=i.size[1]):function l(A,B){const Z=function D(A){return A*O}(B.rotation),b=Math.abs(Math.cos(Z)),s=Math.abs(Math.sin(Z)),[i,y]=B.size;return A[0]=Math.round(y*s+i*b),A[1]=Math.round(y*b+i*s),A}(c,i);const H=Math.floor(c[0]*u)>K||Math.floor(c[1]*u)>N,J=!B.imageNormalizationSupported&&y&&(i.extent.xmin<y.valid[0]||i.extent.xmax>y.valid[1]),G=!H&&!J,$=B.imageRotationSupported?i.rotation:0,Y=B.container.children.slice();if(G){const d=S?i.paddedViewState.center:i.center;B._imagePromise&&console.error("Image promise was not defined!"),B._imagePromise=B._singleExport(i,c,d,i.resolution,$,u,s)}else{let d=Math.min(K,N);J&&(d=Math.min(i.worldScreenWidth,d)),B._imagePromise=B._tiledExport(i,d,u,s)}try{const d=(yield B._imagePromise)??[];(0,p.k_)(s);const R=[];if(B._imagePromise=null,B.destroyed)return;B.bitmaps=d;for(const w of Y)d.includes(w)||R.push(w.fadeOut().then(()=>{w.remove(),w.destroy()}));for(const w of d)R.push(w.fadeIn());yield Promise.all(R)}catch(d){B._imagePromise=null,(0,p.r9)(d)}});return function(b,s){return Z.apply(this,arguments)}}(),5e3),this.updateExports=(0,p.Ds)(function(){var Z=(0,o.Z)(function*(b){const s=[];for(const i of B.container.children){if(!i.visible||!i.stage)return;s.push(b(i).then(()=>{i.invalidateTexture(),i.requestRender()}))}B._imagePromise=(0,p.as)(s).then(()=>B._imagePromise=null),yield B._imagePromise});return function(b){return Z.apply(this,arguments)}}())}destroy(){this.bitmaps.forEach(A=>A.destroy()),this.bitmaps=[]}get updating(){return!this.destroyed&&null!==this._imagePromise}_export(A,B,Z,b,s,i){var y=this;return(0,o.Z)(function*(){const u=yield y.fetchSource(A,Math.floor(B*s),Math.floor(Z*s),{rotation:b,pixelRatio:s,signal:i});(0,p.k_)(i);const S=new f.eY(null,!0);return S.x=A.xmin,S.y=A.ymax,S.resolution=A.width/B,S.rotation=b,S.pixelRatio=s,S.opacity=0,y.container.addChild(S),yield S.setSourceAsync(u,i),(0,p.k_)(i),S})()}_singleExport(A,B,Z,b,s,i,y){var u=this;return(0,o.Z)(function*(){!function C(A,B,Z,b){const[s,i]=B,[y,u]=b,S=.5*Z;A[0]=s-S*y,A[1]=i-S*u,A[2]=s+S*y,A[3]=i+S*u}(g,Z,b,B);const S=(0,L.HH)(g,A.spatialReference);return[yield u._export(S,B[0],B[1],s,i,y)]})()}_tiledExport(A,B,Z,b){const s=U.Z.create({size:B,spatialReference:A.spatialReference,scales:[A.scale]}),i=new h.Z(s),y=i.getTileCoverage(A);if(!y)return null;const u=[];return y.forEach((S,K,N,H)=>{m.set(S,K,N,0),i.getTileBounds(g,m);const k=(0,L.HH)(g,A.spatialReference);u.push(this._export(k,B,B,0,Z,b).then(J=>(0!==H&&(m.set(S,K,N,H),i.getTileBounds(g,m),J.x=g[0],J.y=g[3]),J)))}),Promise.all(u)}};(0,E._)([(0,_.Cb)()],W.prototype,"_imagePromise",void 0),(0,E._)([(0,_.Cb)()],W.prototype,"bitmaps",void 0),(0,E._)([(0,_.Cb)()],W.prototype,"container",void 0),(0,E._)([(0,_.Cb)()],W.prototype,"fetchSource",void 0),(0,E._)([(0,_.Cb)()],W.prototype,"hidpi",void 0),(0,E._)([(0,_.Cb)()],W.prototype,"imageMaxWidth",void 0),(0,E._)([(0,_.Cb)()],W.prototype,"imageMaxHeight",void 0),(0,E._)([(0,_.Cb)()],W.prototype,"imageRotationSupported",void 0),(0,E._)([(0,_.Cb)()],W.prototype,"imageNormalizationSupported",void 0),(0,E._)([(0,_.Cb)()],W.prototype,"requestUpdate",void 0),(0,E._)([(0,_.Cb)()],W.prototype,"updating",null),W=(0,E._)([(0,I.j)("esri.views.2d.layers.support.ExportStrategy")],W);const F=W},73430:(Q,V,e)=>{function v(p,_,a,j){if(a.level===j.level)return _;const I=p.tileInfo.size,L=p.getTileResolution(a.level),x=p.getTileResolution(j.level);let U=p.getLODInfoAt(j.level);const O=U.getXForColumn(j.col),D=U.getYForRow(j.row);U=p.getLODInfoAt(a.level);const l=U.getXForColumn(a.col),C=U.getYForRow(a.row),f=function o(p){return p instanceof HTMLImageElement?p.naturalWidth:p.width}(_)/I[0],h=function E(p){return p instanceof HTMLImageElement?p.naturalHeight:p.height}(_)/I[1],T=Math.round(f*((O-l)/L)),g=Math.round(h*(-(D-C)/L)),c=Math.round(f*I[0]*(x/L)),m=Math.round(h*I[1]*(x/L)),M=P(I);return M.getContext("2d").drawImage(_,T,g,c,m,0,0,I[0],I[1]),M}function P(p){const _=document.createElement("canvas");return[_.width,_.height]=p,_}e.d(V,{V:()=>P,i:()=>v})},53387:(Q,V,e)=>{e.d(V,{Br:()=>a,Fm:()=>O,N9:()=>l,RA:()=>C,Tc:()=>I,Ue:()=>L,iC:()=>j,s9:()=>_,v:()=>D,xW:()=>U,zS:()=>x});var o=e(51675),E=e(99273),v=e(39237),P=e(17091),p=e(22784);function _(h,T,g="nearest",c=!1){const m=!(c&&"u8"===T.pixelType),M=m?v.Br.FLOAT:v.Br.UNSIGNED_BYTE,W=null==T.pixels||0===T.pixels.length?null:m?T.getAsRGBAFloat():T.getAsRGBA(),F=h.capabilities.textureFloat?.textureFloatLinear,A=new p.X;return A.width=T.width,A.height=T.height,A.internalFormat=h.type===E.zO.WEBGL2&&m?v.lP.RGBA32F:v.VI.RGBA,A.samplingMode=!F||"bilinear"!==g&&"cubic"!==g?v.cw.NEAREST:v.cw.LINEAR,A.dataType=M,A.wrapMode=v.e8.CLAMP_TO_EDGE,new P.x(h,A,W)}function a(h,T){const{spacing:g,offsets:c,coefficients:m,size:[M,W]}=T,F=g[0]>1,A=new p.X;A.width=F?4*M:M,A.height=W,A.internalFormat=h.type===E.zO.WEBGL2?v.lP.RGBA32F:v.VI.RGBA,A.dataType=v.Br.FLOAT,A.samplingMode=v.cw.NEAREST,A.wrapMode=v.e8.CLAMP_TO_EDGE;const B=new Float32Array(F?M*W*16:2*c.length);if(F&&null!=m)for(let Z=0,b=0;Z<m.length;Z++)B[b++]=m[Z],Z%3==2&&(B[b++]=1);else for(let Z=0;Z<W;Z++)for(let b=0;b<M;b++){const s=4*(Z*M+b),i=2*(b*W+Z);B[s]=c[i],B[s+1]=c[i+1],B[s+3]=-1===c[i]?0:1}return new P.x(h,A,B)}function j(h,T){const g=new p.X;return g.internalFormat=v.VI.RGBA,g.width=T.length/4,g.height=1,g.samplingMode=v.cw.NEAREST,g.wrapMode=v.e8.CLAMP_TO_EDGE,new P.x(h,g,T)}function I(h,T,g,c=1,m=!0){return{u_flipY:m,u_applyTransform:!!h,u_opacity:c,u_transformSpacing:h?h.spacing:o.Z,u_transformGridSize:h?h.size:o.Z,u_targetImageSize:T,u_srcImageSize:g}}function L(h,T){return{u_colormapOffset:T||0,u_colormapMaxIndex:h?h.length/4-1:0}}function x(h,T){return{u_scale:h,u_offset:T}}function U(h){return{u_bandCount:h.bandCount,u_minOutput:h.outMin,u_maxOutput:h.outMax,u_minCutOff:h.minCutOff,u_maxCutOff:h.maxCutOff,u_factor:h.factor,u_useGamma:h.useGamma,u_gamma:h.gamma,u_gammaCorrection:h.gammaCorrection}}function O(h){return{u_hillshadeType:h.hillshadeType,u_sinZcosAs:h.sinZcosAs,u_sinZsinAs:h.sinZsinAs,u_cosZs:h.cosZs,u_weights:h.weights,u_factor:h.factor,u_minValue:h.minValue,u_maxValue:h.maxValue}}function D(h,T){const g=h.gl,c=T.glName,m=new Map;if(null==c)return m;const M=g.getProgramParameter(c,g.ACTIVE_UNIFORMS);let W;for(let F=0;F<M;F++)W=g.getActiveUniform(c,F),W&&m.set(W.name,{location:g.getUniformLocation(c,W.name),info:W});return m}function l(h,T,g){Object.keys(g).forEach(c=>{const m=T.get(c)||T.get(c+"[0]");m&&function f(h,T,g,c){if(null===c||null==g)return!1;const{info:m}=c;switch(m.type){case v.Se.FLOAT:m.size>1?h.setUniform1fv(T,g):h.setUniform1f(T,g);break;case v.Se.FLOAT_VEC2:h.setUniform2fv(T,g);break;case v.Se.FLOAT_VEC3:h.setUniform3fv(T,g);break;case v.Se.FLOAT_VEC4:h.setUniform4fv(T,g);break;case v.Se.FLOAT_MAT3:h.setUniformMatrix3fv(T,g);break;case v.Se.FLOAT_MAT4:h.setUniformMatrix4fv(T,g);break;case v.Se.INT:m.size>1?h.setUniform1iv(T,g):h.setUniform1i(T,g);break;case v.Se.BOOL:h.setUniform1i(T,g?1:0);break;case v.Se.INT_VEC2:case v.Se.BOOL_VEC2:h.setUniform2iv(T,g);break;case v.Se.INT_VEC3:case v.Se.BOOL_VEC3:h.setUniform3iv(T,g);break;case v.Se.INT_VEC4:case v.Se.BOOL_VEC4:h.setUniform4iv(T,g);break;default:return!1}}(h,c,g[c],m)})}function C(h,T,g,c){g.length===c.length&&(c.some(m=>null==m)||g.some(m=>null==m)||g.forEach((m,M)=>{T.setUniform1i(m,M),h.bindTexture(c[M],M)}))}},84240:(Q,V,e)=>{e.d(V,{S:()=>x,d:()=>U});var o=e(15861),E=e(55369),v=e(16083),P=e(67771),p=e(31558),_=e(12115),a=e(45481);const x=(0,E.GH)(class extends E.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.resizeObserver=(0,p.c)("resize",()=>this.handleResize()),this.handleDefaultSlotChange=O=>{this.hasContent=(0,_.w)(O)},this.storeLoaderEl=O=>{this.loaderEl=O,this.handleResize()},this.loading=!1,this.messages=void 0,this.messageOverrides=void 0,this.loaderScale=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasContent=!1}onMessagesChange(){}effectiveLocaleChange(){(0,P.u)(this,this.effectiveLocale)}connectedCallback(){(0,v.c)(this),(0,P.c)(this),this.resizeObserver?.observe(this.el)}componentWillLoad(){var O=this;return(0,o.Z)(function*(){yield(0,P.s)(O)})()}disconnectedCallback(){(0,v.d)(this),(0,P.d)(this),this.resizeObserver?.disconnect()}render(){const{hasContent:O,loading:D,messages:l}=this;return(0,E.h)("div",{class:"scrim"},D?(0,E.h)("calcite-loader",{label:l.loading,scale:this.loaderScale,ref:this.storeLoaderEl}):null,(0,E.h)("div",{class:"content",hidden:!O},(0,E.h)("slot",{onSlotchange:this.handleDefaultSlotChange})))}getScale(O){return O<72?"s":O>=480?"l":"m"}handleResize(){const{loaderEl:O,el:D}=this;O&&(this.loaderScale=this.getScale(Math.min(D.clientHeight,D.clientWidth)??0))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return":host{position:absolute;inset:0px;z-index:var(--calcite-app-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-scrim-background-internal))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}"}},[1,"calcite-scrim",{loading:[516],messages:[1040],messageOverrides:[1040],loaderScale:[32],defaultMessages:[32],effectiveLocale:[32],hasContent:[32]}]);function U(){typeof customElements>"u"||["calcite-scrim","calcite-loader"].forEach(D=>{switch(D){case"calcite-scrim":customElements.get(D)||customElements.define(D,x);break;case"calcite-loader":customElements.get(D)||(0,a.d)()}})}U()},44160:(Q,V,e)=>{e.d(V,{C:()=>E,I:()=>p,M:()=>P,S:()=>v,a:()=>x,g:()=>I,u:()=>L});var o=e(55369);const E={container:"container",containerBorderSelected:"container--border-selected",containerBorderUnselected:"container--border-unselected",contentContainer:"content-container",contentContainerSelectable:"content-container--selectable",contentContainerHasCenterContent:"content-container--has-center-content",nestedContainer:"nested-container",nestedContainerHidden:"nested-container--hidden",content:"content",customContent:"custom-content",actionsStart:"actions-start",contentStart:"content-start",label:"label",description:"description",contentEnd:"content-end",contentBottom:"content-bottom",actionsEnd:"actions-end",selectionContainer:"selection-container",openContainer:"open-container",dragContainer:"drag-container"},v={actionsStart:"actions-start",contentStart:"content-start",content:"content",contentBottom:"content-bottom",contentEnd:"content-end",actionsEnd:"actions-end"},P=0,p={selectedMultiple:"check-circle-f",selectedSingle:"circle-f",unselected:"blank",closedLTR:"caret-right",closedRTL:"caret-left",open:"caret-down",blank:"blank",close:"x"},_="calcite-list",a="calcite-list-item-group",j="calcite-list-item";function I(U){const O=U.assignedElements({flatten:!0}),D=O.filter(f=>f?.matches(a)).map(f=>Array.from(f.querySelectorAll(j))).reduce((f,h)=>[...f,...h],[]),l=O.filter(f=>f?.matches(j));return[...O.filter(f=>f?.matches(_)).map(f=>Array.from(f.querySelectorAll(j))).reduce((f,h)=>[...f,...h],[]),...D,...l]}function L(U){U.forEach(O=>{O.setPosition=U.indexOf(O)+1,O.setSize=U.length})}function x(U,O=!1){return o.Z5.isBrowser?document.evaluate(O?"ancestor::calcite-list-item | ancestor::calcite-list-item-group":"ancestor::calcite-list-item",U,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength:0}}}]);