"use strict";(self.webpackChunkjsapi_angular_cli=self.webpackChunkjsapi_angular_cli||[]).push([[5205],{35205:(P,_,i)=>{i.r(_),i.d(_,{default:()=>g});var d=i(50484),y=i(14007),o=i(77675),p=(i(4703),i(1535),i(57678),i(57964),i(10141)),h=i(74321),c=i(71997);let l=class extends c.default{initialize(){this.addHandles([(0,o.YP)(()=>this.view.scale,()=>this._update(),o.nn)],"constructor")}isUpdating(){const s=this.layer.sublayers.some(D=>null!=D.renderer),e=this._commandsQueue.updating,a=null!=this._updatingRequiredFieldsPromise,t=!this._proxy||!this._proxy.isReady,r=this._pipelineIsUpdating,n=null==this.tileRenderer||this.tileRenderer?.updating,u=s&&(e||a||t||r||n);return(0,y.Z)("esri-2d-log-updating")&&console.log(`Updating FLV2D: ${u}\n  -> hasRenderer ${s}\n  -> hasPendingCommand ${e}\n  -> updatingRequiredFields ${a}\n  -> updatingProxy ${t}\n  -> updatingPipeline ${r}\n  -> updatingTileRenderer ${n}\n`),u}_injectOverrides(s){let e=super._injectOverrides(s);const a=this.view.scale,t=this.layer.sublayers.filter(n=>function E(s,e){return!s.visible||0!==s.minScale&&e>s.minScale||0!==s.maxScale&&e<s.maxScale}(n,a)).map(n=>n.subtypeCode);if(!t.length)return e;e=e??(new h.Z).toJSON();const r=`NOT ${this.layer.subtypeField} IN (${t.join(",")})`;return e.where=e.where?`(${e.where}) AND (${r})`:r,e}_setLayersForFeature(s){const e=this.layer.fieldsIndex.get(this.layer.subtypeField),a=s.attributes[e.name],t=this.layer.sublayers.find(r=>r.subtypeCode===a);s.layer=s.sourceLayer=t}_createSchemaConfig(){const s={subtypeField:this.layer.subtypeField,sublayers:Array.from(this.layer.sublayers).map(r=>({featureReduction:null,geometryType:this.layer.geometryType,labelingInfo:r.labelingInfo,labelsVisible:r.labelsVisible,renderer:r.renderer,subtypeCode:r.subtypeCode,orderBy:null}))},e=this.layer.sublayers.map(r=>r.subtypeCode).join(",");let t=this.layer.definitionExpression?this.layer.definitionExpression+" AND ":"";return t+=this.layer.sublayers.length?`${this.layer.subtypeField} IN (${e})`:"1=2",{...super._createSchemaConfig(),...s,definitionExpression:t}}};l=(0,d._)([(0,p.j)("esri.views.2d.layers.SubtypeGroupLayerView2D")],l);const g=l}}]);