"use strict";(self.webpackChunkjsapi_angular_cli=self.webpackChunkjsapi_angular_cli||[]).push([[1518],{97922:(ce,se,j)=>{j.d(se,{Z:()=>ie});var G=j(50484),oe=j(84303),J=j(89317),Q=j(80543),ne=(j(1535),j(57678),j(14007),j(21070)),re=j(10141);const ee=new oe.X({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),ae=new oe.X({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let S=class extends J.wq{constructor(H){super(H),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(H){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",H)}set definedInterval(H){"defined-interval"===this.classificationMethod&&this._set("definedInterval",H)}};(0,G._)([(0,ne.J)({classBreaksDef:"class-breaks-definition"})],S.prototype,"type",void 0),(0,G._)([(0,Q.Cb)({json:{write:!0}})],S.prototype,"breakCount",void 0),(0,G._)([(0,Q.Cb)({json:{write:!0}})],S.prototype,"classificationField",void 0),(0,G._)([(0,Q.Cb)({type:String,json:{read:ee.read,write:ee.write}})],S.prototype,"classificationMethod",void 0),(0,G._)([(0,Q.Cb)({json:{write:!0}})],S.prototype,"normalizationField",void 0),(0,G._)([(0,Q.Cb)({json:{read:ae.read,write:ae.write}})],S.prototype,"normalizationType",void 0),(0,G._)([(0,Q.Cb)({value:null,json:{write:!0}})],S.prototype,"standardDeviationInterval",null),(0,G._)([(0,Q.Cb)({value:null,json:{write:!0}})],S.prototype,"definedInterval",null),S=(0,G._)([(0,re.j)("esri.rest.support.ClassBreaksDefinition")],S);const ie=S},93332:(ce,se,j)=>{j.d(se,{k:()=>le});const oe=j(4703).Z.getLogger("esri.rest.support.generateRendererUtils");function J(r,p){return Number(r.toFixed(p))}function le(r){const{normalizationTotal:p}=r;return{classBreaks:ue(r),normalizationTotal:p}}function ue(r){const p=r.definition,{classificationMethod:s,normalizationType:m,definedInterval:D}=p,b=p.breakCount??1,g=[];let f=r.values;if(0===f.length)return[];f=f.sort((y,T)=>y-T);const x=f[0],$=f[f.length-1];if("equal-interval"===s)if(f.length>=b){const y=($-x)/b;let T=x;for(let c=1;c<b;c++){const l=J(x+c*y,6);g.push({minValue:T,maxValue:l,label:A(T,l,m)}),T=l}g.push({minValue:T,maxValue:$,label:A(T,$,m)})}else f.forEach(y=>{g.push({minValue:y,maxValue:y,label:A(y,y,m)})});else if("natural-breaks"===s){const y=function ne(r){const p=[],s=[];let m=Number.MIN_VALUE,D=1,b=-1;for(let g=0;g<r.length;g++){const f=r[g];f===m?(D++,s[b]=D):null!==f&&(p.push(f),m=f,D=1,s.push(D),b++)}return{uniqueValues:p,valueFrequency:s}}(f),c=function re(r,p,s){const m=r.length,D=[];s>m&&(s=m);for(let g=0;g<s;g++)D.push(Math.round(g*m/s-1));D.push(m-1);let b=ee(D,r,p,s);return function ae(r,p,s,m,D,b){let g=0,f=0,x=0,$=0,y=!0;for(let T=0;T<2&&y;T++){0===T&&(y=!1);for(let c=0;c<b-1;c++)for(;s[c+1]+1!==s[c+2];){s[c+1]=s[c+1]+1;const l=W(c,s,m,D);x=l.sbMean,g=l.sbSdcm;const M=W(c+1,s,m,D);if($=M.sbMean,f=M.sbSdcm,!(g+f<p[c]+p[c+1])){s[c+1]=s[c+1]-1;break}p[c]=g,p[c+1]=f,r[c]=x,r[c+1]=$,y=!0}for(let c=b-1;c>0;c--)for(;s[c]!==s[c-1]+1;){s[c]=s[c]-1;const l=W(c-1,s,m,D);x=l.sbMean,g=l.sbSdcm;const M=W(c,s,m,D);if($=M.sbMean,f=M.sbSdcm,!(g+f<p[c-1]+p[c])){s[c]=s[c]+1;break}p[c-1]=g,p[c]=f,r[c-1]=x,r[c]=$,y=!0}}return y}(b.mean,b.sdcm,D,r,p,s)&&(b=ee(D,r,p,s)),D}(y.uniqueValues,r.valueFrequency||y.valueFrequency,b);let l=x;for(let M=1;M<b;M++)if(y.uniqueValues.length>M){const w=J(y.uniqueValues[c[M]],6);g.push({minValue:l,maxValue:w,label:A(l,w,m)}),l=w}g.push({minValue:l,maxValue:$,label:A(l,$,m)})}else if("quantile"===s)if(f.length>=b&&x!==$){let y=x,T=Math.ceil(f.length/b),c=0;for(let l=1;l<b;l++){let M=T+c-1;M>f.length&&(M=f.length-1),M<0&&(M=0),g.push({minValue:y,maxValue:f[M],label:A(y,f[M],m)}),y=f[M],c+=T,T=Math.ceil((f.length-c)/(b-l))}g.push({minValue:y,maxValue:$,label:A(y,$,m)})}else{let y=-1;for(let T=0;T<f.length;T++){const c=f[T];c!==y&&(y=c,g.push({minValue:y,maxValue:c,label:A(y,c,m)}),y=c)}}else if("standard-deviation"===s){const y=function ie(r){let p=0;for(let s=0;s<r.length;s++)p+=r[s];return p/=r.length,p}(f),T=function H(r,p){let s=0;for(let m=0;m<r.length;m++){const D=r[m];s+=(D-p)*(D-p)}return s/=r.length,Math.sqrt(s)}(f,y);if(0===T)g.push({minValue:f[0],maxValue:f[0],label:A(f[0],f[0],m)});else{const c=function S(r,p,s,m,D){let b=Math.max(m-r,p-m)/D/s;return b=b>=1?1:b>=.5?.5:.25,b}(x,$,b,y,T)*T;let l=0,M=x;for(let te=b;te>=1;te--){const d=J(y-(te-.5)*c,6);g.push({minValue:M,maxValue:d,label:A(M,d,m)}),M=d,l++}let w=J(y+.5*c,6);g.push({minValue:M,maxValue:w,label:A(M,w,m)}),M=w,l++;for(let te=1;te<=b;te++)w=l===2*b?$:J(y+(te+.5)*c,6),g.push({minValue:M,maxValue:w,label:A(M,w,m)}),M=w,l++}}else if("defined-interval"===s){if(!D)return g;const y=f[0],T=f[f.length-1],c=Math.ceil((T-y)/D);let l=y;for(let M=1;M<c;M++){const w=J(y+M*D,6);g.push({minValue:l,maxValue:w,label:A(l,w,m)}),l=w}g.push({minValue:l,maxValue:T,label:A(l,T,m)})}return g}function A(r,p,s){let m=null;return m=r===p?s&&"percent-of-total"===s?r+"%":r.toString():s&&"percent-of-total"===s?r+"% - "+p+"%":r+" - "+p,m}function ee(r,p,s,m){let D=[],b=[],g=[],f=0;const x=[],$=[];for(let l=0;l<m;l++){const M=W(l,r,p,s);x.push(M.sbMean),$.push(M.sbSdcm),f+=$[l]}let y,T=f,c=!0;for(;c||f<T;){c=!1,D=[];for(let l=0;l<m;l++)D.push(r[l]);for(let l=0;l<m;l++)for(let M=r[l]+1;M<=r[l+1];M++)if(y=p[M],l>0&&M!==r[l+1]&&Math.abs(y-x[l])>Math.abs(y-x[l-1]))r[l]=M;else if(l<m-1&&r[l]!==M-1&&Math.abs(y-x[l])>Math.abs(y-x[l+1])){r[l+1]=M-1;break}T=f,f=0,b=[],g=[];for(let l=0;l<m;l++){b.push(x[l]),g.push($[l]);const M=W(l,r,p,s);x[l]=M.sbMean,$[l]=M.sbSdcm,f+=$[l]}}if(f>T){for(let l=0;l<m;l++)r[l]=D[l],x[l]=b[l],$[l]=g[l];f=T}return{mean:x,sdcm:$}}function W(r,p,s,m){let D=0,b=0;for(let x=p[r]+1;x<=p[r+1];x++){const $=m[x];D+=s[x]*$,b+=$}b<=0&&oe.warn("Exception in Natural Breaks calculation");const g=D/b;let f=0;for(let x=p[r]+1;x<=p[r+1];x++)f+=m[x]*(s[x]-g)**2;return{sbMean:g,sbSdcm:f}}},71518:(ce,se,j)=>{j.d(se,{do:()=>b,gq:()=>s,qQ:()=>m,yO:()=>D});var G=j(15861),Q=(j(2189),j(57964),j(55768)),le=j(51431),ue=j(43814),A=j(66398),ne=j(33721),re=j(85295),ee=j(96043),ae=j(43157),S=j(46169),ie=j(4978),H=j(85039);let W=null;const r=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;function s(d,_,I,O){const F=(0,ne.MP)(I)?(0,ne.C5)(I):null,K=F?Math.round((F.valid[1]-F.valid[0])/_.scale[0]):null;return d.map(Z=>{const k=new H.Z(Z.geometry);return(0,A.RF)(_,k,k,k.hasZ,k.hasM),Z.geometry=F?function p(d,_,I){return d.x<0?d.x+=_:d.x>I&&(d.x-=_),d}(k,K??0,O[0]):k,Z})}function m(d,_=18,I,O,F,K){const Z=new Float64Array(F*K);_=Math.round((0,Q.F2)(_));let k=Number.POSITIVE_INFINITY,q=Number.NEGATIVE_INFINITY,R=0,Y=0,t=0,n=0;const i=(0,ee.wx)(O,I);for(const{geometry:h,attributes:v}of d){const{x:E,y:C}=h,P=Math.max(0,E-_),L=Math.max(0,C-_),U=Math.min(K,C+_),B=Math.min(F,E+_),N=+i(v);for(let V=L;V<U;V++)for(let z=P;z<B;z++){const X=V*F+z,me=(0,ee.If)(z-E,V-C,_),de=Z[X];R=Z[X]+=me*N;const fe=R-de;Y+=fe,t+=fe*fe,R<k&&(k=R),R>q&&(q=R),n++}}if(!n)return{mean:0,stddev:0,min:0,max:0,mid:0,count:0};const o=(q-k)/2;return{mean:Y/n,stdDev:Math.sqrt((t-Y*Y/n)/n),min:k,max:q,mid:o,count:n}}function D(d){const _=r.exec(d);if(!_)return null;const{hh:I,mm:O,ss:F,ms:K}=_.groups;return Number(I)*le.fM.hours+Number(O)*le.fM.minutes+Number(F)*le.fM.seconds+Number(K||0)}function b(d,_){return g.apply(this,arguments)}function g(){return(g=(0,G.Z)(function*(d,_,I=!0){if(!_)return[];const{field:O,field2:F,field3:K,fieldDelimiter:Z,fieldInfos:k,timeZone:q}=d,R=O&&k?.find(B=>B.name.toLowerCase()===O.toLowerCase()),Y=!!R&&(0,re.sX)(R),t=!!R&&(0,ae.a8)(R),n=d.valueExpression,i=d.normalizationType,o=d.normalizationField,h=d.normalizationTotal,v=[],E=d.viewInfoParams;let C=null,P=null;if(n){if(!W){const{arcadeUtils:B}=yield(0,ie.LC)();W=B}W.hasGeometryOperations(n)&&(yield W.enableGeometryOperations()),C=W.createFunction(n),P=E?W.getViewInfo({viewingMode:E.viewingMode,scale:E.scale,spatialReference:new ue.Z(E.spatialReference)}):null}const L=d.fieldInfos,U=_[0]&&"declaredClass"in _[0]&&"esri.Graphic"===_[0].declaredClass||!L?null:{fields:L};return _.forEach(B=>{const N=B.attributes;let V;if(n){const z=U?{...B,layer:U}:B,X=W.createExecContext(z,P,q);V=W.executeFunction(C,X)}else N&&(V=N[O],F?(V=`${(0,S.wk)(V)}${Z}${(0,S.wk)(N[F])}`,K&&(V=`${V}${Z}${(0,S.wk)(N[K])}`)):"string"==typeof V&&I&&(t?V=V?new Date(V).getTime():null:Y&&(V=V?D(V):null)));if(i&&"number"==typeof V&&isFinite(V)){const z=N&&parseFloat(N[o]);V=(0,S.fk)(V,i,z,h)}v.push(V)}),v})).apply(this,arguments)}},46169:(ce,se,j)=>{j.d(se,{DL:()=>Z,F_:()=>w,G2:()=>O,H0:()=>H,Lq:()=>p,Qm:()=>_,S5:()=>ie,XL:()=>r,eT:()=>te,fk:()=>I,i5:()=>W,oF:()=>k,wk:()=>S});var G=j(97922),oe=j(93332);const J="<Null>",Q="equal-interval",le=1,ue=5,A=10,ne=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,re=new Set(["esriFieldTypeDate","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeOID","esriFieldTypeBigInteger"]),ee=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),ae=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function S(t){return null==t||"string"==typeof t&&!t?J:t}function ie(t){return!(null!=t.normalizationField||null!=t.normalizationType||null!=t.minValue||null!=t.maxValue||t.sqlExpression&&t.supportsSQLExpression)}function H(t){const n=t.returnDistinct?[...new Set(t.values)]:t.values,i=n.filter(v=>null!=v).sort(),o=i.length,h={count:o,min:i[0],max:i[o-1]};return t.supportsNullCount&&(h.nullcount=n.length-o),t.percentileParams&&(h.median=r(n,t.percentileParams)),h}function W(t){const{values:n,useSampleStdDev:i,supportsNullCount:o}=t;let h=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,E=null,C=null,P=null,L=null,U=0;const B=null==t.minValue?-1/0:t.minValue,N=null==t.maxValue?1/0:t.maxValue;for(const z of n)Number.isFinite(z)?z>=B&&z<=N&&(E=null===E?z:E+z,h=Math.min(h,z),v=Math.max(v,z),U++):"string"==typeof z&&U++;if(U&&null!=E){C=E/U;let z=0;for(const X of n)Number.isFinite(X)&&X>=B&&X<=N&&(z+=(X-C)**2);L=i?U>1?z/(U-1):0:U>0?z/U:0,P=Math.sqrt(L)}else h=null,v=null;const V={avg:C,count:U,max:v,min:h,stddev:P,sum:E,variance:L};return o&&(V.nullcount=n.length-U),t.percentileParams&&(V.median=r(n,t.percentileParams)),V}function r(t,n){const{fieldType:i,value:o,orderBy:h,isDiscrete:v}=n,E=p(i,"desc"===h);if(0===(t=[...t].filter(V=>null!=V).sort((V,z)=>E(V,z))).length)return null;if(o<=0)return t[0];if(o>=1)return t[t.length-1];const C=(t.length-1)*o,P=Math.floor(C),L=P+1,U=C%1,B=t[P],N=t[L];return L>=t.length||v||"string"==typeof B||"string"==typeof N?B:B*(1-U)+N*U}function p(t,n){if(t){if(re.has(t))return l(n);if(ee.has(t))return y(n,!1);if("esriFieldTypeTimestampOffset"===t)return function f(t){return t?g:b}(n);const v=y(n,!0);if("esriFieldTypeString"===t)return v;if("esriFieldTypeGUID"===t||"esriFieldTypeGlobalID"===t)return(E,C)=>v(M(E),M(C))}const i=n?1:-1,o=l(n),h=y(n,!0);return(v,E)=>"number"==typeof v&&"number"==typeof E?o(v,E):"string"==typeof v&&"string"==typeof E?h(v,E):i}const s=(t,n)=>null==t?null==n?0:1:null==n?-1:null,m=(t,n)=>null==t?null==n?0:-1:null==n?1:null,b=(t,n)=>m(t,n)??(t===n?0:new Date(t).getTime()-new Date(n).getTime()),g=(t,n)=>s(t,n)??(t===n?0:new Date(n).getTime()-new Date(t).getTime()),x=(t,n)=>m(t,n)??(t===n?0:t<n?-1:1),$=(t,n)=>s(t,n)??(t===n?0:t<n?1:-1);function y(t,n){if(!n)return t?$:x;const i=function D(t){return t?s:m}(t);return t?(o,h)=>i(o,h)??((o=o.toUpperCase())>(h=h.toUpperCase())?-1:o<h?1:0):(o,h)=>i(o,h)??((o=o.toUpperCase())<(h=h.toUpperCase())?-1:o>h?1:0)}const T=(t,n)=>s(t,n)??n-t,c=(t,n)=>m(t,n)??t-n;function l(t){return t?T:c}function M(t){return t.substr(24,12)+t.substr(19,4)+t.substr(16,2)+t.substr(14,2)+t.substr(11,2)+t.substr(9,2)+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)+t.substr(0,2)}function w(t,n){let i;for(i in t)ae.includes(i)&&(Number.isFinite(t[i])||(t[i]=null));return n&&["avg","stddev","variance"].forEach(o=>{null!=t[o]&&(t[o]=Math.ceil(t[o]??0))}),t}function te(t){const n={};for(let i of t)(null==i||"string"==typeof i&&""===i.trim())&&(i=null),null==n[i]?n[i]={count:1,data:i}:n[i].count++;return{count:n}}function d(t){return"coded-value"!==t?.type?[]:t.codedValues.map(n=>n.code)}function _(t,n,i,o){const h=t.count,v=[];if(i&&n){const E=[],C=d(n[0]);for(const P of C)if(n[1]){const L=d(n[1]);for(const U of L)if(n[2]){const B=d(n[2]);for(const N of B)E.push(`${S(P)}${o}${S(U)}${o}${S(N)}`)}else E.push(`${S(P)}${o}${S(U)}`)}else E.push(P);for(const P of E)h.hasOwnProperty(P)||(h[P]={data:P,count:0})}for(const E in h){const C=h[E];v.push({value:C.data,count:C.count,label:C.label})}return{uniqueValueInfos:v}}function I(t,n,i,o){let h=null;switch(n){case"log":0!==t&&(h=Math.log(t)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(o)&&0!==o&&(h=t/o*100);break;case"field":Number.isFinite(i)&&0!==i&&(h=t/i);break;case"natural-log":t>0&&(h=Math.log(t));break;case"square-root":t>0&&(h=t**.5)}return h}function O(t,n){const i=function K(t){const{breakCount:n,field:i,normalizationField:o,normalizationType:h}=t,v=t.classificationMethod||Q;return new G.Z({breakCount:n,classificationField:i,classificationMethod:v,normalizationField:"field"===h?o:void 0,normalizationType:h,standardDeviationInterval:"standard-deviation"===v?t.standardDeviationInterval||le:void 0})}({field:n.field,normalizationType:n.normalizationType,normalizationField:n.normalizationField,classificationMethod:n.classificationMethod,standardDeviationInterval:n.standardDeviationInterval,breakCount:n.numClasses||ue});return t=function F(t,n,i){const o=n??-1/0,h=i??1/0;return t.filter(v=>Number.isFinite(v)&&v>=o&&v<=h)}(t,n.minValue,n.maxValue),(0,oe.k)({definition:i,values:t,normalizationTotal:n.normalizationTotal})}function Z(t,n){let i=t.classBreaks;const o=i.length,h=i[0]?.minValue,v=i[o-1]?.maxValue,E="standard-deviation"===n,C=ne;return i=i.map(P=>{const L=P.label,U={minValue:P.minValue,maxValue:P.maxValue,label:L};if(E&&L){const B=L.match(C),N=B?.map(V=>+V.trim())??[];2===N.length?(U.minStdDev=N[0],U.maxStdDev=N[1],N[0]<0&&N[1]>0&&(U.hasAvg=!0)):1===N.length&&(L.includes("<")?(U.minStdDev=null,U.maxStdDev=N[0]):L.includes(">")&&(U.minStdDev=N[0],U.maxStdDev=null))}return U}),{minValue:h,maxValue:v,classBreakInfos:i,normalizationTotal:t.normalizationTotal}}function k(t,n){const i=function q(t,n){const{field:i,classificationMethod:o,standardDeviationInterval:h,normalizationType:v,normalizationField:E,normalizationTotal:C,minValue:P,maxValue:L}=n,U=n.numBins||A;let B=null,N=null,V=null;if(o&&"equal-interval"!==o||v){const{classBreaks:z}=O(t,{field:i,normalizationType:v,normalizationField:E,normalizationTotal:C,classificationMethod:o,standardDeviationInterval:h,minValue:P,maxValue:L,numClasses:U});B=z[0].minValue,N=z[z.length-1].maxValue,V=z.map(X=>[X.minValue,X.maxValue])}else{if(null!=P&&null!=L)B=P,N=L;else{const z=W({values:t,minValue:P,maxValue:L,useSampleStdDev:!v,supportsNullCount:ie({normalizationType:v,normalizationField:E,minValue:P,maxValue:L})});B=z.min??null,N=z.max??null}V=function Y(t,n,i){const o=(n-t)/i,h=[];let v,E=t;for(let C=1;C<=i;C++)v=E+o,v=Number(v.toFixed(16)),h.push([E,C===i?n:v]),E=v;return h}(B??0,N??0,U)}return{min:B,max:N,intervals:V}}(t,n);if(null==i.min&&null==i.max)return{bins:[],minValue:i.min,maxValue:i.max,normalizationTotal:n.normalizationTotal};const o=i.intervals,h=i.min??0,v=i.max??0,E=o.map((C,P)=>({minValue:o[P][0],maxValue:o[P][1],count:0}));for(const C of t)if(null!=C&&C>=h&&C<=v){const P=R(o,C);P>-1&&E[P].count++}return{bins:E,minValue:h,maxValue:v,normalizationTotal:n.normalizationTotal}}function R(t,n){let i=-1;for(let o=t.length-1;o>=0;o--)if(n>=t[o][0]){i=o;break}return i}}}]);