"use strict";(self.webpackChunkjsapi_angular_cli=self.webpackChunkjsapi_angular_cli||[]).push([[2871],{51310:(pe,B,l)=>{function b(_){return null!=W(_)||null!=j(_)}function x(_){return v.test(_)}function D(_){return W(_)??j(_)}function j(_){const p=new Date(_);return function L(_,p){if(Number.isNaN(_.getTime()))return!1;let c=!0;if(N&&/\d+\W*$/.test(p)){const I=p.match(/[a-zA-Z]{2,}/);if(I){let F=!1,h=0;for(;!F&&h<=I.length;)F=!w.test(I[h]),h++;c=!F}}return c}(p,_)?Number.isNaN(p.getTime())?null:p.getTime()-6e4*p.getTimezoneOffset():null}function W(_){const p=v.exec(_);if(!p?.groups)return null;const c=p.groups,I=+c.year,F=+c.month-1,h=+c.day,C=+(c.hours??"0"),R=+(c.minutes??"0"),$=+(c.seconds??"0");if(C>23||R>59||$>59)return null;const Y=c.ms??"0",G=Y?+Y.padEnd(3,"0").substring(0,3):0;let K;return K=c.isUTC||!c.offsetSign?Date.UTC(I,F,h,C,R,$,G):6e4*("+"===c.offsetSign?-1:1)*(60*+c.offsetHours+ +c.offsetMinutes)+Date.UTC(I,F,h,C,R,$,G),Number.isNaN(K)?null:K}l.d(B,{mu:()=>x,of:()=>b,sG:()=>D});const v=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,w=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,N=!Number.isNaN(new Date("technology 10").getTime())},78642:(pe,B,l)=>{l.d(B,{O3:()=>fe,lG:()=>ie,my:()=>ne,q9:()=>w});var b=l(51310),x=l(57964),D=l(33721),j=l(83502),W=l(62209),v=l(85295);const L={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function w(e){return L[e]}function*N(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*_(e){if(e)switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const n of t)yield*n}}function c(e){for(const t of e)if(t.length>2)return!0;return!1}function h(e){let t=0;for(let n=0;n<e.length;n++){const i=e[n],y=e[(n+1)%e.length];t+=i[0]*y[1]-y[0]*i[1]}return t<=0}function C(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function R(e,t,n){switch(t.type){case"LineString":return function $(e,t,n){return A(e,t.coordinates,n),e}(e,t,n);case"MultiLineString":return function Y(e,t,n){for(const i of t.coordinates)A(e,i,n);return e}(e,t,n);case"MultiPoint":return function G(e,t,n){return A(e,t.coordinates,n),e}(e,t,n);case"MultiPolygon":return function K(e,t,n){for(const i of t.coordinates){q(e,i[0],n);for(let y=1;y<i.length;y++)re(e,i[y],n)}return e}(e,t,n);case"Point":return function z(e,t,n){return J(e,t.coordinates,n),e}(e,t,n);case"Polygon":return function te(e,t,n){const i=t.coordinates;q(e,i[0],n);for(let y=1;y<i.length;y++)re(e,i[y],n);return e}(e,t,n)}}function q(e,t,n){const i=C(t);!function I(e){return!h(e)}(i)?A(e,i,n):oe(e,i,n)}function re(e,t,n){const i=C(t);!function F(e){return h(e)}(i)?A(e,i,n):oe(e,i,n)}function A(e,t,n){for(const i of t)J(e,i,n);e.lengths.push(t.length)}function oe(e,t,n){for(let i=t.length-1;i>=0;i--)J(e,t[i],n);e.lengths.push(t.length)}function J(e,t,n){const[i,y,S]=t;e.coords.push(i,y),n.hasZ&&e.coords.push(S||0)}function de(e){switch(typeof e){case"string":return(0,b.mu)(e)?"esriFieldTypeDate":"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function fe(e,t=4326){if(!e)throw new x.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new x.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:n}=e;if(!n)return;const i="string"==typeof n?n:"name"===n.type?n.properties.name:"EPSG"===n.type?n.properties.code:null,y=(0,D.oR)({wkid:t})?new RegExp(".*(CRS84H?|4326)$","i"):new RegExp(`.*(${t})$`,"i");if(!i||!y.test(i))throw new x.Z("geojson:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:n})}function ne(e,t={}){const n=[],i=new Set,y=new Set;let S,H=!1,O=null,T=!1,{geometryType:s=null}=t,o=!1;for(const a of N(e)){const{geometry:d,properties:f,id:E}=a;if((!d||(s||(s=w(d.type)),w(d.type)===s))&&(H||(H=c(_(d))),T||(T=null!=E,T&&(S=typeof E,f&&(O=Object.keys(f).filter(m=>f[m]===E)))),f&&O&&T&&null!=E&&(O.length>1?O=O.filter(m=>f[m]===E):1===O.length&&(O=f[O[0]]===E?O:[])),!o&&f)){let m=!0;for(const P in f){if(i.has(P))continue;const Q=f[P];if(null==Q){m=!1,y.add(P);continue}const U=de(Q);if("unknown"===U){y.add(P);continue}y.delete(P),i.add(P);const Z=(0,v.q6)(P);Z&&n.push({name:Z,alias:P,type:U})}o=m}}const r=(0,v.q6)(1===O?.length&&O[0]||null)??void 0;if(r)for(const a of n)if(a.name===r&&(0,v.H7)(a)){a.type="esriFieldTypeOID";break}return{fields:n,geometryType:s,hasZ:H,objectIdFieldName:r,objectIdFieldType:S,unknownFields:Array.from(y)}}function ie(e,t){return Array.from(function*p(e,t={}){const{geometryType:n,objectIdField:i}=t;for(const y of e){const{geometry:S,properties:H,id:O}=y;if(S&&w(S.type)!==n)continue;const T=H||{};let s;i&&(s=T[i],null==O||s||(T[i]=s=O)),yield new j.u_(S?R(new W.Z,S,t):null,T,null,s??void 0)}}(N(e),t))}},60324:(pe,B,l)=>{l.d(B,{Dm:()=>w,Hq:()=>N,MS:()=>_,bU:()=>W});var b=l(14007),x=l(34222),D=l(85559),j=l(19579);function W(p){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===p||"esriGeometryMultipoint"===p?j.I4:"esriGeometryPolyline"===p?j.ET:j.lF}}}const v=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let L=1;function w(p,c){if((0,b.Z)("esri-csp-restrictions"))return()=>({[c]:null,...p});try{let I=`this.${c} = null;`;for(const h in p)I+=`this${v.test(h)?`.${h}`:`["${h}"]`} = ${JSON.stringify(p[h])};`;const F=new Function(`\n      return class AttributesClass$${L++} {\n        constructor() {\n          ${I};\n        }\n      }\n    `)();return()=>new F}catch{return()=>({[c]:null,...p})}}function N(p={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,x.d9)(p)}}]}function _(p,c){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:p},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:c,supportsDelete:c,supportsEditing:c,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:c,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:D.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:c,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},62871:(pe,B,l)=>{l.d(B,{$9:()=>$,G4:()=>te,Lu:()=>R,WW:()=>ie,d:()=>de,eS:()=>oe,gp:()=>re,j:()=>K,w9:()=>Y,yN:()=>fe});var b=l(15861),D=(l(2189),l(66476)),j=l(57964),W=l(4703),v=l(33721),L=l(48230),w=l(10842),N=l(40620),_=l(78642),p=l(60324),c=l(40100),I=l(51217),F=l(764),h=l(43814);const C=W.Z.getLogger("esri.layers.graphics.sources.ogcfeature"),R="http://www.opengis.net/def/crs/",$=`${R}OGC/1.3/CRS84`;function Y(s,o){return G.apply(this,arguments)}function G(){return(G=(0,b.Z)(function*(s,o,r={},a=5){const{links:d}=s,f=T(d,"items","application/geo+json")||T(d,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if(null==f)throw new j.Z("ogc-feature-layer:missing-items-page","Missing items url");const{data:E}=yield(0,D.Z)(f.href,{signal:r.signal,query:{limit:a,...r.customParameters,token:r.apiKey},headers:{accept:"application/geo+json"}});(0,_.O3)(E);const m=(0,_.my)(E,{geometryType:o.geometryType}),P=o.fields||m.fields||[],Q=null!=o.hasZ?o.hasZ:m.hasZ,U=m.geometryType,Z=o.objectIdField||m.objectIdFieldName||"OBJECTID";let g=o.timeInfo;const se=P.find(({name:u})=>u===Z);if(se)se.editable=!1,se.nullable=!1;else{if(!m.objectIdFieldType)throw new j.Z("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");P.unshift({name:Z,alias:Z,type:"number"===m.objectIdFieldType?"esriFieldTypeOID":"esriFieldTypeString",editable:!1,nullable:!1})}if(Z!==m.objectIdFieldName){const u=P.find(({name:M})=>M===m.objectIdFieldName);u&&(u.type="esriFieldTypeInteger")}P===m.fields&&m.unknownFields.length>0&&C.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:m.unknownFields}});for(const u of P){if(null==u.name&&(u.name=u.alias),null==u.alias&&(u.alias=u.name),"esriFieldTypeOID"!==u.type&&"esriFieldTypeGlobalID"!==u.type&&(u.editable=null==u.editable||!!u.editable,u.nullable=null==u.nullable||!!u.nullable),!u.name)throw new j.Z("ogc-feature-layer:invalid-field-name","field name is missing",{field:u});if(!I.v.jsonValues.includes(u.type))throw new j.Z("ogc-feature-layer:invalid-field-type",`invalid type for field "${u.name}"`,{field:u})}if(g){const u=new c.Z(P);if(g.startTimeField){const M=u.get(g.startTimeField);M?(g.startTimeField=M.name,M.type="esriFieldTypeDate"):g.startTimeField=null}if(g.endTimeField){const M=u.get(g.endTimeField);M?(g.endTimeField=M.name,M.type="esriFieldTypeDate"):g.endTimeField=null}if(g.trackIdField){const M=u.get(g.trackIdField);M?g.trackIdField=M.name:(g.trackIdField=null,C.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:g}}))}g.timeReference||={timeZoneIANA:F.pt},g.startTimeField||g.endTimeField||(C.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:g}}),g=null)}return{drawingInfo:U?(0,p.bU)(U):null,extent:O(s),geometryType:U,fields:P,hasZ:!!Q,objectIdField:Z,timeInfo:g}})).apply(this,arguments)}function K(s){return z.apply(this,arguments)}function z(){return(z=(0,b.Z)(function*(s,o={}){const{links:r}=s,a=T(r,"data","application/json")||T(r,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if(null==a)throw new j.Z("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:d,customParameters:f,signal:E}=o,{data:m}=yield(0,D.Z)(a.href,{signal:E,headers:{accept:"application/json"},query:{...f,token:d}});return m})).apply(this,arguments)}function te(s){return q.apply(this,arguments)}function q(){return(q=(0,b.Z)(function*(s,o={}){const{links:r}=s,a=T(r,"conformance","application/json")||T(r,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if(null==a)throw new j.Z("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:d,customParameters:f,signal:E}=o,{data:m}=yield(0,D.Z)(a.href,{signal:E,headers:{accept:"application/json"},query:{...f,token:d}});return m})).apply(this,arguments)}function re(s){return A.apply(this,arguments)}function A(){return(A=(0,b.Z)(function*(s,o={}){const{apiKey:r,customParameters:a,signal:d}=o,{data:f}=yield(0,D.Z)(s,{signal:d,headers:{accept:"application/json"},query:{...a,token:r}});return f})).apply(this,arguments)}function oe(s){return J.apply(this,arguments)}function J(){return(J=(0,b.Z)(function*(s,o={}){const r="application/vnd.oai.openapi+json;version=3.0",a=T(s.links,"service-desc",r);if(null==a)return C.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:d,customParameters:f,signal:E}=o,{data:m}=yield(0,D.Z)(a.href,{signal:E,headers:{accept:r},query:{...f,token:d}});return m})).apply(this,arguments)}function de(s){const o=/^http:\/\/www\.opengis.net\/def\/crs\/(?<authority>.*)\/(?<version>.*)\/(?<code>.*)$/i.exec(s),r=o?.groups;if(!r)return null;const{authority:a,code:d}=r;switch(a.toLowerCase()){case"ogc":switch(d.toLowerCase()){case"crs27":return h.Z.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return h.Z.WGS84.wkid;default:return null}case"esri":case"epsg":{const f=Number.parseInt(d,10);return Number.isNaN(f)?null:f}default:return null}}function fe(s,o,r){return ne.apply(this,arguments)}function ne(){return(ne=(0,b.Z)(function*(s,o,r){const a=yield ie(s,o,r);return(0,w.cn)(a)})).apply(this,arguments)}function ie(s,o,r){return e.apply(this,arguments)}function e(){return(e=(0,b.Z)(function*(s,o,r){const{collection:a,layerDefinition:d,maxRecordCount:f,queryParameters:{apiKey:E,customParameters:m},spatialReference:P,supportedCrs:Q}=s,{links:U}=a,Z=T(U,"items","application/geo+json")||T(U,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if(null==Z)throw new j.Z("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:g,num:se,start:u,timeExtent:M,where:ge}=o;if(o.objectIds)throw new j.Z("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");const he=h.Z.fromJSON(P),ee=o.outSpatialReference??he,ae=ee.isWGS84?null:n(ee,Q),Ee=function H(s,o){if(!function t(s){return null!=s&&"extent"===s.type}(s))return null;const{spatialReference:r}=s;if(!r||r.isWGS84)return{bbox:i(s)};const a=n(r,o);return null!=a?{bbox:i(s),"bbox-crs":a}:r.isWebMercator?{bbox:i((0,L.iV)(s,h.Z.WGS84))}:null}(g,Q),Te=function y(s){if(null==s)return null;const{start:o,end:r}=s;return`${null!=o?o.toISOString():".."}/${null!=r?r.toISOString():".."}`}(M),Pe=function S(s){return null!=s&&s&&"1=1"!==s?s:null}(ge),je=se??(null!=u&&void 0!==u?10:f),{data:V}=yield(0,D.Z)(Z.href,{...r,query:{...m,...Ee,crs:ae,datetime:Te,query:Pe,limit:je,startindex:u,token:E},headers:{accept:"application/geo+json"}});let le=!1;V.links&&(le=!!V.links.find(ce=>"next"===ce.rel)),!le&&Number.isInteger(V.numberMatched)&&Number.isInteger(V.numberReturned)&&(le=V.numberReturned<V.numberMatched);const{fields:Oe,geometryType:ue,hasZ:me,objectIdField:ye}=d,_e=(0,_.lG)(V,{geometryType:ue,hasZ:me,objectIdField:ye});if(!ae&&ee.isWebMercator)for(const X of _e)if(null!=X.geometry&&null!=ue){const ce=(0,w.di)(X.geometry,ue,me,!1);ce.spatialReference=h.Z.WGS84,X.geometry=(0,w.GH)((0,L.iV)(ce,ee))}for(const X of _e)X.objectId=X.attributes[ye];const Ie=ae||!ae&&ee.isWebMercator?ee.toJSON():v.Zn,k=new N.Z;return k.exceededTransferLimit=le,k.features=_e,k.fields=Oe,k.geometryType=ue,k.hasZ=me,k.objectIdFieldName=ye,k.spatialReference=Ie,k})).apply(this,arguments)}function n(s,o){const{isWebMercator:r,wkid:a}=s;if(!a)return null;const d=r?o[3857]??o[102100]??o[102113]??o[900913]:o[s.wkid];return d?`${R}${d}`:null}function i(s){if(null==s)return"";const{xmin:o,ymin:r,xmax:a,ymax:d}=s;return`${o},${r},${a},${d}`}function O(s){const o=s.extent?.spatial;if(!o)return null;const r=o.bbox[0],a=4===r.length;return{xmin:r[0],ymin:r[1],xmax:a?r[2]:r[3],ymax:a?r[3]:r[4],zmin:a?void 0:r[2],zmax:a?void 0:r[5],spatialReference:h.Z.WGS84.toJSON()}}function T(s,o,r){return s.find(a=>a.rel===o&&a.type===r)||s.find(a=>a.rel===o&&!a.type)}}}]);