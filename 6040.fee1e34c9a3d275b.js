"use strict";(self.webpackChunkjsapi_angular_cli=self.webpackChunkjsapi_angular_cli||[]).push([[6040],{51310:(Y,Z,u)=>{function g(h){return null!=x(h)||null!=D(h)}function A(h){return S.test(h)}function N(h){return x(h)??D(h)}function D(h){const p=new Date(h);return function L(h,p){if(Number.isNaN(h.getTime()))return!1;let y=!0;if(v&&/\d+\W*$/.test(p)){const T=p.match(/[a-zA-Z]{2,}/);if(T){let P=!1,f=0;for(;!P&&f<=T.length;)P=!O.test(T[f]),f++;y=!P}}return y}(p,h)?Number.isNaN(p.getTime())?null:p.getTime()-6e4*p.getTimezoneOffset():null}function x(h){const p=S.exec(h);if(!p?.groups)return null;const y=p.groups,T=+y.year,P=+y.month-1,f=+y.day,U=+(y.hours??"0"),q=+(y.minutes??"0"),B=+(y.seconds??"0");if(U>23||q>59||B>59)return null;const Q=y.ms??"0",$=Q?+Q.padEnd(3,"0").substring(0,3):0;let W;return W=y.isUTC||!y.offsetSign?Date.UTC(T,P,f,U,q,B,$):6e4*("+"===y.offsetSign?-1:1)*(60*+y.offsetHours+ +y.offsetMinutes)+Date.UTC(T,P,f,U,q,B,$),Number.isNaN(W)?null:W}u.d(Z,{mu:()=>A,of:()=>g,sG:()=>N});const S=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,O=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,v=!Number.isNaN(new Date("technology 10").getTime())},56040:(Y,Z,u)=>{u.r(Z),u.d(Z,{default:()=>W});var g=u(15861),A=u(66476),N=u(37636),D=u(57964),x=u(4703),S=u(79412),L=u(40637),O=u(33721),v=u(10842),h=u(53919),p=u(58829),y=u(36518),T=u(78642),P=u(60324),f=u(42726),U=u(40100),q=u(51217),B=u(85295),Q=u(764);const $={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};class W{constructor(){var s=this;this._queryEngine=null,this._snapshotFeatures=function(){var i=(0,g.Z)(function*(r){const a=yield s._fetch(r);return s._createFeatures(a)});return function(r){return i.apply(this,arguments)}}()}destroy(){this._queryEngine?.destroy(),this._queryEngine=this._createDefaultAttributes=null}load(s,i={}){var r=this;return(0,g.Z)(function*(){r._loadOptions={url:s.url,customParameters:s.customParameters};const a=[],[_]=yield Promise.all([s.url?r._fetch(i?.signal):null,r._checkProjection(s.spatialReference)]),d=(0,T.my)(_,{geometryType:s.geometryType}),m=s.fields||d.fields||[],I=null!=s.hasZ?s.hasZ:d.hasZ,F=d.geometryType;let M=s.objectIdField||d.objectIdFieldName||"__OBJECTID";const t=s.spatialReference||O.Zn;let e=s.timeInfo;m===d.fields&&d.unknownFields.length>0&&a.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:d.unknownFields}});const n=new U.Z(m);let o=n.get(M);o?("esriFieldTypeString"!==o.type&&(o.type="esriFieldTypeOID"),o.editable=!1,o.nullable=!1,M=o.name):(o={alias:M,name:M,type:"string"===d.objectIdFieldType?"esriFieldTypeString":"esriFieldTypeOID",editable:!1,nullable:!1},m.unshift(o));const l={};for(const c of m){if(null==c.name&&(c.name=c.alias),null==c.alias&&(c.alias=c.name),!c.name)throw new D.Z("geojson-layer:invalid-field-name","field name is missing",{field:c});if(!q.v.jsonValues.includes(c.type))throw new D.Z("geojson-layer:invalid-field-type",`invalid type for field "${c.name}"`,{field:c});if(c.name!==o.name){const j=(0,B.os)(c);void 0!==j&&(l[c.name]=j)}null==c.length&&(c.length=(0,B.ZR)(c))}if(e){if(e.startTimeField){const c=n.get(e.startTimeField);c?(e.startTimeField=c.name,c.type="esriFieldTypeDate"):e.startTimeField=null}if(e.endTimeField){const c=n.get(e.endTimeField);c?(e.endTimeField=c.name,c.type="esriFieldTypeDate"):e.endTimeField=null}if(e.trackIdField){const c=n.get(e.trackIdField);c?e.trackIdField=c.name:(e.trackIdField=null,a.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:e}}))}e.startTimeField||e.endTimeField||(a.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:e}}),e=null)}const b=F?(0,P.bU)(F):void 0,w=n.dateFields.length?{timeZoneIANA:Q.pt}:null,E={warnings:a,featureErrors:[],layerDefinition:{...$,drawingInfo:b??void 0,templates:(0,P.Hq)(l),extent:void 0,geometryType:F,objectIdField:M,fields:m,hasZ:!!I,timeInfo:e,dateFieldsTimeReference:w}};r._queryEngine=new y.q({fieldsIndex:U.Z.fromLayerJSON({fields:m,timeInfo:e,dateFieldsTimeReference:w}),geometryType:F,hasM:!1,hasZ:I,objectIdField:M,spatialReference:t,timeInfo:e,featureStore:new h.Z({geometryType:F,hasM:!1,hasZ:I}),cacheSpatialQueries:!0});const C=r._queryEngine.fieldsIndex.requiredFields.indexOf(o);C>-1&&r._queryEngine.fieldsIndex.requiredFields.splice(C,1),r._createDefaultAttributes=(0,P.Dm)(l,M);const R=yield r._createFeatures(_);r._objectIdGenerator=r._createObjectIdGenerator(r._queryEngine,R);const H=r._normalizeFeatures(R,E.featureErrors);r._queryEngine.featureStore.addMany(H);const{fullExtent:J,timeExtent:G}=yield r._queryEngine.fetchRecomputedExtents();if(E.layerDefinition.extent=J,G){const{start:c,end:j}=G;E.layerDefinition.timeInfo.timeExtent=[c,j]}return E})()}applyEdits(s){var i=this;return(0,g.Z)(function*(){const{spatialReference:r,geometryType:a}=i._queryEngine;return yield Promise.all([(0,f.b)(r,a),(0,p._W)(s.adds,r),(0,p._W)(s.updates,r)]),yield i._waitSnapshotComplete(),i._applyEdits(s)})()}queryFeatures(s={},i={}){var r=this;return(0,g.Z)(function*(){return yield r._waitSnapshotComplete(),r._queryEngine.executeQuery(s,i.signal)})()}queryFeatureCount(s={},i={}){var r=this;return(0,g.Z)(function*(){return yield r._waitSnapshotComplete(),r._queryEngine.executeQueryForCount(s,i.signal)})()}queryObjectIds(s={},i={}){var r=this;return(0,g.Z)(function*(){return yield r._waitSnapshotComplete(),r._queryEngine.executeQueryForIds(s,i.signal)})()}queryExtent(s={},i={}){var r=this;return(0,g.Z)(function*(){return yield r._waitSnapshotComplete(),r._queryEngine.executeQueryForExtent(s,i.signal)})()}querySnapping(s,i={}){var r=this;return(0,g.Z)(function*(){return yield r._waitSnapshotComplete(),r._queryEngine.executeQueryForSnapping(s,i.signal)})()}refresh(s){var i=this;return(0,g.Z)(function*(){i._loadOptions.customParameters=s,i._snapshotTask?.abort(),i._snapshotTask=(0,N.vr)(i._snapshotFeatures),i._snapshotTask.promise.then(_=>{i._queryEngine.featureStore.clear(),i._objectIdGenerator=i._createObjectIdGenerator(i._queryEngine,_);const d=i._normalizeFeatures(_);d&&i._queryEngine.featureStore.addMany(d)},_=>{i._queryEngine.featureStore.clear(),(0,S.D_)(_)||x.Z.getLogger("esri.layers.GeoJSONLayer").error(new D.Z("geojson-layer:refresh","An error occurred during refresh",{error:_}))}),yield i._waitSnapshotComplete();const{fullExtent:r,timeExtent:a}=yield i._queryEngine.fetchRecomputedExtents();return{extent:r,timeExtent:a}})()}_createFeatures(s){var i=this;return(0,g.Z)(function*(){if(null==s)return[];const{geometryType:r,hasZ:a,objectIdField:_}=i._queryEngine,d=(0,T.lG)(s,{geometryType:r,hasZ:a,objectIdField:_});if(!(0,O.fS)(i._queryEngine.spatialReference,O.Zn))for(const m of d)null!=m.geometry&&(m.geometry=(0,v.GH)((0,p.iV)((0,v.di)(m.geometry,i._queryEngine.geometryType,i._queryEngine.hasZ,!1),O.Zn,i._queryEngine.spatialReference)));return d})()}_waitSnapshotComplete(){var s=this;return(0,g.Z)(function*(){if(s._snapshotTask&&!s._snapshotTask.finished){try{yield s._snapshotTask.promise}catch{}return s._waitSnapshotComplete()}})()}_fetch(s){var i=this;return(0,g.Z)(function*(){const{url:r,customParameters:a}=i._loadOptions,_=(yield(0,A.Z)(r,{responseType:"json",query:{...a},signal:s})).data;return(0,T.O3)(_),_})()}_normalizeFeatures(s,i){const{objectIdField:r,fieldsIndex:a}=this._queryEngine,_=[];for(const d of s){const m=this._createDefaultAttributes(),I=(0,f.O0)(a,m,d.attributes,!0);I?i?.push(I):(this._assignObjectId(m,d.attributes,!0),d.attributes=m,d.objectId=m[r],_.push(d))}return _}_applyEdits(s){var i=this;return(0,g.Z)(function*(){const{adds:r,updates:a,deletes:_}=s,d={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(r?.length&&i._applyAddEdits(d,r),a?.length&&i._applyUpdateEdits(d,a),_?.length){for(const F of _)d.deleteResults.push((0,f.d1)(F));i._queryEngine.featureStore.removeManyById(_)}const{fullExtent:m,timeExtent:I}=yield i._queryEngine.fetchRecomputedExtents();return{extent:m,timeExtent:I,featureEditResults:d}})()}_applyAddEdits(s,i){const{addResults:r}=s,{geometryType:a,hasM:_,hasZ:d,objectIdField:m,spatialReference:I,featureStore:F,fieldsIndex:M}=this._queryEngine,t=[];for(const e of i){if(e.geometry&&a!==(0,L.Ji)(e.geometry)){r.push((0,f.av)("Incorrect geometry type."));continue}const n=this._createDefaultAttributes(),o=(0,f.O0)(M,n,e.attributes);if(o)r.push(o);else{if(this._assignObjectId(n,e.attributes),e.attributes=n,null!=e.uid&&(s.uidToObjectId[e.uid]=e.attributes[m]),null!=e.geometry){const l=e.geometry.spatialReference??I;e.geometry=(0,p.iV)((0,f.og)(e.geometry,l),l,I)}t.push(e),r.push((0,f.d1)(e.attributes[m]))}}F.addMany((0,v.Yn)([],t,a,d,_,m))}_applyUpdateEdits({updateResults:s},i){const{geometryType:r,hasM:a,hasZ:_,objectIdField:d,spatialReference:m,featureStore:I,fieldsIndex:F}=this._queryEngine;for(const M of i){const{attributes:t,geometry:e}=M,n=t?.[d];if(null==n){s.push((0,f.av)(`Identifier field ${d} missing`));continue}if(!I.has(n)){s.push((0,f.av)(`Feature with object id ${n} missing`));continue}const o=(0,v.EI)(I.getFeature(n),r,_,a);if(null!=e){if(r!==(0,L.Ji)(e)){s.push((0,f.av)("Incorrect geometry type."));continue}const l=e.spatialReference??m;o.geometry=(0,p.iV)((0,f.og)(e,l),l,m)}if(t){const l=(0,f.O0)(F,o.attributes,t);if(l){s.push(l);continue}}I.add((0,v.XA)(o,r,_,a,d)),s.push((0,f.d1)(n))}}_createObjectIdGenerator(s,i){const r=s.fieldsIndex.get(s.objectIdField);if("esriFieldTypeString"===r.type)return()=>r.name+"-"+Date.now().toString(16);let a=Number.NEGATIVE_INFINITY;for(const _ of i)_.objectId&&(a=Math.max(a,_.objectId));return a=Math.max(0,a)+1,()=>a++}_assignObjectId(s,i,r=!1){const a=this._queryEngine.objectIdField;s[a]=r&&a in i?i[a]:this._objectIdGenerator()}_checkProjection(s){return(0,g.Z)(function*(){try{yield(0,p._W)(O.Zn,s)}catch{throw new D.Z("geojson-layer","Projection not supported")}})()}}},78642:(Y,Z,u)=>{u.d(Z,{O3:()=>I,lG:()=>M,my:()=>F,q9:()=>O});var g=u(51310),A=u(57964),N=u(33721),D=u(83502),x=u(62209),S=u(85295);const L={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function O(t){return L[t]}function*v(t){switch(t.type){case"Feature":yield t;break;case"FeatureCollection":for(const e of t.features)e&&(yield e)}}function*h(t){if(t)switch(t.type){case"Point":yield t.coordinates;break;case"LineString":case"MultiPoint":yield*t.coordinates;break;case"MultiLineString":case"Polygon":for(const e of t.coordinates)yield*e;break;case"MultiPolygon":for(const e of t.coordinates)for(const n of e)yield*n}}function y(t){for(const e of t)if(e.length>2)return!0;return!1}function f(t){let e=0;for(let n=0;n<t.length;n++){const o=t[n],l=t[(n+1)%t.length];e+=o[0]*l[1]-l[0]*o[1]}return e<=0}function U(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]||t.push(e),t}function q(t,e,n){switch(e.type){case"LineString":return function B(t,e,n){return a(t,e.coordinates,n),t}(t,e,n);case"MultiLineString":return function Q(t,e,n){for(const o of e.coordinates)a(t,o,n);return t}(t,e,n);case"MultiPoint":return function $(t,e,n){return a(t,e.coordinates,n),t}(t,e,n);case"MultiPolygon":return function W(t,e,n){for(const o of e.coordinates){i(t,o[0],n);for(let l=1;l<o.length;l++)r(t,o[l],n)}return t}(t,e,n);case"Point":return function V(t,e,n){return d(t,e.coordinates,n),t}(t,e,n);case"Polygon":return function s(t,e,n){const o=e.coordinates;i(t,o[0],n);for(let l=1;l<o.length;l++)r(t,o[l],n);return t}(t,e,n)}}function i(t,e,n){const o=U(e);!function T(t){return!f(t)}(o)?a(t,o,n):_(t,o,n)}function r(t,e,n){const o=U(e);!function P(t){return f(t)}(o)?a(t,o,n):_(t,o,n)}function a(t,e,n){for(const o of e)d(t,o,n);t.lengths.push(e.length)}function _(t,e,n){for(let o=e.length-1;o>=0;o--)d(t,e[o],n);t.lengths.push(e.length)}function d(t,e,n){const[o,l,b]=e;t.coords.push(o,l),n.hasZ&&t.coords.push(b||0)}function m(t){switch(typeof t){case"string":return(0,g.mu)(t)?"esriFieldTypeDate":"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function I(t,e=4326){if(!t)throw new A.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==t.type&&"FeatureCollection"!==t.type)throw new A.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:t});const{crs:n}=t;if(!n)return;const o="string"==typeof n?n:"name"===n.type?n.properties.name:"EPSG"===n.type?n.properties.code:null,l=(0,N.oR)({wkid:e})?new RegExp(".*(CRS84H?|4326)$","i"):new RegExp(`.*(${e})$`,"i");if(!o||!l.test(o))throw new A.Z("geojson:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:n})}function F(t,e={}){const n=[],o=new Set,l=new Set;let b,w=!1,E=null,C=!1,{geometryType:R=null}=e,H=!1;for(const G of v(t)){const{geometry:c,properties:j,id:k}=G;if((!c||(R||(R=O(c.type)),O(c.type)===R))&&(w||(w=y(h(c))),C||(C=null!=k,C&&(b=typeof k,j&&(E=Object.keys(j).filter(z=>j[z]===k)))),j&&E&&C&&null!=k&&(E.length>1?E=E.filter(z=>j[z]===k):1===E.length&&(E=j[E[0]]===k?E:[])),!H&&j)){let z=!0;for(const K in j){if(o.has(K))continue;const X=j[K];if(null==X){z=!1,l.add(K);continue}const ee=m(X);if("unknown"===ee){l.add(K);continue}l.delete(K),o.add(K);const te=(0,S.q6)(K);te&&n.push({name:te,alias:K,type:ee})}H=z}}const J=(0,S.q6)(1===E?.length&&E[0]||null)??void 0;if(J)for(const G of n)if(G.name===J&&(0,S.H7)(G)){G.type="esriFieldTypeOID";break}return{fields:n,geometryType:R,hasZ:w,objectIdFieldName:J,objectIdFieldType:b,unknownFields:Array.from(l)}}function M(t,e){return Array.from(function*p(t,e={}){const{geometryType:n,objectIdField:o}=e;for(const l of t){const{geometry:b,properties:w,id:E}=l;if(b&&O(b.type)!==n)continue;const C=w||{};let R;o&&(R=C[o],null==E||R||(C[o]=R=E)),yield new D.u_(b?q(new x.Z,b,e):null,C,null,R??void 0)}}(v(t),e))}},60324:(Y,Z,u)=>{u.d(Z,{Dm:()=>O,Hq:()=>v,MS:()=>h,bU:()=>x});var g=u(14007),A=u(34222),N=u(85559),D=u(19579);function x(p){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===p||"esriGeometryMultipoint"===p?D.I4:"esriGeometryPolyline"===p?D.ET:D.lF}}}const S=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let L=1;function O(p,y){if((0,g.Z)("esri-csp-restrictions"))return()=>({[y]:null,...p});try{let T=`this.${y} = null;`;for(const f in p)T+=`this${S.test(f)?`.${f}`:`["${f}"]`} = ${JSON.stringify(p[f])};`;const P=new Function(`\n      return class AttributesClass$${L++} {\n        constructor() {\n          ${T};\n        }\n      }\n    `)();return()=>new P}catch{return()=>({[y]:null,...p})}}function v(p={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,A.d9)(p)}}]}function h(p,y){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:p},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:y,supportsDelete:y,supportsEditing:y,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:y,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:N.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:y,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}}}]);