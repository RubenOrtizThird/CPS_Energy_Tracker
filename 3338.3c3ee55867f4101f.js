"use strict";(self.webpackChunkjsapi_angular_cli=self.webpackChunkjsapi_angular_cli||[]).push([[3338],{68030:(St,wt,Z)=>{Z.d(wt,{J:()=>yt});var ct,K,at,J=Z(90104),vt={exports:{}};ct=vt,void 0!==(at=function(){function o(tt){this.message="JPEG error: "+tt}return(o.prototype=new Error).name="JpegError",o.constructor=o,o}(),K=function(){if(!self||!self.Uint8ClampedArray)return null;var o=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),tt=4017,dt=799,et=3406,ot=2276,W=1567,z=3784,G=5793,H=2896;function Q(){this.decodeTransform=null,this.colorTransform=-1}function ut(s,a){for(var u,e,t=0,i=[],n=16;n>0&&!s[n-1];)n--;i.push({children:[],index:0});var f,C=i[0];for(u=0;u<n;u++){for(e=0;e<s[u];e++){for((C=i.pop()).children[C.index]=a[t];C.index>0;)C=i.pop();for(C.index++,i.push(C);i.length<=u;)i.push(f={children:[],index:0}),C.children[C.index]=f.children,C=f;t++}u+1<n&&(i.push(f={children:[],index:0}),C.children[C.index]=f.children,C=f)}return i[0].children}function h(s,a,u){return 64*((s.blocksPerLine+1)*a+u)}function d(s,a,u,e,t,i,n,f,C){var N=u.mcusPerLine,D=a,L=0,j=0;function I(){if(j>0)return j--,L>>j&1;if(255===(L=s[a++])){var M=s[a++];if(M)throw new at("unexpected marker "+(L<<8|M).toString(16))}return j=7,L>>>7}function k(M){for(var F=M;;){if("number"==typeof(F=F[I()]))return F;if("object"!=typeof F)throw new at("invalid huffman sequence")}}function E(M){for(var F=0;M>0;)F=F<<1|I(),M--;return F}function V(M){if(1===M)return 1===I()?1:-1;var F=E(M);return F>=1<<M-1?F:F+(-1<<M)+1}var U,_=0,nt=0;function l(M,F,X,q,lt){F(M,h(M,(X/N|0)*M.v+q,X%N*M.h+lt))}var m,v,g,P,x,B,R=e.length;B=u.progressive?0===i?0===f?function r(M,F){var X=k(M.huffmanTableDC),q=0===X?0:V(X)<<C;M.blockData[F]=M.pred+=q}:function b(M,F){M.blockData[F]|=I()<<C}:0===f?function T(M,F){if(_>0)_--;else for(var X=i,q=n;X<=q;){var lt=k(M.huffmanTableAC),mt=15&lt,ft=lt>>4;if(0!==mt){var Ct=o[X+=ft];M.blockData[F+Ct]=V(mt)*(1<<C),X++}else{if(ft<15){_=E(ft)+(1<<ft)-1;break}X+=16}}}:function p(M,F){for(var X,q,lt=i,mt=n,ft=0;lt<=mt;){var Ct=o[lt];switch(nt){case 0:if(ft=(q=k(M.huffmanTableAC))>>4,0==(X=15&q))ft<15?(_=E(ft)+(1<<ft),nt=4):(ft=16,nt=1);else{if(1!==X)throw new at("invalid ACn encoding");U=V(X),nt=ft?2:3}continue;case 1:case 2:M.blockData[F+Ct]?M.blockData[F+Ct]+=I()<<C:0==--ft&&(nt=2===nt?3:0);break;case 3:M.blockData[F+Ct]?M.blockData[F+Ct]+=I()<<C:(M.blockData[F+Ct]=U<<C,nt=0);break;case 4:M.blockData[F+Ct]&&(M.blockData[F+Ct]+=I()<<C)}lt++}4===nt&&0==--_&&(nt=0)}:function O(M,F){var X=k(M.huffmanTableDC),q=0===X?0:V(X);M.blockData[F]=M.pred+=q;for(var lt=1;lt<64;){var mt=k(M.huffmanTableAC),ft=15&mt,Ct=mt>>4;if(0!==ft){var bt=o[lt+=Ct];M.blockData[F+bt]=V(ft),lt++}else{if(Ct<15)break;lt+=16}}};var $,rt,gt,it,M,X,Y=0;for(rt=1===R?e[0].blocksPerLine*e[0].blocksPerColumn:N*u.mcusPerColumn;Y<rt;){var st=t?Math.min(rt-Y,t):rt;for(v=0;v<R;v++)e[v].pred=0;if(_=0,1===R)for(m=e[0],x=0;x<st;x++)B(M=m,h(M,(X=Y)/M.blocksPerLine|0,X%M.blocksPerLine)),Y++;else for(x=0;x<st;x++){for(v=0;v<R;v++)for(gt=(m=e[v]).h,it=m.v,g=0;g<it;g++)for(P=0;P<gt;P++)l(m,B,Y,g,P);Y++}j=0,($=w(s,a))&&$.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+$.invalid),a=$.offset);var pt=$&&$.marker;if(!pt||pt<=65280)throw new at("marker was not found");if(!(pt>=65488&&pt<=65495))break;a+=2}return($=w(s,a))&&$.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+$.invalid),a=$.offset),a-D}function y(s,a,u){var e,t,i,n,f,C,N,A,D,L,j,I,k,E,V,O,r,b=s.quantizationTable,_=s.blockData;if(!b)throw new at("missing required Quantization Table.");for(var T=0;T<64;T+=8)D=_[a+T],D*=b[T],(L=_[a+T+1])|(j=_[a+T+2])|(I=_[a+T+3])|(k=_[a+T+4])|(E=_[a+T+5])|(V=_[a+T+6])|(O=_[a+T+7])?(t=(e=(e=G*D+128>>8)+(t=G*(k*=b[T+4])+128>>8)+1>>1)-t,r=(i=j*=b[T+2])*z+(n=V*=b[T+6])*W+128>>8,i=i*W-n*z+128>>8,N=(f=(f=H*((L*=b[T+1])-(O*=b[T+7]))+128>>8)+(N=(E*=b[T+5])<<4)+1>>1)-N,C=(A=(A=H*(L+O)+128>>8)+(C=(I*=b[T+3])<<4)+1>>1)-C,n=(e=e+(n=r)+1>>1)-n,i=(t=t+i+1>>1)-i,r=f*ot+A*et+2048>>12,f=f*et-A*ot+2048>>12,A=r,r=C*dt+N*tt+2048>>12,C=C*tt-N*dt+2048>>12,N=r,u[T]=e+A,u[T+7]=e-A,u[T+1]=t+N,u[T+6]=t-N,u[T+2]=i+C,u[T+5]=i-C,u[T+3]=n+f,u[T+4]=n-f):(u[T]=r=G*D+512>>10,u[T+1]=r,u[T+2]=r,u[T+3]=r,u[T+4]=r,u[T+5]=r,u[T+6]=r,u[T+7]=r);for(var U=0;U<8;++U)D=u[U],(L=u[U+8])|(j=u[U+16])|(I=u[U+24])|(k=u[U+32])|(E=u[U+40])|(V=u[U+48])|(O=u[U+56])?(t=(e=4112+((e=G*D+2048>>12)+(t=G*k+2048>>12)+1>>1))-t,r=(i=j)*z+(n=V)*W+2048>>12,i=i*W-n*z+2048>>12,n=r,N=(f=(f=H*(L-O)+2048>>12)+(N=E)+1>>1)-N,C=(A=(A=H*(L+O)+2048>>12)+(C=I)+1>>1)-C,r=f*ot+A*et+2048>>12,f=f*et-A*ot+2048>>12,A=r,r=C*dt+N*tt+2048>>12,C=C*tt-N*dt+2048>>12,D=(D=(e=e+n+1>>1)+A)<16?0:D>=4080?255:D>>4,L=(L=(t=t+i+1>>1)+(N=r))<16?0:L>=4080?255:L>>4,j=(j=(i=t-i)+C)<16?0:j>=4080?255:j>>4,I=(I=(n=e-n)+f)<16?0:I>=4080?255:I>>4,k=(k=n-f)<16?0:k>=4080?255:k>>4,E=(E=i-C)<16?0:E>=4080?255:E>>4,V=(V=t-N)<16?0:V>=4080?255:V>>4,O=(O=e-A)<16?0:O>=4080?255:O>>4,_[a+U]=D,_[a+U+8]=L,_[a+U+16]=j,_[a+U+24]=I,_[a+U+32]=k,_[a+U+40]=E,_[a+U+48]=V,_[a+U+56]=O):(r=(r=G*D+8192>>14)<-2040?0:r>=2024?255:r+2056>>4,_[a+U]=r,_[a+U+8]=r,_[a+U+16]=r,_[a+U+24]=r,_[a+U+32]=r,_[a+U+40]=r,_[a+U+48]=r,_[a+U+56]=r)}function S(s,a){for(var u=a.blocksPerLine,e=a.blocksPerColumn,t=new Int16Array(64),i=0;i<e;i++)for(var n=0;n<u;n++)y(a,h(a,i,n),t);return a.blockData}function w(s,a,u){function e(C){return s[C]<<8|s[C+1]}var t=s.length-1,i=u<a?u:a;if(a>=t)return null;var n=e(a);if(n>=65472&&n<=65534)return{invalid:null,marker:n,offset:a};for(var f=e(i);!(f>=65472&&f<=65534);){if(++i>=t)return null;f=e(i)}return{invalid:n.toString(16),marker:f,offset:i}}return Q.prototype={parse:function(s){function a(){var M=s[n]<<8|s[n+1];return n+=2,M}function u(){var M=a(),F=n+M-2,X=w(s,F,n);X&&X.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+X.invalid),F=X.offset);var q=s.subarray(n,F);return n+=q.length,q}function e(M){for(var F=Math.ceil(M.samplesPerLine/8/M.maxH),X=Math.ceil(M.scanLines/8/M.maxV),q=0;q<M.components.length;q++){x=M.components[q];var lt=Math.ceil(Math.ceil(M.samplesPerLine/8)*x.h/M.maxH),mt=Math.ceil(Math.ceil(M.scanLines/8)*x.v/M.maxV);x.blockData=new Int16Array(X*x.v*64*(F*x.h+1)),x.blocksPerLine=lt,x.blocksPerColumn=mt}M.mcusPerLine=F,M.mcusPerColumn=X}var t,i,n=0,f=null,C=null,N=[],A=[],D=[],L=a();if(65496!==L)throw new at("SOI not found");for(L=a();65497!==L;){var j,I,k;switch(L){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var E=u();65504===L&&74===E[0]&&70===E[1]&&73===E[2]&&70===E[3]&&0===E[4]&&(f={version:{major:E[5],minor:E[6]},densityUnits:E[7],xDensity:E[8]<<8|E[9],yDensity:E[10]<<8|E[11],thumbWidth:E[12],thumbHeight:E[13],thumbData:E.subarray(14,14+3*E[12]*E[13])}),65518===L&&65===E[0]&&100===E[1]&&111===E[2]&&98===E[3]&&101===E[4]&&(C={version:E[5]<<8|E[6],flags0:E[7]<<8|E[8],flags1:E[9]<<8|E[10],transformCode:E[11]});break;case 65499:for(var V=a()+n-2;n<V;){var O=s[n++],r=new Uint16Array(64);if(O>>4){if(O>>4!=1)throw new at("DQT - invalid table spec");for(I=0;I<64;I++)r[o[I]]=a()}else for(I=0;I<64;I++)r[o[I]]=s[n++];N[15&O]=r}break;case 65472:case 65473:case 65474:if(t)throw new at("Only single frame JPEGs supported");a(),(t={}).extended=65473===L,t.progressive=65474===L,t.precision=s[n++],t.scanLines=a(),t.samplesPerLine=a(),t.components=[],t.componentIds={};var b,_=s[n++],T=0,U=0;for(j=0;j<_;j++){b=s[n];var nt=s[n+1]>>4,p=15&s[n+1];T<nt&&(T=nt),U<p&&(U=p),k=t.components.push({h:nt,v:p,quantizationId:s[n+2],quantizationTable:null}),t.componentIds[b]=k-1,n+=3}t.maxH=T,t.maxV=U,e(t);break;case 65476:var c=a();for(j=2;j<c;){var m=s[n++],v=new Uint8Array(16),g=0;for(I=0;I<16;I++,n++)g+=v[I]=s[n];var P=new Uint8Array(g);for(I=0;I<g;I++,n++)P[I]=s[n];j+=17+g,(m>>4?A:D)[15&m]=ut(v,P)}break;case 65501:a(),i=a();break;case 65498:a();var x,B=s[n++],R=[];for(j=0;j<B;j++){var $=t.componentIds[s[n++]],rt=s[n++];(x=t.components[$]).huffmanTableDC=D[rt>>4],x.huffmanTableAC=A[15&rt],R.push(x)}var gt=s[n++],it=s[n++],Y=s[n++],st=d(s,n,t,R,i,gt,it,Y>>4,15&Y);n+=st;break;case 65535:255!==s[n]&&n--;break;default:if(255===s[n-3]&&s[n-2]>=192&&s[n-2]<=254){n-=3;break}throw new at("unknown marker "+L.toString(16))}L=a()}for(this.width=t.samplesPerLine,this.height=t.scanLines,this.jfif=f,this.eof=n,this.adobe=C,this.components=[],j=0;j<t.components.length;j++){var pt=N[(x=t.components[j]).quantizationId];pt&&(x.quantizationTable=pt),this.components.push({output:S(0,x),scaleX:x.h/t.maxH,scaleY:x.v/t.maxV,blocksPerLine:x.blocksPerLine,blocksPerColumn:x.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(s,a){var u,e,t,i,n,f,C,N,A,D,L,j=this.width/s,I=this.height/a,k=0,E=this.components.length,V=s*a*E,O=new Uint8ClampedArray(V),r=new Uint32Array(s),b=4294967288;for(C=0;C<E;C++){for(e=(u=this.components[C]).scaleX*j,t=u.scaleY*I,k=C,L=u.output,i=u.blocksPerLine+1<<3,n=0;n<s;n++)r[n]=((N=0|n*e)&b)<<3|7&N;for(f=0;f<a;f++)for(D=i*((N=0|f*t)&b)|(7&N)<<3,n=0;n<s;n++)O[k]=L[D+r[n]],k+=E}var _=this.decodeTransform;if(_)for(C=0;C<V;)for(N=0,A=0;N<E;N++,C++,A+=2)O[C]=(O[C]*_[A]>>8)+_[A+1];return O},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this.colorTransform:1===this.colorTransform},_convertYccToRgb:function(s){for(var a,u,e,t=0,i=s.length;t<i;t+=3)u=s[t+1],s[t]=(a=s[t])-179.456+1.402*(e=s[t+2]),s[t+1]=a+135.459-.344*u-.714*e,s[t+2]=a-226.816+1.772*u;return s},_convertYcckToRgb:function(s){for(var a,u,e,t,i=0,n=0,f=s.length;n<f;n+=4)s[i++]=(u=s[n+1])*(-660635669420364e-19*u+.000437130475926232*(e=s[n+2])-54080610064599e-18*(a=s[n])+.00048449797120281*(t=s[n+3])-.154362151871126)-122.67195406894+e*(-.000957964378445773*e+.000817076911346625*a-.00477271405408747*t+1.53380253221734)+a*(.000961250184130688*a-.00266257332283933*t+.48357088451265)+t*(-.000336197177618394*t+.484791561490776),s[i++]=107.268039397724+u*(219927104525741e-19*u-.000640992018297945*e+.000659397001245577*a+.000426105652938837*t-.176491792462875)+e*(-.000778269941513683*e+.00130872261408275*a+.000770482631801132*t-.151051492775562)+a*(.00126935368114843*a-.00265090189010898*t+.25802910206845)+t*(-.000318913117588328*t-.213742400323665),s[i++]=u*(-.000570115196973677*u-263409051004589e-19*e+.0020741088115012*a-.00288260236853442*t+.814272968359295)-20.810012546947+e*(-153496057440975e-19*e-.000132689043961446*a+.000560833691242812*t-.195152027534049)+a*(.00174418132927582*a-.00255243321439347*t+.116935020465145)+t*(-.000343531996510555*t+.24165260232407);return s},_convertYcckToCmyk:function(s){for(var a,u,e,t=0,i=s.length;t<i;t+=4)u=s[t+1],s[t]=434.456-(a=s[t])-1.402*(e=s[t+2]),s[t+1]=119.541-a+.344*u+.714*e,s[t+2]=481.816-a-1.772*u;return s},_convertCmykToRgb:function(s){for(var a,u,e,t,i=0,n=1/255,f=0,C=s.length;f<C;f+=4)s[i++]=255+(a=s[f]*n)*(-4.387332384609988*a+54.48615194189176*(u=s[f+1]*n)+18.82290502165302*(e=s[f+2]*n)+212.25662451639585*(t=s[f+3]*n)-285.2331026137004)+u*(1.7149763477362134*u-5.6096736904047315*e-17.873870861415444*t-5.497006427196366)+e*(-2.5217340131683033*e-21.248923337353073*t+17.5119270841813)-t*(21.86122147463605*t+189.48180835922747),s[i++]=255+a*(8.841041422036149*a+60.118027045597366*u+6.871425592049007*e+31.159100130055922*t-79.2970844816548)+u*(-15.310361306967817*u+17.575251261109482*e+131.35250912493976*t-190.9453302588951)+e*(4.444339102852739*e+9.8632861493405*t-24.86741582555878)-t*(20.737325471181034*t+187.80453709719578),s[i++]=255+a*(.8842522430003296*a+8.078677503112928*u+30.89978309703729*e-.23883238689178934*t-14.183576799673286)+u*(10.49593273432072*u+63.02378494754052*e+50.606957656360734*t-112.23884253719248)+e*(.03296041114873217*e+115.60384449646641*t-193.58209356861505)-t*(22.33816807309886*t+180.12613974708367);return s},getData:function(s,a,u){if(this.numComponents>4)throw new at("Unsupported color mode");var e=this._getLinearizedBlockData(s,a);if(1===this.numComponents&&u){for(var t=e.length,i=new Uint8ClampedArray(3*t),n=0,f=0;f<t;f++){var C=e[f];i[n++]=C,i[n++]=C,i[n++]=C}return i}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(e);if(4===this.numComponents){if(this._isColorConversionNeeded())return u?this._convertYcckToRgb(e):this._convertYcckToCmyk(e);if(u)return this._convertCmykToRgb(e)}return e}},Q}())&&(ct.exports=K);const yt=(0,J.g)(vt.exports)},46528:(St,wt,Z)=>{Z.d(wt,{Z:()=>yt});var ct,ht,K,J=Z(90104),vt={exports:{}};ht=vt,ct=function(){function at(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return at.prototype={ensureBuffer:function(o){var tt=this.buffer,dt=tt?tt.byteLength:0;if(o<dt)return tt;for(var et=512;et<o;)et<<=1;for(var ot=new Uint8Array(et),W=0;W<dt;++W)ot[W]=tt[W];return this.buffer=ot},getByte:function(){for(var o=this.pos;this.bufferLength<=o;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(o){var tt=this.pos;if(o){this.ensureBuffer(tt+o);for(var dt=tt+o;!this.eof&&this.bufferLength<dt;)this.readBlock();var et=this.bufferLength;dt>et&&(dt=et)}else{for(;!this.eof;)this.readBlock();dt=this.bufferLength}return this.pos=dt,this.buffer.subarray(tt,dt)},lookChar:function(){for(var o=this.pos;this.bufferLength<=o;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var o=this.pos;this.bufferLength<=o;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(o,tt,dt){for(var et=o+tt;this.bufferLength<=et&&!this.eof;)this.readBlock();return new Stream(this.buffer,o,tt,dt)},skip:function(o){o||(o=1),this.pos+=o},reset:function(){this.pos=0}},at}(),void 0!==(K=function(){if(!self||!self.Uint32Array)return null;var at=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),tt=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),dt=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],et=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function ot(z){throw new Error(z)}function W(z){var G=0,H=z[G++],Q=z[G++];-1!=H&&-1!=Q||ot("Invalid header in flate stream"),8!=(15&H)&&ot("Unknown compression method in flate stream"),((H<<8)+Q)%31!=0&&ot("Bad FCHECK in flate stream"),32&Q&&ot("FDICT bit set in flate stream"),this.bytes=z,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,ct.call(this)}return(W.prototype=Object.create(ct.prototype)).getBits=function(z){for(var G,H=this.codeSize,Q=this.codeBuf,ut=this.bytes,h=this.bytesPos;H<z;)void 0===(G=ut[h++])&&ot("Bad encoding in flate stream"),Q|=G<<H,H+=8;return G=Q&(1<<z)-1,this.codeBuf=Q>>z,this.codeSize=H-=z,this.bytesPos=h,G},W.prototype.getCode=function(z){for(var G=z[0],H=z[1],Q=this.codeSize,ut=this.codeBuf,h=this.bytes,d=this.bytesPos;Q<H;){var y;void 0===(y=h[d++])&&ot("Bad encoding in flate stream"),ut|=y<<Q,Q+=8}var S=G[ut&(1<<H)-1],w=S>>16,s=65535&S;return(0==Q||Q<w||0==w)&&ot("Bad encoding in flate stream"),this.codeBuf=ut>>w,this.codeSize=Q-w,this.bytesPos=d,s},W.prototype.generateHuffmanTable=function(z){for(var G=z.length,H=0,Q=0;Q<G;++Q)z[Q]>H&&(H=z[Q]);for(var ut=1<<H,h=new Uint32Array(ut),d=1,y=0,S=2;d<=H;++d,y<<=1,S<<=1)for(var w=0;w<G;++w)if(z[w]==d){var s=0,a=y;for(Q=0;Q<d;++Q)s=s<<1|1&a,a>>=1;for(Q=s;Q<ut;Q+=S)h[Q]=d<<16|w;++y}return[h,H]},W.prototype.readBlock=function(){function z(r,b,_,T,U){for(var nt=r.getBits(_)+T;nt-- >0;)b[S++]=U}var G=this.getBits(3);if(1&G&&(this.eof=!0),0!=(G>>=1)){var H,Q;if(1==G)H=dt,Q=et;else if(2==G){for(var ut=this.getBits(5)+257,h=this.getBits(5)+1,d=this.getBits(4)+4,y=Array(at.length),S=0;S<d;)y[at[S++]]=this.getBits(3);for(var w=this.generateHuffmanTable(y),s=0,a=(S=0,ut+h),u=new Array(a);S<a;){var e=this.getCode(w);16==e?z(this,u,2,3,s):17==e?z(this,u,3,3,s=0):18==e?z(this,u,7,11,s=0):u[S++]=s=e}H=this.generateHuffmanTable(u.slice(0,ut)),Q=this.generateHuffmanTable(u.slice(ut,a))}else ot("Unknown block type in flate stream");for(var t=(E=this.buffer)?E.length:0,i=this.bufferLength;;){var n=this.getCode(H);if(n<256)i+1>=t&&(t=(E=this.ensureBuffer(i+1)).length),E[i++]=n;else{if(256==n)return void(this.bufferLength=i);var f=(n=o[n-=257])>>16;f>0&&(f=this.getBits(f)),s=(65535&n)+f,n=this.getCode(Q),(f=(n=tt[n])>>16)>0&&(f=this.getBits(f));var C=(65535&n)+f;i+s>=t&&(t=(E=this.ensureBuffer(i+s)).length);for(var N=0;N<s;++N,++i)E[i]=E[i-C]}}}else{var A,D=this.bytes,L=this.bytesPos;void 0===(A=D[L++])&&ot("Bad block header in flate stream");var j=A;void 0===(A=D[L++])&&ot("Bad block header in flate stream"),j|=A<<8,void 0===(A=D[L++])&&ot("Bad block header in flate stream");var I=A;void 0===(A=D[L++])&&ot("Bad block header in flate stream"),(I|=A<<8)!=(65535&~j)&&ot("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var k=this.bufferLength,E=this.ensureBuffer(k+j),V=k+j;this.bufferLength=V;for(var O=k;O<V;++O){if(void 0===(A=D[L++])){this.eof=!0;break}E[O]=A}this.bytesPos=L}},W}())&&(ht.exports=K);const yt=(0,J.g)(vt.exports)},65665:(St,wt,Z)=>{Z.d(wt,{Z:()=>s});var et,J=Z(50484),ct=Z(89317),ht=Z(34222),K=Z(80543),yt=(Z(1535),Z(10141)),at=Z(26894),o=Z(43814);function ot(a){return a=Number(a),isNaN(a)?void 0:a}Z(57678),Z(14007);let W=et=class extends ct.wq{constructor(){super(...arguments),this.name=null,this.minWavelength=void 0,this.maxWavelength=void 0,this.radianceBias=void 0,this.radianceGain=void 0,this.reflectanceBias=void 0,this.reflectanceGain=void 0,this.solarIrradiance=void 0}clone(){return new et({name:this.name,minWavelength:this.minWavelength,maxWavelength:this.maxWavelength,radianceBias:this.radianceBias,radianceGain:this.radianceGain,reflectanceBias:this.reflectanceBias,reflectanceGain:this.reflectanceGain,solarIrradiance:this.solarIrradiance})}};(0,J._)([(0,K.Cb)({json:{name:"BandName",write:!0}})],W.prototype,"name",void 0),(0,J._)([(0,K.Cb)({json:{name:"WavelengthMin",read:{reader:ot},write:!0}})],W.prototype,"minWavelength",void 0),(0,J._)([(0,K.Cb)({json:{name:"WavelengthMax",read:{reader:ot},write:!0}})],W.prototype,"maxWavelength",void 0),(0,J._)([(0,K.Cb)({json:{name:"RadianceBias",read:{reader:ot},write:!0}})],W.prototype,"radianceBias",void 0),(0,J._)([(0,K.Cb)({json:{name:"RadianceGain",read:{reader:ot},write:!0}})],W.prototype,"radianceGain",void 0),(0,J._)([(0,K.Cb)({json:{name:"ReflectanceBias",read:{reader:ot},write:!0}})],W.prototype,"reflectanceBias",void 0),(0,J._)([(0,K.Cb)({json:{name:"ReflectanceGain",read:{reader:ot},write:!0}})],W.prototype,"reflectanceGain",void 0),(0,J._)([(0,K.Cb)({json:{name:"SolarIrradiance",read:{reader:ot},write:!0}})],W.prototype,"solarIrradiance",void 0),W=et=(0,J._)([(0,yt.j)("esri.layers.support.RasterBandInfo")],W);const z=W;var Q,G=Z(62185),H=Z(7547);function ut(a){return a=Number(a),isNaN(a)?void 0:a}let h=Q=class extends ct.wq{constructor(){super(...arguments),this.acquisitionDate=void 0,this.cloudCover=void 0,this.productName=void 0,this.sensorName=null,this.sensorAzimuth=void 0,this.sensorElevation=void 0,this.sunAzimuth=void 0,this.sunElevation=void 0}readAcquisitionDate(a){return new Date(a)}writeAcquisitionDate(a,u){u.AcquisitionDate=a.getTime()}clone(){return new Q({acquisitionDate:this.acquisitionDate,cloudCover:this.cloudCover,productName:this.productName,sensorName:this.sensorName,sensorAzimuth:this.sensorAzimuth,sensorElevation:this.sensorElevation,sunAzimuth:this.sunAzimuth,sunElevation:this.sunElevation})}};(0,J._)([(0,K.Cb)({json:{name:"AcquisitionDate",write:!0}})],h.prototype,"acquisitionDate",void 0),(0,J._)([(0,G.r)("acquisitionDate")],h.prototype,"readAcquisitionDate",null),(0,J._)([(0,H.c)("acquisitionDate")],h.prototype,"writeAcquisitionDate",null),(0,J._)([(0,K.Cb)({json:{name:"CloudCover",read:{reader:ut},write:!0}})],h.prototype,"cloudCover",void 0),(0,J._)([(0,K.Cb)({json:{name:"ProductName",write:!0}})],h.prototype,"productName",void 0),(0,J._)([(0,K.Cb)({json:{name:"SensorName",write:!0}})],h.prototype,"sensorName",void 0),(0,J._)([(0,K.Cb)({json:{name:"SensorAzimuth",read:{reader:ut},write:!0}})],h.prototype,"sensorAzimuth",void 0),(0,J._)([(0,K.Cb)({json:{name:"SensorElevation",read:{reader:ut},write:!0}})],h.prototype,"sensorElevation",void 0),(0,J._)([(0,K.Cb)({json:{name:"SunAzimuth",read:{reader:ut},write:!0}})],h.prototype,"sunAzimuth",void 0),(0,J._)([(0,K.Cb)({json:{name:"SunElevation",read:{reader:ut},write:!0}})],h.prototype,"sunElevation",void 0),h=Q=(0,J._)([(0,yt.j)("esri.layers.support.RasterSensorInfo")],h);const d=h;var S,y=Z(82665);let w=S=class extends ct.wq{constructor(a){super(a),this.attributeTable=null,this.bandCount=null,this.colormap=null,this.extent=null,this.format=void 0,this.height=null,this.width=null,this.histograms=null,this.keyProperties={},this.multidimensionalInfo=null,this.noDataValue=null,this.pixelSize=null,this.pixelType=null,this.isPseudoSpatialReference=!1,this.spatialReference=null,this.statistics=null,this.storageInfo=null,this.transform=null}get bandInfos(){const a=this.keyProperties.BandProperties,{bandCount:u}=this;if(!a?.length||a.length<u){const t=[];for(let i=1;i<=u;i++)t.push(new z({name:"band_"+i}));return t}const e=a.map(t=>z.fromJSON(t));for(let t=0;t<e.length;t++)e[t].name=e[t].name||"band_"+(t+1);return e}get dataType(){const a=this.keyProperties?.DataType?.toLowerCase()??"generic";return"stdtime"===a?"standard-time":a}get nativeExtent(){return this._get("nativeExtent")||this.extent}set nativeExtent(a){a&&this._set("nativeExtent",a)}get nativePixelSize(){if(null==this.transform||!this.transform.affectsPixelSize)return this.pixelSize;const a=this.nativeExtent;return{x:a.width/this.width,y:a.height/this.height}}get hasMultidimensionalTranspose(){return!!this.storageInfo?.transposeInfo}get sensorInfo(){if(this.keyProperties?.SensorName)return d.fromJSON(this.keyProperties)}clone(){return new S({attributeTable:(0,ht.d9)(this.attributeTable),bandCount:this.bandCount,colormap:(0,ht.d9)(this.colormap),extent:(0,ht.d9)(this.extent),nativePixelSize:(0,ht.d9)(this.nativePixelSize),format:this.format,height:this.height,width:this.width,histograms:(0,ht.d9)(this.histograms),keyProperties:(0,ht.d9)(this.keyProperties),multidimensionalInfo:(0,ht.d9)(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:(0,ht.d9)(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:(0,ht.d9)(this.spatialReference),statistics:(0,ht.d9)(this.statistics),storageInfo:(0,ht.d9)(this.storageInfo),transform:(0,ht.d9)(this.transform)})}};(0,J._)([(0,K.Cb)({json:{write:!0}})],w.prototype,"attributeTable",void 0),(0,J._)([(0,K.Cb)({json:{write:!0}})],w.prototype,"bandCount",void 0),(0,J._)([(0,K.Cb)({readOnly:!0})],w.prototype,"bandInfos",null),(0,J._)([(0,K.Cb)({json:{write:!0}})],w.prototype,"colormap",void 0),(0,J._)([(0,K.Cb)({type:String,readOnly:!0})],w.prototype,"dataType",null),(0,J._)([(0,K.Cb)({type:at.Z,json:{write:!0}})],w.prototype,"extent",void 0),(0,J._)([(0,K.Cb)({type:at.Z,json:{write:!0}})],w.prototype,"nativeExtent",null),(0,J._)([(0,K.Cb)({json:{write:!0}})],w.prototype,"nativePixelSize",null),(0,J._)([(0,K.Cb)({json:{write:!0}})],w.prototype,"format",void 0),(0,J._)([(0,K.Cb)({json:{write:!0}})],w.prototype,"height",void 0),(0,J._)([(0,K.Cb)({json:{write:!0}})],w.prototype,"width",void 0),(0,J._)([(0,K.Cb)({json:{write:!0}})],w.prototype,"hasMultidimensionalTranspose",null),(0,J._)([(0,K.Cb)({json:{write:!0}})],w.prototype,"histograms",void 0),(0,J._)([(0,K.Cb)({json:{write:!0}})],w.prototype,"keyProperties",void 0),(0,J._)([(0,K.Cb)({json:{write:!0}})],w.prototype,"multidimensionalInfo",void 0),(0,J._)([(0,K.Cb)({json:{write:!0}})],w.prototype,"noDataValue",void 0),(0,J._)([(0,K.Cb)({json:{write:!0}})],w.prototype,"pixelSize",void 0),(0,J._)([(0,K.Cb)({json:{write:!0}})],w.prototype,"pixelType",void 0),(0,J._)([(0,K.Cb)()],w.prototype,"isPseudoSpatialReference",void 0),(0,J._)([(0,K.Cb)({readOnly:!0})],w.prototype,"sensorInfo",null),(0,J._)([(0,K.Cb)({type:o.Z,json:{write:!0}})],w.prototype,"spatialReference",void 0),(0,J._)([(0,K.Cb)({json:{write:!0}})],w.prototype,"statistics",void 0),(0,J._)([(0,K.Cb)({type:y.Z,json:{write:!0}})],w.prototype,"storageInfo",void 0),(0,J._)([(0,K.Cb)({json:{write:!0}})],w.prototype,"transform",void 0),w=S=(0,J._)([(0,yt.j)("esri.layers.support.RasterInfo")],w);const s=w},82665:(St,wt,Z)=>{Z.d(wt,{Z:()=>dt});var o,J=Z(50484),ct=Z(89317),ht=Z(34222),K=Z(80543),yt=(Z(1535),Z(10141)),at=Z(85039);let tt=o=class extends ct.wq{constructor(){super(...arguments),this.blockWidth=void 0,this.blockHeight=void 0,this.compression=null,this.origin=null,this.firstPyramidLevel=null,this.maximumPyramidLevel=null,this.pyramidScalingFactor=2,this.pyramidBlockWidth=null,this.pyramidBlockHeight=null,this.isVirtualTileInfo=!1,this.tileInfo=null,this.transposeInfo=null,this.blockBoundary=null}clone(){return new o({blockWidth:this.blockWidth,blockHeight:this.blockHeight,compression:this.compression,origin:(0,ht.d9)(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:(0,ht.d9)(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:(0,ht.d9)(this.tileInfo),transposeInfo:(0,ht.d9)(this.transposeInfo),blockBoundary:(0,ht.d9)(this.blockBoundary)})}};(0,J._)([(0,K.Cb)({type:Number,json:{write:!0}})],tt.prototype,"blockWidth",void 0),(0,J._)([(0,K.Cb)({type:Number,json:{write:!0}})],tt.prototype,"blockHeight",void 0),(0,J._)([(0,K.Cb)({type:String,json:{write:!0}})],tt.prototype,"compression",void 0),(0,J._)([(0,K.Cb)({type:at.Z,json:{write:!0}})],tt.prototype,"origin",void 0),(0,J._)([(0,K.Cb)({type:Number,json:{write:!0}})],tt.prototype,"firstPyramidLevel",void 0),(0,J._)([(0,K.Cb)({type:Number,json:{write:!0}})],tt.prototype,"maximumPyramidLevel",void 0),(0,J._)([(0,K.Cb)({json:{write:!0}})],tt.prototype,"pyramidResolutions",void 0),(0,J._)([(0,K.Cb)({type:Number,json:{write:!0}})],tt.prototype,"pyramidScalingFactor",void 0),(0,J._)([(0,K.Cb)({type:Number,json:{write:!0}})],tt.prototype,"pyramidBlockWidth",void 0),(0,J._)([(0,K.Cb)({type:Number,json:{write:!0}})],tt.prototype,"pyramidBlockHeight",void 0),(0,J._)([(0,K.Cb)({type:Boolean,json:{write:!0}})],tt.prototype,"isVirtualTileInfo",void 0),(0,J._)([(0,K.Cb)({json:{write:!0}})],tt.prototype,"tileInfo",void 0),(0,J._)([(0,K.Cb)()],tt.prototype,"transposeInfo",void 0),(0,J._)([(0,K.Cb)()],tt.prototype,"blockBoundary",void 0),tt=o=(0,J._)([(0,yt.j)("esri.layers.support.RasterStorageInfo")],tt);const dt=tt},86701:(St,wt,Z)=>{function J(ct,ht){let K=0,vt="",yt=0,at=0;const o=ct.length;for(;K<o;)at=ct[K++],yt=at>>4,yt<8?yt=1:15===yt?(yt=4,at=(7&at)<<18|(63&ct[K++])<<12|(63&ct[K++])<<6|63&ct[K++]):14===yt?(yt=3,at=(15&at)<<12|(63&ct[K++])<<6|63&ct[K++]):(yt=2,at=(31&at)<<6|63&ct[K++]),(0!==at||ht)&&(vt+=String.fromCharCode(at));return vt}Z.d(wt,{f:()=>J})},73407:(St,wt,Z)=>{Z.d(wt,{Jx:()=>ot,zD:()=>vt});var J=Z(98930);const ct=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-34027999387901484e22,34027999387901484e22]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-17976931348623157e292,17976931348623157e292]}];let ht=null,K=null;function vt(){return ht||(ht=Z.e(9472).then(Z.bind(Z,99472)).then(z=>z.l).then(({default:z})=>z({locateFile:G=>(0,J.V)(`esri/layers/support/rasterFormats/${G}`)})).then(z=>{(function dt(z){const{_malloc:G,_free:H,_lerc_getBlobInfo:Q,_lerc_getDataRanges:ut,_lerc_decode_4D:h,asm:d}=z;let y;const S=Object.values(d).find(s=>s&&"buffer"in s&&s.buffer===z.HEAPU8.buffer),w=s=>{const a=s.map(i=>function o(z){return 16+(z>>3<<3)}(i)),u=a.reduce((i,n)=>i+n),e=G(u);y=new Uint8Array(S.buffer);let t=a[0];a[0]=e;for(let i=1;i<a.length;i++){const n=a[i];a[i]=a[i-1]+t,t=n}return a};at.getBlobInfo=s=>{const e=new Uint8Array(48),t=new Uint8Array(24),[i,n,f]=w([s.length,e.length,t.length]);y.set(s,i),y.set(e,n),y.set(t,f);let C=Q(i,s.length,n,f,12,3);if(C)throw H(i),new Error(`lerc-getBlobInfo: error code is ${C}`);y=new Uint8Array(S.buffer),tt(y,n,e),tt(y,f,t);const N=new Uint32Array(e.buffer),A=new Float64Array(t.buffer),[D,L,,j,I,k,E,V,O,r,b]=N,_={version:D,depthCount:r,width:j,height:I,validPixelCount:E,bandCount:k,blobSize:V,maskCount:O,dataType:L,minValue:A[0],maxValue:A[1],maxZerror:A[2],statistics:[],bandCountWithNoData:b};if(b&&r>1)return H(i),_;if(1===r&&1===k)return H(i),_.statistics.push({minValue:A[0],maxValue:A[1]}),_;const T=r*k*8,U=new Uint8Array(T),nt=new Uint8Array(T);let p=i,l=0,c=0,m=!1;if(y.byteLength<i+2*T?(H(i),m=!0,[p,l,c]=w([s.length,T,T]),y.set(s,p)):[l,c]=w([T,T]),y.set(U,l),y.set(nt,c),C=ut(p,s.length,r,k,l,c),C)throw H(p),m||H(l),new Error(`lerc-getDataRanges: error code is ${C}`);y=new Uint8Array(S.buffer),tt(y,l,U),tt(y,c,nt);const v=new Float64Array(U.buffer),g=new Float64Array(nt.buffer),P=_.statistics;for(let x=0;x<k;x++)if(r>1){const B=v.slice(x*r,(x+1)*r),R=g.slice(x*r,(x+1)*r),$=Math.min.apply(null,B),rt=Math.max.apply(null,R);P.push({minValue:$,maxValue:rt,depthStats:{minValues:B,maxValues:R}})}else P.push({minValue:v[x],maxValue:g[x]});return H(p),m||H(l),_},at.decode=(s,a)=>{const{maskCount:u,depthCount:e,bandCount:t,width:i,height:n,dataType:f,bandCountWithNoData:C}=a,N=ct[f],A=i*n,D=new Uint8Array(A*t),j=new Uint8Array(A*e*t*N.size),I=new Uint8Array(t),k=new Uint8Array(8*t),[E,V,O,r,b]=w([s.length,D.length,j.length,I.length,k.length]);y.set(s,E),y.set(D,V),y.set(j,O),y.set(I,r),y.set(k,b);const _=h(E,s.length,u,V,e,i,n,t,f,O,r,b);if(_)throw H(E),new Error(`lerc-decode: error code is ${_}`);y=new Uint8Array(S.buffer),tt(y,O,j),tt(y,V,D);let T=null;if(C){tt(y,r,I),tt(y,b,k),T=[];const U=new Float64Array(k.buffer);for(let nt=0;nt<I.length;nt++)T.push(I[nt]?U[nt]:null)}return H(E),{data:j,maskData:D,noDataValues:T}}})(z),K=!0}),ht)}const at={getBlobInfo:null,decode:null};function tt(z,G,H){H.set(z.slice(G,G+H.length))}function et(z,G,H,Q,ut){if(H<2)return z;const h=new Q(G*H);if(ut)for(let d=0,y=0;d<G;d++)for(let S=0,w=d;S<H;S++,w+=G)h[w]=z[y++];else for(let d=0,y=0;d<G;d++)for(let S=0,w=d;S<H;S++,w+=G)h[y++]=z[w];return h}function ot(z,G={}){const H=G.inputOffset??0,Q=z instanceof Uint8Array?z.subarray(H):new Uint8Array(z,H),ut=at.getBlobInfo(Q),{data:h,maskData:d,noDataValues:y}=at.decode(Q,ut),{width:S,height:w,bandCount:s,depthCount:a,dataType:u,maskCount:e,statistics:t}=ut,i=ct[u],n=new i.ctor(h.buffer),f=[],C=[],N=S*w,A=N*a;for(let E=0;E<s;E++){const V=n.subarray(E*A,(E+1)*A);if(G.returnInterleaved)f.push(V);else{const O=et(V,N,a,i.ctor,!0);f.push(O)}C.push(d.subarray(E*A,(E+1)*A))}const D=0===e?null:1===e?C[0]:new Uint8Array(N);if(e>1){D.set(C[0]);for(let E=1;E<C.length;E++){const V=C[E];for(let O=0;O<N;O++)D[O]=D[O]&V[O]}}const{noDataValue:L}=G;if(e>0&&null!=L&&i.range[0]<=L&&i.range[1]>=L)for(let E=0;E<s;E++){const V=f[E],O=C[E]||D;for(let r=0;r<N;r++)0===O[r]&&(V[r]=L)}const I=e===s&&s>1?C:null,{pixelType:k}=i;return{width:S,height:w,bandCount:s,pixelType:k,depthCount:a,statistics:t,pixels:f,mask:D,bandMasks:I,noDataValues:y}}},65410:(St,wt,Z)=>{function ct(){const yt=[];for(let at=0;at<=257;at++)yt[at]=[at];return yt}function ht(yt,at){for(let o=0;o<at.length;o++)yt.push(at[o])}Z.d(wt,{J:()=>vt});const K=new Set;function vt(yt,at,o,tt=!0){const dt=function J(yt,at,o,tt=!0){if(at%4!=0||o%4!=0){const dt=new ArrayBuffer(4*Math.ceil(o/4)),et=new Uint8Array(dt),ot=new Uint8Array(yt,at,o);if(tt)for(let W=0;W<et.length;W+=4)et[W]=ot[W+3],et[W+1]=ot[W+2],et[W+2]=ot[W+1],et[W+3]=ot[W];else et.set(ot);return new Uint32Array(et.buffer)}if(tt){const dt=new Uint8Array(yt,at,o),et=new Uint8Array(dt.length);for(let ot=0;ot<et.length;ot+=4)et[ot]=dt[ot+3],et[ot+1]=dt[ot+2],et[ot+2]=dt[ot+1],et[ot+3]=dt[ot];return new Uint32Array(et.buffer)}return new Uint32Array(yt,at,o/4)}(yt,at,o,tt);let et=9,ot=ct(),W=32,z=ot.length,G=[],H=1,Q=dt[0],ut=0;const h=dt.length,d=8*(4*h-o),y=[];for(;null!=Q;){if(W>=et)W-=et,ut=Q>>>32-et,Q<<=et;else{ut=Q>>>32-W,Q=dt[H++];const w=et-W;W=32-w,ut=(ut<<w)+(Q>>>W),Q<<=w}if(257===ut)break;if(256===ut){et=9,ot=ct(),z=ot.length,G=[];continue}const S=ot[ut];if(null==S){if(ut>ot.length)throw new Error("data integrity issue: code does not exist on code page");G.push(G[0]),ot[z++]=G.slice(),ht(y,G)}else ht(y,S),G.push(S[0]),G.length>1&&(ot[z++]=G.slice()),G=S.slice();if(K.has(z)&&et++,0===W&&(Q=dt[H++],W=32),H>h||H===h&&W<=d)break}return new Uint8Array(y)}K.add(511),K.add(1023),K.add(2047),K.add(4095),K.add(8191)},3749:(St,wt,Z)=>{Z.d(wt,{J:()=>E,y:()=>k});var J=Z(15861),ct=Z(57964),ht=Z(51172),K=Z(8868),vt=Z(79412),yt=Z(46528);class at{constructor(r){this._canvas=null,this._ctx=null,r&&(this._canvas=r.canvas,this._ctx=r.ctx||r.canvas&&r.canvas.getContext("2d"))}decode(r,b,_){if(!r||r.byteLength<10)throw new ct.Z("imagecanvasdecoder: decode","required a valid encoded data as input.");let{width:T=0,height:U=0,format:nt}=b;const{applyJpegMask:p}=b;if(p&&(!T||!U))throw new ct.Z("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((l,c)=>{let m=null;"jpg"===nt&&p&&(m=at._getMask(r,{width:T,height:U}));const v=new Blob([new Uint8Array(r)],{type:"image/"+nt=="jpg"?"jpeg":nt}),g=URL.createObjectURL(v),P=new Image;let x;P.src=g,P.onload=()=>{if(URL.revokeObjectURL(g),(0,vt.Hc)(_))return void c((0,vt.zE)());T=P.width,U=P.height,this._canvas&&this._ctx?(this._canvas.width===T&&this._canvas.height===U||(this._canvas.width=T,this._canvas.height=U),this._ctx.clearRect(0,0,T,U)):(this._canvas=document.createElement("canvas"),this._canvas.width=T,this._canvas.height=U,this._ctx=this._canvas.getContext("2d")),this._ctx.drawImage(P,0,0);const B=this._ctx.getImageData(0,0,T,U);let R;if(x=B.data,b.renderOnCanvas){if(m)for(R=0;R<m.length;R++)x[4*R+3]=m[R]?255:0;return this._ctx.putImageData(B,0,0),void l(null)}const $=T*U,rt=new Uint8Array($),gt=new Uint8Array($),it=new Uint8Array($);if(m)for(R=0;R<$;R++)rt[R]=x[4*R],gt[R]=x[4*R+1],it[R]=x[4*R+2];else for(m=new Uint8Array($),R=0;R<$;R++)rt[R]=x[4*R],gt[R]=x[4*R+1],it[R]=x[4*R+2],m[R]=x[4*R+3];l({width:T,height:U,pixels:[rt,gt,it],mask:m,pixelType:"u8"})},P.onerror=()=>{URL.revokeObjectURL(g),c("cannot load image")}})}static _getMask(r,b){let _=null;try{const T=new Uint8Array(r),U=Math.ceil(T.length/2);let nt=0;const p=T.length-2;for(nt=U;nt<p&&(255!==T[nt]||217!==T[nt+1]);nt++);if(nt+=2,nt<T.length-1){const l=new yt.Z(T.subarray(nt)).getBytes();_=new Uint8Array(b.width*b.height);let c=0;for(let m=0;m<l.length;m++)for(let v=7;v>=0;v--)_[c++]=l[m]>>v&1}}catch{}return _}}var o=Z(68030);class tt{static decode(r,b=!1){const _=new Uint8Array(r),T=new o.J;T.parse(_);const{width:U,height:nt,numComponents:p,eof:l}=T,c=T.getData(U,nt,!0),m=U*nt;let v,g=null,P=0,x=0,B=0;if(!b&&l<_.length-1)try{const R=new yt.Z(_.subarray(l)).getBytes();g=new Uint8Array(m);let $=0;for(P=0;P<R.length;P++)for(B=7;B>=0;B--)g[$++]=R[P]>>B&1}catch{}if(1===p&&c.length===U*nt){const R=new Uint8Array(c.buffer);v=[R,R,R]}else{for(v=[],P=0;P<3;P++)v.push(new Uint8Array(m));for(B=0,x=0;x<m;x++)for(P=0;P<3;P++)v[P][x]=c[B++]}return{width:U,height:nt,pixels:v,mask:g}}}var dt=Z(73407),et=Z(65410),ot=Z(86741);const W=(O,r)=>Math.floor(O.byteLength/(r.width*r.height*z(r.pixelType))),z=O=>{let r=1;switch(O){case Uint8Array:case Int8Array:r=1;break;case Uint16Array:case Int16Array:r=2;break;case Uint32Array:case Int32Array:case Float32Array:r=4;break;case Float64Array:r=8}return r};class H{static decode(r,b){const _=b.pixelType,T=[],U=b.width*b.height,nt=W(r,b),{bandIds:p,format:l}=b,c=p?.length||W(r,b),m=r.byteLength-r.byteLength%(U*z(_)),v=new _(r,0,U*nt);let g,P,x,B,R=null;if("bip"===l)for(g=0;g<c;g++){for(x=new _(U),B=p?p[g]:g,P=0;P<U;P++)x[P]=v[P*nt+B];T.push(x)}else if("bsq"===l)for(g=0;g<c;g++)B=p?p[g]:g,T.push(v.subarray(B*U,(B+1)*U));return m<r.byteLength-1&&(R=((O,r)=>{if(8*O.byteLength<r)return null;const b=new Uint8Array(O,0,Math.ceil(r/8)),_=new Uint8Array(r);let T=0,U=0,nt=0,p=0;for(nt=0;nt<b.length-1;nt++)for(U=b[nt],p=7;p>=0;p--)_[T++]=U>>p&1;for(p=7;T<r-1;)U=b[b.length-1],_[T++]=U>>p&1,p--;return _})(r.slice(m),U)),{pixels:T,mask:R}}}var Q=Z(49209),ut=Z(83931),h=function(O){var T,U,nt;function p(l){var c,v,g,P,x,B,R,$,rt,gt,it,Y;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},P=null;;){switch(c=this.readUInt32(),R=function(){var st,pt;for(pt=[],st=0;st<4;++st)pt.push(String.fromCharCode(this.data[this.pos++]));return pt}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":P&&this.animation.frames.push(P),this.pos+=4,P={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},g=this.readUInt16(),v=this.readUInt16()||100,P.delay=1e3*g/v,P.disposeOp=this.data[this.pos++],P.blendOp=this.data[this.pos++],P.data=[];break;case"IDAT":case"fdAT":for("fdAT"===R&&(this.pos+=4,c-=4),l=P?.data||this.imgData,gt=0;0<=c?gt<c:gt>c;0<=c?++gt:--gt)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(c),($=255-this.transparency.indexed.length)>0)for(it=0;0<=$?it<$:it>$;0<=$?++it:--it)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":x=(rt=this.read(c)).indexOf(0),B=String.fromCharCode.apply(String,rt.slice(0,x)),this.text[B]=String.fromCharCode.apply(String,rt.slice(x+1));break;case"IEND":return P&&this.animation.frames.push(P),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(Y=this.colorType)||6===Y,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return p.load=function(l,c,m){var v;return"function"==typeof c&&(m=c),(v=new XMLHttpRequest).open("GET",l,!0),v.responseType="arraybuffer",v.onload=function(){var g;return g=new p(new Uint8Array(v.response||v.mozResponseArrayBuffer)),"function"==typeof c?.getContext&&g.render(c),"function"==typeof m?m(g):void 0},v.send(null)},p.prototype.read=function(l){var c,m;for(m=[],c=0;0<=l?c<l:c>l;0<=l?++c:--c)m.push(this.data[this.pos++]);return m},p.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},p.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},p.prototype.decodePixels=function(l){var c,m,v,g,P,x,B,R,rt,gt,it,Y,st,pt,M,F,X,q,lt,mt,ft,Ct;if(null==l&&(l=this.imgData),0===l.length)return new Uint8Array(0);for(l=(l=new yt.Z(l)).getBytes(),M=(it=this.pixelBitlength/8)*this.width,Y=new Uint8Array(M*this.height),x=l.length,pt=0,st=0,m=0;st<x;){switch(l[st++]){case 0:for(g=q=0;q<M;g=q+=1)Y[m++]=l[st++];break;case 1:for(g=lt=0;lt<M;g=lt+=1)c=l[st++],P=g<it?0:Y[m-it],Y[m++]=(c+P)%256;break;case 2:for(g=mt=0;mt<M;g=mt+=1)c=l[st++],v=(g-g%it)/it,Y[m++]=((F=pt&&Y[(pt-1)*M+v*it+g%it])+c)%256;break;case 3:for(g=ft=0;ft<M;g=ft+=1)c=l[st++],v=(g-g%it)/it,P=g<it?0:Y[m-it],F=pt&&Y[(pt-1)*M+v*it+g%it],Y[m++]=(c+Math.floor((P+F)/2))%256;break;case 4:for(g=Ct=0;Ct<M;g=Ct+=1)c=l[st++],v=(g-g%it)/it,0===pt?F=X=0:(F=Y[(pt-1)*M+v*it+g%it],X=v&&Y[(pt-1)*M+(v-1)*it+g%it]),B=(P=g<it?0:Y[m-it])+F-X,R=Math.abs(B-P),rt=Math.abs(B-F),gt=Math.abs(B-X),Y[m++]=(c+(R<=rt&&R<=gt?P:rt<=gt?F:X))%256;break;default:throw new Error("Invalid filter algorithm: "+l[st-1])}pt++}return Y},p.prototype.decodePalette=function(){var l,c,m,v,g,P,x,B,R;for(m=this.palette,P=this.transparency.indexed||[],g=new Uint8Array((P.length||0)+m.length),v=0,l=0,c=x=0,B=m.length;x<B;c=x+=3)g[v++]=m[c],g[v++]=m[c+1],g[v++]=m[c+2],g[v++]=null!=(R=P[l++])?R:255;return g},p.prototype.copyToImageData=function(l,c){var m,v,g,P,x,B,R,$,rt,gt,it;if(v=this.colors,rt=null,m=this.hasAlphaChannel,this.palette.length&&(rt=null!=(it=this._decodedPalette)?it:this._decodedPalette=this.decodePalette(),v=4,m=!0),$=(g=l.data||l).length,x=rt||c,P=B=0,1===v)for(;P<$;)R=rt?4*c[P/4]:B,gt=x[R++],g[P++]=gt,g[P++]=gt,g[P++]=gt,g[P++]=m?x[R++]:this.transparency.grayscale&&this.transparency.grayscale===gt?0:255,B=R;else for(;P<$;)R=rt?4*c[P/4]:B,g[P++]=x[R++],g[P++]=x[R++],g[P++]=x[R++],g[P++]=m?x[R++]:this.transparency.rgb&&this.transparency.rgb[1]===x[R-3]&&this.transparency.rgb[3]===x[R-2]&&this.transparency.rgb[5]===x[R-1]?0:255,B=R},p.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l},U=O.document&&O.document.createElement("canvas"),nt=U&&U.getContext("2d"),T=function(l){var c;return nt.width=l.width,nt.height=l.height,nt.clearRect(0,0,l.width,l.height),nt.putImageData(l,0,0),(c=new Image).src=U.toDataURL(),c},p.prototype.decodeFrames=function(l){var c,m,v,g,P,x,B,R;if(this.animation){for(R=[],m=P=0,x=(B=this.animation.frames).length;P<x;m=++P)v=l.createImageData((c=B[m]).width,c.height),g=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(v,g),c.imageData=v,R.push(c.image=T(v));return R}},p.prototype.renderFrame=function(l,c){var m,v,g;return m=(v=this.animation.frames)[c],g=v[c-1],0===c&&l.clearRect(0,0,this.width,this.height),1===g?.disposeOp?l.clearRect(g.xOffset,g.yOffset,g.width,g.height):2===g?.disposeOp&&l.putImageData(g.imageData,g.xOffset,g.yOffset),0===m.blendOp&&l.clearRect(m.xOffset,m.yOffset,m.width,m.height),l.drawImage(m.image,m.xOffset,m.yOffset)},p.prototype.animate=function(l){var c,m,v,g,P,x,B=this;return m=0,g=(x=this.animation).numFrames,v=x.frames,P=x.numPlays,(c=function(){var R,$;if(R=m++%g,$=v[R],B.renderFrame(l,R),g>1&&m/g<P)return B.animation._timeout=setTimeout(c,$.delay)})()},p.prototype.stopAnimation=function(){var l;return clearTimeout(null!=(l=this.animation)?l._timeout:void 0)},p.prototype.render=function(l){var c,m;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,c=l.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(m=c.createImageData(this.width,this.height),this.copyToImageData(m,this.decodePixels()),c.putImageData(m,0,0))},p}(self);const d=new Set(["jpg","png","bmp","gif"]);function y(O,r){return S.apply(this,arguments)}function S(){return(S=(0,J.Z)(function*(O,r){if(!ut.f)throw new ct.Z("rasterCoded:decode","lerc decoder is not supported on big endian platform");yield(0,dt.zD)();const{offset:b}=r,{width:_,height:T,pixelType:U,statistics:nt,depthCount:p,noDataValues:l,bandMasks:c,pixels:m,mask:v}=(0,dt.Jx)(O,{inputOffset:b,returnInterleaved:r.returnInterleaved}),g=new K.Z({width:_,height:T,pixelType:U.toLowerCase(),pixels:m,mask:v,statistics:nt,bandMasks:c,depthCount:p,noDataValues:l});return nt?.length||g.updateStatistics(),g})).apply(this,arguments)}function w(O,r){return s.apply(this,arguments)}function s(){return(s=(0,J.Z)(function*(O,r){const b=yield(0,Q.Jx)(O,{...r,noDataValue:null});(0,ht.O3)(b);const _=new K.Z({width:b.width,height:b.height,pixels:b.pixels,pixelType:b.pixelType.toLowerCase(),mask:b.mask,bandMasks:b.bandMasks,statistics:null});return _.updateStatistics(),_})).apply(this,arguments)}function u(){return(u=(0,J.Z)(function*(O,r){const b=yield(0,Q.Uw)(O,r.customOptions),_=new K.Z({width:b.width,height:b.height,pixels:b.pixels,pixelType:b.pixelType.toLowerCase(),mask:b.mask,statistics:null});return _.updateStatistics(),_})).apply(this,arguments)}function e(O,r){const b=r.pixelType||"u8",_=K.Z.getPixelArrayConstructor(b),T="u8"===b?O:new _(O.buffer),U=[],nt=r.planes||1;if(1===nt)U.push(T);else for(let l=0;l<nt;l++){const c=(r.width||1)*(r.height||O.length),m=new _(c);for(let v=0;v<c;v++)m[v]=T[v*nt+l];U.push(m)}const p=new K.Z({width:r.width||1,height:r.height||O.length,pixels:U,pixelType:b,statistics:null});return p.updateStatistics(),p}function t(O,r){return e(new yt.Z(new Uint8Array(O)).getBytes(),r)}function i(O,r){return e((0,et.J)(O,r.offset,r.eof,!r.isInputBigEndian),r)}function f(O,r){const b=tt.decode(O,r.hasNoZlibMask??void 0),_=new K.Z({width:b.width,height:b.height,pixels:b.pixels,pixelType:"U8",mask:b.mask,statistics:null});return _.updateStatistics(),_}function C(O,r){const b=new Uint8Array(O),_=new h(b),{width:T,height:U}=r,nt=T*U,p=_.decode();let l,c=0,m=0;const v=new Uint8Array(nt);for(c=0;c<nt;c++)v[c]=p[4*c+3];const g=new K.Z({width:T,height:U,pixels:[],pixelType:"U8",mask:v,statistics:[]});for(c=0;c<3;c++){for(l=new Uint8Array(nt),m=0;m<nt;m++)l[m]=p[4*m+c];g.addData({pixels:l})}return g.updateStatistics(),g}function A(){return(A=(0,J.Z)(function*(O,r,b,_){const T=new at,U={applyJpegMask:!1,format:r,...b},nt=yield T.decode(O,U,_),p=new K.Z(nt);return p.updateStatistics(),p})).apply(this,arguments)}function D(O){if(null==O)throw new ct.Z("rasterCodec:decode","parameter encodeddata is required.");const r=new Uint8Array(O,0,10);let b="";return 255===r[0]&&216===r[1]?b="jpg":137===r[0]&&80===r[1]&&78===r[2]&&71===r[3]?b="png":67===r[0]&&110===r[1]&&116===r[2]&&90===r[3]&&73===r[4]&&109===r[5]&&97===r[6]&&103===r[7]&&101===r[8]&&32===r[9]?b="lerc":76===r[0]&&101===r[1]&&114===r[2]&&99===r[3]&&50===r[4]&&32===r[5]?b="lerc2":73===r[0]&&73===r[1]&&42===r[2]&&0===r[3]||77===r[0]&&77===r[1]&&0===r[2]&&42===r[3]||73===r[0]&&73===r[1]&&43===r[2]&&0===r[3]||77===r[0]&&77===r[1]&&0===r[2]&&43===r[3]?b="tiff":71===r[0]&&73===r[1]&&70===r[2]?b="gif":66===r[0]&&77===r[1]?b="bmp":String.fromCharCode.apply(null,r).toLowerCase().includes("error")&&(b="error"),b}function k(O){let r=D(O);return"lerc2"===r?r="lerc":"error"===r&&(r=""),r}function E(O){return V.apply(this,arguments)}function V(){return V=(0,J.Z)(function*(O,r={},b){if(null==O)throw new ct.Z("rasterCodec:decode","missing encodeddata parameter.");let _=r.format?.toLowerCase();if(!("bsq"!==_&&"bip"!==_||null!=r.width&&null!=r.height))throw new ct.Z("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===_&&r.customOptions)return function a(O,r){return u.apply(this,arguments)}(O,r);if((!_||"bsq"!==_&&"bip"!==_&&"deflate"!==_&&"lzw"!==_)&&(_=D(O)),r.useCanvas&&d.has(_))return function N(O,r,b,_){return A.apply(this,arguments)}(O,_,r,b);const T=function L(O){let r=null;switch(O){case"lerc":case"lerc2":r=y;break;case"jpg":r=f;break;case"png":r=C;break;case"bsq":case"bip":r=(b,_)=>function n(O,r,b){const{pixelTypeCtor:_}=function j(O){let r=null,b=null;switch(O?O.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":b=255,r=Uint8Array;break;case"u16":b=b||65535,r=Uint16Array;break;case"u32":b=b||2**32-1,r=Uint32Array;break;case"s8":b=b||-128,r=Int8Array;break;case"s16":b=b||-32768,r=Int16Array;break;case"s32":b=b||0-2**31,r=Int32Array;break;default:r=Float32Array}return{pixelTypeCtor:r,noDataValue:b}}(r.pixelType),T=(0,H.decode)(O,{width:r.width,height:r.height,pixelType:_,format:b}),U=new K.Z({width:r.width,height:r.height,pixels:T.pixels,pixelType:r.pixelType,mask:T.mask,statistics:null});return U.updateStatistics(),U}(b,_,O);break;case"tiff":r=w;break;case"deflate":r=t;break;case"lzw":r=i;break;case"error":r=()=>{throw new ct.Z("rasterCodec:decode","input data contains error")};break;default:r=()=>{throw new ct.Z("rasterCodec:decode","unsupported raster format")}}return r}(_);r.isPoint&&(null!=(r={...r}).width&&r.width++,null!=r.height&&r.height++);const U=yield T(O,r);return U&&("jpg"!==_&&null!=r.noDataValue&&1===U.depthCount&&(0,ot.A)(U,r.noDataValue,{customFloatTolerance:r.tolerance}),r.isPoint&&function I(O,r=1){if(!O)return;const{pixels:b,width:_,height:T,mask:U}=O;if(!b||0===b.length)return;const nt=b.length,p=_-1,l=T-1,c=[];let m,v,g,P,x,B,R=null;const $=K.Z.getPixelArrayConstructor(O.pixelType);if(0===r){for(m=0;m<nt;m++){for(x=b[m],B=new $(p*l),v=0;v<l;v++)for(P=v*_,g=0;g<p;g++)B[v*p+g]=x[P+g];c.push(B)}if(null!=U)for(R=new Uint8Array(p*l),v=0;v<l;v++)for(P=v*_,g=0;g<p;g++)R[v*p+g]=U[P+g]}else{for(m=0;m<nt;m++){for(x=b[m],B=new $(p*l),v=0;v<l;v++)for(P=v*_,g=0;g<p;g++)B[v*p+g]=(x[P+g]+x[P+g+1]+x[P+_+g]+x[P+_+g+1])/4;c.push(B)}if(U)for(R=new Uint8Array(p*l),v=0;v<l;v++)for(P=v*_,g=0;g<p;g++)R[v*p+g]=Math.min.apply(null,[U[P+g],U[P+g+1],U[P+_+g],U[P+_+g+1]])}O.width=p,O.height=l,O.mask=R,O.pixels=c}(U),U)}),V.apply(this,arguments)}},49209:(St,wt,Z)=>{Z.d(wt,{Dq:()=>C,FI:()=>N,I7:()=>L,If:()=>A,Jx:()=>U,Uw:()=>_,cK:()=>V,ee:()=>D,vr:()=>O});var J=Z(15861),ct=Z(86701),ht=Z(68030),K=Z(73407),vt=Z(65410),yt=Z(86741),at=Z(16854),o=Z(83931),tt=Z(46528);const dt=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],et=4294967296,ot=new Set([1,5,6,7,8,34712,34887]);function W(p,l){let c="unknown";return 3===p?c=64===l?"f64":"f32":1===p?1===l?c="u1":2===l?c="u2":4===l?c="u4":l<=8?c="u8":l<=16?c="u16":l<=32&&(c="u32"):2===p&&(l<=8?c="s8":l<=16?c="s16":l<=32&&(c="s32")),c}function z(p){let l=null;switch(p?p.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":l=Uint8Array;break;case"u16":l=Uint16Array;break;case"u32":l=Uint32Array;break;case"s8":l=Int8Array;break;case"s16":l=Int16Array;break;case"s32":l=Int32Array;break;case"f64":l=Float64Array;break;default:l=Float32Array}return l}function G(p,l){return{x:l[0]*p.x+l[1]*p.y+l[2],y:l[3]*p.x+l[4]*p.y+l[5]}}function H(p,l){return p.get(l)?.values}function Q(p,l){return p.get(l)?.values}function ut(p,l){return p.get(l)?.values?.[0]}function h(p,l){return p.get(l)?.values?.[0]}function d(p,l,c,m=0,v=at.Z.tiffTags,g=4){const P=8===g,x=P?I(new DataView(p,c,8),0,l):new DataView(p,c,2).getUint16(0,l),B=4+2*g,R=P?8:2,$=R+x*B;if(c+$>p.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:$};const rt=c+$+4<=p.byteLength?E(new DataView(p,c+$,8===g?8:4),0,l,8===g):null,gt=c+R,it=new Map;let Y,st,pt,M,F,X=0,q=0;for(let lt=0;lt<x;lt++){st=new DataView(p,gt+B*lt,B),pt=st.getUint16(0,l),F=st.getUint16(2,l),M=at.Z.getTagName(pt,v);const mt=[];2===g?(X=st.getUint16(4,l),q=st.getUint16(6,l)):4===g?(X=st.getUint32(4,l),q=st.getUint32(8,l)):8===g&&(X=E(st,4,l,!0),q=E(st,12,l,!0),mt.push(st.getUint32(12,l)),mt.push(st.getUint32(16,l))),Y={id:pt,type:F,valueCount:X,valueOffset:q,valueOffsets:mt,values:null},C(p,l,Y,m,!1,g),it.set(M,Y)}return{success:!0,ifd:it,nextIFD:rt,requiredBufferSize:$}}const y=(p,l)=>(0,K.Jx)(p,{inputOffset:l}).pixels[0];function S(p,l){if(1!==l&&2!==l&&4!==l)return p;const c=new Uint8Array(p),m=8/l,v=new Uint8Array(p.byteLength*m);let g=0;const P=2**l-1;for(let x=0;x<c.length;x++){const B=c[x];for(let R=0;R<m;R++)v[g++]=B<<l*R>>>8-l&P}return v.buffer}function w(p,l,c){const m=new ht.J;m.parse(p),m.colorTransform=6===c?-1:0;const v=m.getData(m.width,m.height,1!==l&&4!==l);return new Uint8Array(v.buffer)}function s(p){const l=new tt.Z(p).getBytes(),c=new ArrayBuffer(l.length),m=new Uint8Array(c);return m.set(l),m}function a(p,l,c,m,v){return u.apply(this,arguments)}function u(){return(u=(0,J.Z)(function*(p,l,c,m,v){const g=o.f===l,P=h(c,"BITSPERSAMPLE"),x=h(c,"SAMPLESPERPIXEL")??1,B=h(c,"PHOTOMETRICINTERPRETATION"),R=h(c,"SAMPLEFORMAT")??1,$=W(R,P),rt=h(c,"COMPRESSION")??1,gt=z($);let it,Y,st;if(34887===rt)return yield(0,K.zD)(),y(p,m);if(1===rt)it=p.slice(m,m+v),Y=new Uint8Array(it);else if(8===rt||32946===rt)Y=new Uint8Array(p,m,v),Y=s(Y),it=Y.buffer;else if(6===rt)Y=new Uint8Array(p,m,v),Y=w(Y,x,B),it=Y.buffer;else if(7===rt){const X=c.get("JPEGTABLES").values,q=X.length-2;Y=new Uint8Array(q+v-2);for(let mt=0;mt<q;mt++)Y[mt]=X[mt];const lt=new Uint8Array(p,m+2,v-2);for(let mt=0;mt<lt.length;mt++)Y[q+mt]=lt[mt];Y=w(Y,x,B),it=Y.buffer}else{if(5!==rt)throw new Error("tiff-decode: unsupport compression "+rt);Y=(0,vt.J)(p,m,v,l),it=Y.buffer}if(it=S(it,P),"u8"===$||"s8"===$||g)st=new gt(it);else{it=new ArrayBuffer(Y.length);const X=new Uint8Array(it);switch($){case"u16":case"s16":for(let q=0;q<Y.length;q+=2)X[q]=Y[q+1],X[q+1]=Y[q];break;case"u32":case"s32":case"f32":for(let q=0;q<Y.length;q+=4)X[q]=Y[q+3],X[q+1]=Y[q+2],X[q+2]=Y[q+1],X[q+3]=Y[q]}st=new gt(it)}const pt=h(c,"PREDICTOR")??1,M=h(c,"TILEWIDTH"),F=h(c,"TILELENGTH");if(pt>1&&(5===rt||8===rt||32946===rt)&&M&&F){const X=A(c),q=new gt(st.length);q.set(st),st=function b(p,l,c,m,v){const g=m?4:1,P=c*g*v;m&&(p=new Uint8Array(p.buffer));for(let R=0;R<l;R++){const $=R*P;for(let rt=v;rt<P;rt++)p[$+rt]+=p[$+rt-v]}if(!m)return p;const x=new Uint8Array(p.length),B=c*v;for(let R=0;R<l;R++){const $=R*P;for(let rt=0;rt<B;rt++)for(let gt=0;gt<g;gt++)x[$+rt*g+gt]=p[$+rt+(g-gt-1)*B]}return new Float32Array(x.buffer)}(q,F,M,3===R&&3===pt,X?1:x)}return st})).apply(this,arguments)}function t(){return(t=(0,J.Z)(function*(p,l,c){const m=Q(c,"TILEOFFSETS");if(void 0===m)return null;const v=Q(c,"TILEBYTECOUNTS"),{width:g,height:P,pixelType:x,tileWidth:B,tileHeight:R}=N([c]),$=A(c,l),rt=h(c,"SAMPLESPERPIXEL")||l.planes,gt=g*P,it=h(c,"BITSPERSAMPLE"),Y=34887===(h(c,"COMPRESSION")??1),st=z(x),pt=[];for(let Ot=0;Ot<rt;Ot++)pt.push(new st(gt));let M,F,X,q,lt,mt,ft,Ct,bt,_t,It,At,xt;const Mt=Math.ceil(g/B),Pt=new Uint8Array(gt).fill(255);let kt=!1;if(it%8==0)if(Y&&$&&rt>1){const Ot=Math.round(m.length/rt);for(M=0;M<Ot;M++){mt=Math.floor(M/Mt)*R,ft=M%Mt*B,Ct=mt*g+ft;for(let Rt=0;Rt<rt;Rt++){const Et=M*rt+Rt;for(0===v[Et]?(X=null,kt=!0):X=yield a(p,l.littleEndian,c,m[Et],v[Et]),_t=0,bt=Ct,At=Math.min(B,g-ft),It=Math.min(R,P-mt),xt=pt[Rt],q=0;q<It;q++)for(bt=Ct+q*g,_t=q*B,lt=0;lt<At;lt++,bt++,_t++)X?xt[bt]=X[_t]:Pt[bt]=0}}}else for(M=0;M<m.length;M++)for(mt=Math.floor(M/Mt)*R,ft=M%Mt*B,Ct=mt*g+ft,0===v[M]?(X=null,kt=!0):X=yield a(p,l.littleEndian,c,m[M],v[M]),_t=0,bt=Ct,At=Math.min(B,g-ft),It=Math.min(R,P-mt),F=0;F<rt;F++)if(xt=pt[F],$||Y)for(q=0;q<It;q++)for(bt=Ct+q*g,_t=B*R*F+q*B,lt=0;lt<At;lt++,bt++,_t++)X?xt[bt]=X[_t]:Pt[bt]=0;else for(q=0;q<It;q++)for(bt=Ct+q*g,_t=q*B*rt+F,lt=0;lt<At;lt++,bt++,_t+=rt)X?xt[bt]=X[_t]:Pt[bt]=0;return{width:g,height:P,pixelType:x,pixels:pt,mask:kt?Pt:void 0}})).apply(this,arguments)}const i=(p,l,c)=>{const m=o.f===l.littleEndian,v=Q(c,"STRIPOFFSETS");if(void 0===v)return null;const{width:g,height:P,pixelType:x}=N([c]),B=h(c,"SAMPLESPERPIXEL")||l.planes,R=h(c,"PHOTOMETRICINTERPRETATION"),$=g*P,rt=h(c,"BITSPERSAMPLE"),gt=z(x),it=new gt($*B),Y=Q(c,"STRIPBYTECOUNTS"),st=h(c,"ROWSPERSTRIP"),pt=h(c,"COMPRESSION")??1;let M,F,X,q,lt,mt,ft,Ct,bt,_t=st;if(rt%8==0)for(M=0;M<v.length;M++){if(lt=M*(st*g)*B,_t=(M+1)*st>P?P-M*st:st,"u8"===x||"s8"===x||m)8===pt||32946===pt?(ft=new Uint8Array(p,v[M],Y[M]),ft=s(ft),mt=ft.buffer):6===pt?(ft=new Uint8Array(p,v[M],Y[M]),ft=w(ft,B,R),mt=ft.buffer):5===pt?(ft=(0,vt.J)(p,v[M],Y[M],l.littleEndian),mt=ft.buffer):(Y[M]!==_t*g*B*rt/8&&console.log("strip byte counts is different than expected"),mt=p.slice(v[M],v[M]+Y[M])),mt=S(mt,rt),q=new gt(mt);else{switch(6===pt||8===pt||32946===pt?(ft=new Uint8Array(p,v[M],Y[M]),Ct=s(ft),mt=Ct.buffer):(Y[M]!==_t*g*B*rt/8&&console.log("strip byte counts is different than expected"),mt=new ArrayBuffer(Y[M]),ft=new Uint8Array(p,v[M],Y[M]),Ct=new Uint8Array(mt)),x){case"u16":case"s16":for(X=0;X<ft.length;X+=2)Ct[X]=ft[X+1],Ct[X+1]=ft[X];break;case"u32":case"s32":case"f32":for(X=0;X<ft.length;X+=4)Ct[X]=ft[X+3],Ct[X+1]=ft[X+2],Ct[X+2]=ft[X+1],Ct[X+3]=ft[X]}mt=S(mt,rt),q=new gt(mt)}it.set(q,lt)}const It=[];if(1===B)It.push(it);else for(M=0;M<B;M++){for(bt=new gt($),F=0;F<$;F++)bt[F]=it[F*B+M];It.push(bt)}return{width:g,height:P,pixelType:x,pixels:It}},n=(p,l,c)=>{if(!(p&&p.length>0&&l&&c))return null;let m,v,g;const P=p[0].length,x=p.length,B=new Uint8Array(P);for(let R=0;R<x;R++)if(m=p[R],v=l[R],g=c[R],0===R)for(let $=0;$<P;$++)B[$]=m[$]<v||m[$]>g?0:1;else for(let $=0;$<P;$++)B[$]&&(B[$]=m[$]<v||m[$]>g?0:1);return B},f=p=>{if(!p)return null;const l=p.match(/<Item(.*?)Item>/gi);if(!l||0===l.length)return null;const c=new Map;let m,v,g,P,x;for(let M=0;M<l.length;M++)m=l[M],v=m.slice(6,m.indexOf(">")),P=m.indexOf("sample="),P>-1&&(x=m.slice(P+8,m.indexOf('"',P+8))),P=m.indexOf("name="),P>-1&&(v=m.slice(P+6,m.indexOf('"',P+6))),v&&(g=m.slice(m.indexOf(">")+1,m.indexOf("</Item>")).trim(),null!=x?c.has(v)?c.get(v)[x]=g:c.set(v,[g]):c.set(v,g)),x=null;const B=c.get("STATISTICS_MINIMUM"),R=c.get("STATISTICS_MAXIMUM"),$=c.get("STATISTICS_MEAN"),rt=c.get("STATISTICS_STDDEV");let gt=null;if(B&&R){gt=[];for(let M=0;M<B.length;M++)gt.push({min:parseFloat(B[M]),max:parseFloat(R[M]),avg:$&&parseFloat($[M]),stddev:rt&&parseFloat(rt[M])})}const it=c.get("BandName"),Y=c.get("WavelengthMin"),st=c.get("WavelengthMax");let pt=null;if(it){pt=[];for(let M=0;M<it.length;M++)pt.push({BandName:it[M],WavelengthMin:Y&&parseFloat(Y[M]),WavelengthMax:st&&parseFloat(st[M])})}return{statistics:gt,bandProperties:pt,dataType:c.get("DataType"),rawMetadata:c}};function C(p,l,c,m=0,v=!1,g=4){if(c.values)return!0;const P=c.type,x=c.valueCount;let B=c.valueOffset,R=[];const $=dt[P],rt=8*$,gt=x*$,it=x*dt[P]*8;let Y,st;const pt=8===g?64:32,M=c.valueOffsets;if(it>pt&&gt>(v?p.byteLength:p?p.byteLength-B+m:0))return c.offlineOffsetSize=[B,gt],c.values=null,!1;if(it<=pt){if(!l)if(pt<=32)B>>>=32-it;else{const F=M?.length?M[0]:B>>>0,X=M?.length?M[1]:Math.round((B-F)/et);it<=32?(B=F>>>32-it,M[0]=B):(B=F*2**(32-it)+(X>>>32-it),M[0]=F,M[1]=X>>>32-it)}if(1===x&&rt===pt)R=[B];else if(64===pt){const F=M?.length?M[0]:B>>>0,X=M?.length?M[1]:Math.round((B-F)/et);let q=F,lt=32;for(st=1;st<=x;st++){const mt=32-rt*st%32;if(lt<rt){const ft=q<<mt>>>32-lt;q=X,R.push(ft+(X<<32-lt>>>32-lt)*2**(rt-lt)),lt-=32-(rt-lt)}else R.push(q<<mt>>>32-rt),lt-=rt;0===lt&&(lt=32,q=X)}}else for(st=1;st<=x;st++)R.push(B<<32-rt*st>>>32-rt)}else{B-=m,v&&(B=0);for(let F=B;F<B+gt;F+=$){switch(P){case 1:case 2:case 7:Y=new DataView(p,F,1).getUint8(0);break;case 3:Y=new DataView(p,F,2).getUint16(0,l);break;case 4:case 13:Y=new DataView(p,F,4).getUint32(0,l);break;case 5:Y=new DataView(p,F,4).getUint32(0,l)/new DataView(p,F+4,4).getUint32(0,l);break;case 6:Y=new DataView(p,F,1).getInt8(0);break;case 8:Y=new DataView(p,F,2).getInt16(0,l);break;case 9:Y=new DataView(p,F,4).getInt32(0,l);break;case 10:Y=new DataView(p,F,4).getInt32(0,l)/new DataView(p,F+4,4).getInt32(0,l);break;case 11:Y=new DataView(p,F,4).getFloat32(0,l);break;case 12:Y=new DataView(p,F,8).getFloat64(0,l);break;case 16:case 18:Y=I(new DataView(p,F,8),0,l);break;case 17:Y=k(new DataView(p,F,8),0,l);break;default:Y=null}R.push(Y)}}if(2===P){let F="";const X=R;for(R=[],st=0;st<X.length;st++)0===X[st]&&""!==F?(R.push(F),F=""):F+=String.fromCharCode(X[st]);""===F&&0!==R.length||R.push(F)}return c.values=R,!0}function N(p){const l=p[0],c=h(l,"TILEWIDTH"),m=h(l,"TILELENGTH"),v=h(l,"IMAGEWIDTH"),g=h(l,"IMAGELENGTH"),P=h(l,"BITSPERSAMPLE"),x=h(l,"SAMPLESPERPIXEL"),B=h(l,"SAMPLEFORMAT")??1,R=W(B,P),$=A(l),rt=H(l,"GDAL_NODATA");let gt=null;rt?.length&&(gt=rt.map(Et=>parseFloat(Et)),gt.some(Et=>isNaN(Et))&&(gt=null));const it=h(l,"COMPRESSION")??1;let Y;switch(it){case 1:Y="NONE";break;case 2:case 3:case 4:case 32771:Y="CCITT";break;case 5:Y="LZW";break;case 6:case 7:Y="JPEG";break;case 32773:Y="PACKBITS";break;case 8:case 32946:Y="DEFLATE";break;case 34712:Y="JPEG2000";break;case 34887:Y="LERC";break;default:Y=String(it)}let st=!0,pt="";ot.has(it)||(st=!1,pt+="unsupported tag compression "+it),B>3&&(st=!1,pt+="unsupported tag sampleFormat "+B),1!==P&&2!==P&&4!==P&&P%8!=0&&(st=!1,pt+="unsupported tag bitsPerSample "+P);const M=ut(l,"GEOASCIIPARAMS");let F;if(M){const Et=M.split("|").find(Dt=>Dt.includes("ESRI PE String = ")),Tt=Et?Et.replace("ESRI PE String = ",""):"";F=Tt.startsWith("COMPD_CS")||Tt.startsWith("PROJCS")||Tt.startsWith("GEOGCS")?{wkid:null,wkt:Tt}:null}const X=Q(l,"GEOTIEPOINTS"),q=Q(l,"GEOPIXELSCALE"),lt=Q(l,"GEOTRANSMATRIX"),mt=l.has("GEOKEYDIRECTORY")?l.get("GEOKEYDIRECTORY").data:null;let ft,Ct,bt=!1,_t=!1;if(mt){bt=2===h(mt,"GTRasterTypeGeoKey");const Et=h(mt,"GTModelTypeGeoKey");if(2===Et){const Tt=h(mt,"GeographicTypeGeoKey");Tt>=1024&&Tt<=32766&&(F={wkid:Tt}),F||32767!==Tt||(_t=!0,F={wkid:4326})}else if(1===Et){const Tt=h(mt,"ProjectedCSTypeGeoKey");Tt>=1024&&Tt<=32766&&(F={wkid:Tt})}}if(q&&X&&X.length>=6?(ft=[q[0],0,X[3]-X[0]*q[0],0,-Math.abs(q[1]),X[4]-X[1]*q[1]],bt&&(ft[2]-=.5*ft[0]+.5*ft[1],ft[5]-=.5*ft[3]+.5*ft[4])):lt&&16===lt.length&&(ft=bt?[lt[0],lt[1],lt[3]-.5*lt[0],lt[4],lt[5],lt[7]-.5*lt[5]]:[lt[0],lt[1],lt[3],lt[4],lt[5],lt[7]]),ft){const Et=[{x:0,y:g},{x:0,y:0},{x:v,y:g},{x:v,y:0}];let Tt,Dt=Number.POSITIVE_INFINITY,Lt=Number.POSITIVE_INFINITY,Ut=Number.NEGATIVE_INFINITY,Bt=Number.NEGATIVE_INFINITY;for(let Gt=0;Gt<Et.length;Gt++)Tt=G(Et[Gt],ft),Dt=Tt.x>Dt?Dt:Tt.x,Ut=Tt.x<Ut?Ut:Tt.x,Lt=Tt.y>Lt?Lt:Tt.y,Bt=Tt.y<Bt?Bt:Tt.y;Ct={xmin:Dt,xmax:Ut,ymin:Lt,ymax:Bt,spatialReference:F}}else Ct={xmin:-.5,ymin:.5-g,xmax:v-.5,ymax:.5,spatialReference:F};_t&&(Ct.xmax-Ct.xmin>400||Math.max(Math.abs(Ct.xmin),Math.abs(Ct.xmax))>361)&&(F=null,Ct.spatialReference=null);const It=D(p);let At,xt,Mt,Pt,kt;if(It.length>0){Mt=Math.round(Math.log(v/h(It[0],"IMAGEWIDTH"))/Math.LN2);const Et=It[It.length-1];Pt=Math.round(Math.log(v/h(Et,"IMAGEWIDTH"))/Math.LN2),At=h(Et,"TILEWIDTH"),xt=h(Et,"TILELENGTH")}At=null!=Pt&&Pt>0?At||c:null,xt=null!=Pt&&Pt>0?xt||m:null,c&&(kt=[{maxCol:Math.ceil(v/c)-1,maxRow:Math.ceil(g/m)-1,minRow:0,minCol:0}],It.forEach(Et=>{kt.push({maxCol:Math.ceil(h(Et,"IMAGEWIDTH")/h(Et,"TILEWIDTH"))-1,maxRow:Math.ceil(h(Et,"IMAGELENGTH")/h(Et,"TILELENGTH"))-1,minRow:0,minCol:0})}));const Ot=ut(p[0],"GDAL_METADATA"),Rt=f(Ot);return pt+=" "+r({width:v,height:g,tileWidth:c,tileHeight:m,planes:x,ifds:p}),{width:v,height:g,tileWidth:c,tileHeight:m,planes:x,isBSQ:$,pixelType:R,compression:Y,noData:gt,hasMaskBand:L(p).length===It.length+1,isSupported:st,message:pt,extent:Ct,isPseudoGeographic:_t,affine:q?null:ft,firstPyramidLevel:Mt,maximumPyramidLevel:Pt,pyramidBlockWidth:At,pyramidBlockHeight:xt,tileBoundary:kt,metadata:Rt}}function A(p,l){const c=H(p,"PLANARCONFIGURATION");return c?2===c[0]:!!l&&l.isBSQ}function D(p){return p.filter(l=>1===h(l,"NEWSUBFILETYPE"))}function L(p){return p.filter(l=>{const c=4==(4&(h(l,"NEWSUBFILETYPE")??0)),m=4===h(l,"PHOTOMETRICINTERPRETATION");return c&&m})}function I(p,l,c){const m=p.getUint32(l,c),v=p.getUint32(l+4,c);return c?v*et+m:m*et+v}function k(p,l,c){let m=c?p.getInt32(l,c):p.getUint32(l,c),v=c?p.getUint32(l+4,c):p.getInt32(l+4,c);const g=(c?m:v)>=0?1:-1;return c?m*=g:v*=g,g*(c?v*et+m:m*et+v)}function E(p,l,c,m){return m?I(p,l,c):p.getUint32(l,c)}function V(p){const l=new DataView(p,0,16),c=l.getUint16(0,!1);let m=null;if(18761===c)m=!0;else{if(19789!==c)throw new Error("unexpected endianess byte");m=!1}const v=l.getUint16(2,m);if(42!==v&&43!==v)throw new Error("unexpected tiff identifier");let g=4;const P=43===v;if(P){const x=l.getUint16(g,m);if(g+=2,8!==x)throw new Error("unsupported bigtiff version");if(0!==l.getUint16(g,m))throw new Error("unsupported bigtiff version");g+=2}return{littleEndian:m,isBigTiff:P,firstIFDPos:E(l,g,m,P)}}function O(p,l,c,m=0,v=at.Z.tiffTags,g=4){const P=d(p,l,c,m,v,g);let x;const B=P.ifd;if(B){if(at.Z.ifdTags.forEach((R,$)=>{B.has($)&&(x=B.get($),x.data=d(p,l,x.valueOffset-m,m,R).ifd)}),B.has("GEOKEYDIRECTORY")){x=B.get("GEOKEYDIRECTORY");const R=x.values;if(R&&R.length>4){const $=R[0]+"."+R[1]+"."+R[2];x.data=d(p,l,x.valueOffset+6-m,m,at.Z.geoKeys,2).ifd,x.data&&x.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[$]})}}if(B.has("XMP")){x=B.get("XMP");const R=x.values;"number"==typeof R[0]&&7===x.type&&(x.values=[(0,ct.f)(new Uint8Array(R))])}}return P}function r(p){const{width:l,height:c,tileHeight:m,tileWidth:v}=p,g=p.planes,P=v?v*m:l*c,x=h(p.ifds[0],"BITSPERSAMPLE");let B="";return P*g>2**30/(x>8?x/8:1)&&(B=v?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported"),B}function _(p,l){return T.apply(this,arguments)}function T(){return(T=(0,J.Z)(function*(p,l){const{headerInfo:c,ifd:m,offsets:v,sizes:g}=l,P=[];for(let bt=0;bt<v.length;bt++){const _t=yield a(p,c.littleEndian,m,v[bt],g[bt]||p.byteLength);P.push(_t)}const x=A(m,c),B=h(m,"BITSPERSAMPLE"),R=W(h(m,"SAMPLEFORMAT")??1,B),$=h(m,"SAMPLESPERPIXEL")||c.planes,rt=z(R),gt=h(m,"TILEWIDTH"),it=h(m,"TILELENGTH"),Y=h(m,"COMPRESSION")??1,st=gt*it;let pt;const M=[];let F=P[0];const X=34887===Y;for(let bt=0;bt<$;bt++){if(pt=new rt(st),P.length===$)F=P[bt],F.length===st&&(pt=F);else if(F.length)if(x||X)pt=F.length===st?F:F.slice(st*bt,st*(bt+1));else for(let _t=0;_t<st;_t++)pt[_t]=F[_t*$+bt];M.push(pt)}const q=c.noData?c.noData[0]:l.noDataValue,lt=c.metadata?c.metadata.statistics:null,mt=lt?lt.map(bt=>bt.min):null,ft=lt?lt.map(bt=>bt.max):null,Ct={pixelType:R,width:gt,height:it,pixels:M,noDataValue:q};return null!=q?(0,yt.A)(Ct,q):mt&&ft&&l.applyMinMaxConstraint&&(Ct.mask=n(M,mt,ft)),Ct})).apply(this,arguments)}function U(p){return nt.apply(this,arguments)}function nt(){return nt=(0,J.Z)(function*(p,l={}){const c=l.pyramidLevel||0,m=l.headerInfo||function j(p){const{littleEndian:l,isBigTiff:c,firstIFDPos:m}=V(p);let v=m;const g=[];do{const P=O(p,l,v,0,at.Z.tiffTags,c?8:4);if(!P.success)break;g.push(P.ifd),v=P.nextIFD}while(v>0);return{...N(g),littleEndian:l,isBigTiff:c,ifds:g,pyramidIFDs:D(g),maskIFDs:L(g)}}(p),{ifds:v,noData:g}=m;if(0===v.length)throw new Error("no valid image file directory");const P=r(m);if(P)throw P;let x=null;const B=-1===c?v[v.length-1]:v[c],R=g??l.noDataValue;return x=m.tileWidth?yield function e(p,l,c){return t.apply(this,arguments)}(p,m,B):i(p,m,B),x&&(null!=R&&(0,yt.A)(x,R),x)}),nt.apply(this,arguments)}},16854:(St,wt,Z)=>{Z.d(wt,{Z:()=>at});const J=(()=>{const o=[];return o[254]="NEWSUBFILETYPE",o[255]="SUBFILETYPE",o[256]="IMAGEWIDTH",o[257]="IMAGELENGTH",o[258]="BITSPERSAMPLE",o[259]="COMPRESSION",o[262]="PHOTOMETRICINTERPRETATION",o[263]="THRESHHOLDING",o[264]="CELLWIDTH",o[265]="CELLLENGTH",o[266]="FILLORDER",o[269]="DOCUMENTNAME",o[270]="IMAGEDESCRIPTION",o[271]="MAKE",o[272]="MODEL",o[273]="STRIPOFFSETS",o[274]="ORIENTATION",o[277]="SAMPLESPERPIXEL",o[278]="ROWSPERSTRIP",o[279]="STRIPBYTECOUNTS",o[280]="MINSAMPLEVALUE",o[281]="MAXSAMPLEVALUE",o[282]="XRESOLUTION",o[283]="YRESOLUTION",o[284]="PLANARCONFIGURATION",o[285]="PAGENAME",o[286]="XPOSITION",o[287]="YPOSITION",o[288]="FREEOFFSETS",o[289]="FREEBYTECOUNTS",o[290]="GRAYRESPONSEUNIT",o[291]="GRAYRESPONSECURVE",o[292]="T4OPTIONS",o[293]="T6OPTIONS",o[296]="RESOLUTIONUNIT",o[297]="PAGENUMBER",o[300]="COLORRESPONSEUNIT",o[301]="TRANSFERFUNCTION",o[305]="SOFTWARE",o[306]="DATETIME",o[315]="ARTIST",o[316]="HOSTCOMPUTER",o[317]="PREDICTOR",o[318]="WHITEPOINT",o[319]="PRIMARYCHROMATICITIES",o[320]="COLORMAP",o[321]="HALFTONEHINTS",o[322]="TILEWIDTH",o[323]="TILELENGTH",o[324]="TILEOFFSETS",o[325]="TILEBYTECOUNTS",o[326]="BADFAXLINES",o[327]="CLEANFAXDATA",o[328]="CONSECUTIVEBADFAXLINES",o[330]="SUBIFD",o[332]="INKSET",o[333]="INKNAMES",o[334]="NUMBEROFINKS",o[336]="DOTRANGE",o[337]="TARGETPRINTER",o[338]="EXTRASAMPLES",o[339]="SAMPLEFORMAT",o[340]="SMINSAMPLEVALUE",o[341]="SMAXSAMPLEVALUE",o[342]="TRANSFERRANGE",o[347]="JPEGTABLES",o[512]="JPEGPROC",o[513]="JPEGIFOFFSET",o[514]="JPEGIFBYTECOUNT",o[515]="JPEGRESTARTINTERVAL",o[517]="JPEGLOSSLESSPREDICTORS",o[518]="JPEGPOINTTRANSFORM",o[519]="JPEGQTABLES",o[520]="JPEGDCTABLES",o[521]="JPEGACTABLES",o[529]="YCBCRCOEFFICIENTS",o[530]="YCBCRSUBSAMPLING",o[531]="YCBCRPOSITIONING",o[532]="REFERENCEBLACKWHITE",o[700]="XMP",o[33550]="GEOPIXELSCALE",o[33922]="GEOTIEPOINTS",o[33432]="COPYRIGHT",o[42112]="GDAL_METADATA",o[42113]="GDAL_NODATA",o[50844]="RPCCOEFFICIENT",o[34264]="GEOTRANSMATRIX",o[34735]="GEOKEYDIRECTORY",o[34736]="GEODOUBLEPARAMS",o[34737]="GEOASCIIPARAMS",o[34665]="EXIFIFD",o[34853]="GPSIFD",o[40965]="INTEROPERABILITYIFD",o})(),ct=(()=>{const o=J.slice();return o[36864]="ExifVersion",o[40960]="FlashpixVersion",o[40961]="ColorSpace",o[42240]="Gamma",o[37121]="ComponentsConfiguration",o[37122]="CompressedBitsPerPixel",o[40962]="PixelXDimension",o[40963]="PixelYDimension",o[37500]="MakerNote",o[37510]="UserComment",o[40964]="RelatedSoundFile",o[36867]="DateTimeOriginal",o[36868]="DateTimeDigitized",o[36880]="OffsetTime",o[36881]="OffsetTimeOriginal",o[36882]="OffsetTimeDigitized",o[37520]="SubSecTime",o[37521]="SubSecTimeOriginal",o[37522]="SubSecTimeDigitized",o[37888]="Temperature",o[37889]="Humidity",o[37890]="Pressure",o[37891]="WaterDepth",o[37892]="Acceleration",o[37893]="CameraElevationAngle",o[42016]="ImageUniqueID",o[42032]="CameraOwnerName",o[42033]="BodySerialNumber",o[42034]="LensSpecification",o[42035]="LensMake",o[42036]="LensModel",o[42037]="LensSerialNumber",o[33434]="ExposureTime",o[33437]="FNumber",o[34850]="ExposureProgram",o[34852]="SpectralSensitivity",o[34855]="PhotographicSensitivity",o[34856]="OECF",o[34864]="SensitivityType",o[34865]="StandardOutputSensitivity",o[34866]="RecommendedExposureIndex",o[34867]="ISOSpeed",o[34868]="ISOSpeedLatitudeyyy",o[34869]="ISOSpeedLatitudezzz",o[37377]="ShutterSpeedValue",o[37378]="ApertureValue",o[37379]="BrightnessValue",o[37380]="ExposureBiasValue",o[37381]="MaxApertureValue",o[37382]="SubjectDistance",o[37383]="MeteringMode",o[37384]="LightSource",o[37385]="Flash",o[37386]="FocalLength",o[37396]="SubjectArea",o[41483]="FlashEnergy",o[41484]="SpatialFrequencyResponse",o[41486]="FocalPlaneXResolution",o[41487]="FocalPlaneYResolution",o[41488]="FocalPlaneResolutionUnit",o[41492]="SubjectLocation",o[41493]="ExposureIndex",o[41495]="SensingMethod",o[41728]="FileSource",o[41729]="SceneType",o[41730]="CFAPattern",o[41985]="CustomRendered",o[41986]="ExposureMode",o[41987]="WhiteBalance",o[41988]="DigitalZoomRatio",o[41989]="FocalLengthIn35mmFilm",o[41990]="SceneCaptureType",o[41991]="GainControl",o[41992]="Contrast",o[41993]="Saturation",o[41994]="Sharpness",o[41995]="DeviceSettingDescription",o[41996]="SubjectDistanceRange",o})(),K=(()=>{const o=[];return o[1024]="GTModelTypeGeoKey",o[1025]="GTRasterTypeGeoKey",o[1026]="GTCitationGeoKey",o[2048]="GeographicTypeGeoKey",o[2049]="GeogCitationGeoKey",o[2050]="GeogGeodeticDatumGeoKey",o[2051]="GeogPrimeMeridianGeoKey",o[2052]="GeogLinearUnitsGeoKey",o[2053]="GeogLinearUnitSizeGeoKey",o[2054]="GeogAngularUnitsGeoKey",o[2055]="GeogAngularUnitSizeGeoKey",o[2056]="GeogEllipsoidGeoKey",o[2057]="GeogSemiMajorAxisGeoKey",o[2058]="GeogSemiMinorAxisGeoKey",o[2059]="GeogInvFlatteningGeoKey",o[2061]="GeogPrimeMeridianLongGeoKey",o[2060]="GeogAzimuthUnitsGeoKey",o[3072]="ProjectedCSTypeGeoKey",o[3073]="PCSCitationGeoKey",o[3074]="ProjectionGeoKey",o[3075]="ProjCoordTransGeoKey",o[3076]="ProjLinearUnitsGeoKey",o[3077]="ProjLinearUnitSizeGeoKey",o[3078]="ProjStdParallel1GeoKey",o[3079]="ProjStdParallel2GeoKey",o[3080]="ProjNatOriginLongGeoKey",o[3081]="ProjNatOriginLatGeoKey",o[3082]="ProjFalseEastingGeoKey",o[3083]="ProjFalseNorthingGeoKey",o[3084]="ProjFalseOriginLongGeoKey",o[3085]="ProjFalseOriginLatGeoKey",o[3086]="ProjFalseOriginEastingGeoKey",o[3087]="ProjFalseOriginNorthingGeoKey",o[3088]="ProjCenterLongGeoKey",o[3090]="ProjCenterEastingGeoKey",o[3091]="ProjCenterNorthingGeoKey",o[3092]="ProjScaleAtNatOriginGeoKey",o[3093]="ProjScaleAtCenterGeoKey",o[3094]="ProjAzimuthAngleGeoKey",o[3095]="ProjStraightVertPoleLongGeoKey",o[4096]="VerticalCSTypeGeoKey",o[4097]="VerticalCitationGeoKey",o[4098]="VerticalDatumGeoKey",o[4099]="VerticalUnitsGeoKey",o})(),yt=new Map;yt.set("EXIFIFD",ct),yt.set("GPSIFD",["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"]);const at={tiffTags:J,ifdTags:yt,geoKeys:K,getTagName:(o,tt)=>{let dt=(tt||J)[o];return void 0===dt&&(dt="unknown"+String(o)),dt}}},83931:(St,wt,Z)=>{Z.d(wt,{f:()=>J});const J=(()=>{const ct=new ArrayBuffer(4),ht=new Uint8Array(ct);return new Uint32Array(ct)[0]=1,1===ht[0]})()},57618:(St,wt,Z)=>{Z.d(wt,{AV:()=>H,Hv:()=>z,Oh:()=>G,ZF:()=>dt,dy:()=>h,gI:()=>tt,hE:()=>o,js:()=>W,oc:()=>at,um:()=>ut});var J=Z(51172),ct=Z(8868),ht=Z(86741),K=Z(11856);const vt=1,yt=[.299,.587,.114];function at(d,y=256){y=Math.min(y,256);const{size:S,counts:w}=d,s=new Uint8Array(S),a=w.reduce((n,f)=>n+f/y,0);let u=0,e=0,t=0,i=a;for(let n=0;n<S;n++)if(t+=w[n],!(n<S-1&&t+w[n+1]<i)){for(;u<y-1&&i<t;)u++,i+=a;for(let f=e;f<=n;f++)s[f]=u;e=n+1}for(let n=e;n<S;n++)s[n]=y-1;return s}function o(d){const{minCutOff:y,maxCutOff:S,gamma:w,pixelType:s,rounding:a}=d,u=d.outMin||0,e=d.outMax||255;if(!["u8","u16","s8","s16"].includes(s))return null;const t=y.length;let i,n,f=0;"s8"===s?f=-127:"s16"===s&&(f=-32767);let C=256;["u16","s16"].includes(s)&&(C=65536);const N=[],A=[],D=e-u;for(i=0;i<t;i++)A[i]=S[i]-y[i],N[i]=0===A[i]?0:D/A[i];let L;const j=[];let I,k,E;if(w&&w.length>=t){const V=ut(t,w);for(i=0;i<t;i++){for(E=[],n=0;n<C;n++)if(0!==A[i])if(I=n+f,L=(I-y[i])/A[i],k=1,w[i]>1&&(k-=(1/D)**(L*V[i])),I<S[i]&&I>y[i]){const O=k*D*L**(1/w[i])+u;E[n]="floor"===a?Math.floor(O):"round"===a?Math.round(O):O}else E[n]=I>=S[i]?e:u;else E[n]=u;j[i]=E}}else for(i=0;i<t;i++){for(E=[],n=0;n<C;n++)if(I=n+f,I<=y[i])E[n]=u;else if(I>=S[i])E[n]=e;else{const V=(I-y[i])*N[i]+u;E[n]="floor"===a?Math.floor(V):"round"===a?Math.round(V):V}j[i]=E}if(null!=d.contrastOffset){const V=tt(d.contrastOffset,d.brightnessOffset);for(i=0;i<t;i++)for(E=j[i],n=0;n<C;n++)E[n]=V[E[n]]}return{lut:j,offset:f}}function tt(d,y){const S=Math.min(Math.max(d,-100),100),w=Math.min(Math.max(y??0,-100),100);let u=0,e=0;const t=new Uint8Array(256);for(u=0;u<256;u++)S>0&&S<100?e=(200*u-25500+510*w)/(2*(100-S))+128:S<=0&&S>-100?e=(200*u-25500+510*w)*(100+S)/2e4+128:100===S?(e=200*u-25500+256*(100-S)+510*w,e=e>0?255:0):-100===S&&(e=128),t[u]=e>255?255:e<0?0:e;return t}function dt(d,y,S){const w=[];for(let s=0;s<y.length;s++){let a=0,u=0,e=0;"min"in y[s]?({min:a,max:u,avg:e}=y[s]):[a,u,e]=y[s];let t=e??0;"u8"!==d&&(t=255*(t-a)/(u-a)),S&&(t*=yt[s]),w.push(et(t))}return w}function et(d){if(d<=0||d>=255)return vt;let y=0;150!==d&&(y=d<=150?45*Math.cos(.01047*d):17*Math.sin(.021*d));const w=d+y,s=Math.log(d/255),a=Math.log(w/255);if(0===a)return vt;const u=s/a;return isNaN(u)?vt:Math.min(9.9,Math.max(.01,u))}function W(d){const{pixels:y,mask:S,pixelType:w,bandMasks:s}=d,a=y.map((u,e)=>function ot(d,y,S,w){let s=1/0,a=-1/0,u=0,e=0,t=0,i=0;const n=d.length,f=new Map,C=[];for(let r=0;r<n;r++){const b=d[r];if(!y||y[r]){C.push(b);const _=(f.get(b)??0)+1;f.set(b,_),_>i&&(i=_,t=b),s=b<s?b:s,a=b>a?b:a,u+=b,e++}}if(0===e)return{statistics:{min:0,max:0,avg:0,stddev:0,mode:0,median:0},histogram:null};const N=u/e;let A=0;for(let r=0;r<n;r++)y&&!y[r]||(A+=(d[r]-N)**2);const D=y?y.filter(r=>r).length:n,L=D<=1?0:Math.sqrt(A/(D-1));C.sort((r,b)=>r-b);const j=e>>>1,I={min:s,max:a,avg:N,stddev:L,mode:t,median:e%2?C[Math.floor(j)]:(C[j-1]+C[j])/2};if(!w)return{statistics:I,histogram:null};if(["u8","s8","u4","u2","u1"].includes(S)){const r=a-s+1,b=new Uint32Array(r);for(let _=0;_<n;_++)y&&!y[_]||b[d[_]-s]++;return{statistics:I,histogram:{min:s-.5,max:a+.5,size:r,counts:b}}}const k=256,E=new Uint32Array(k),V=(a-s)/k;if(0===V)return{statistics:I,histogram:{min:s,max:a,size:1,counts:new Uint32Array(1).fill(e)}};const O=new Uint32Array(257);for(let r=0;r<n;r++)y&&!y[r]||O[Math.floor((d[r]-s)/V)]++;for(let r=0;r<255;r++)E[r]=O[r];return E[255]=O[255]+O[k],{statistics:I,histogram:{min:s,max:a,size:k,counts:E}}}(u,s?.[e]??S,w,!0));return{statistics:a.map(({statistics:u})=>u),histograms:a.map(({histogram:u})=>u)}}function z(d){if(!d?.pixels?.length)return null;const{pixels:y,mask:S,bandMasks:w,pixelType:s}=d,a=d.width*d.height,u=y.length;let e,t,i,n,f;const C=[],N=[];let A,D,L,j,I,k,E,V,O,r;const b=256;for(n=0;n<u;n++){A=new Uint32Array(b),L=y[n];const _=w?.[n]??S;if("u8"===s)if(e=-.5,t=255.5,_)for(f=0;f<a;f++)_[f]&&A[L[f]]++;else for(f=0;f<a;f++)A[L[f]]++;else{let T=!1;d.statistics||(d.updateStatistics(),T=!0);const U=d.statistics;if(e=U[n].minValue,t=U[n].maxValue,i=(t-e)/b,0===i){!U||d.validPixelCount||T||d.updateStatistics();const nt=(d.validPixelCount||d.width*d.height)/b;for(let p=0;p<b;p++)A[p]=Math.round(nt*(p+1))-Math.round(nt*p)}else{for(D=new Uint32Array(257),f=0;f<a;f++)_&&!_[f]||D[Math.floor((L[f]-e)/i)]++;for(f=0;f<255;f++)A[f]=D[f];A[255]=D[255]+D[b]}}for(C.push({min:e,max:t,size:b,counts:A}),j=0,I=0,V=0,f=0;f<b;f++)j+=A[f],I+=f*A[f];for(O=I/j,f=0;f<b;f++)V+=A[f]*(f-O)**2;r=Math.sqrt(V/(j-1)),i=(t-e)/b,k=(O+.5)*i+e,E=r*i,N.push({min:e,max:t,avg:k,stddev:E})}return{statistics:N,histograms:C}}function G(d){const y=[];for(let S=0;S<d.length;S++){const{min:w,max:s,size:a,counts:u}=d[S];let e=0,t=0;for(let A=0;A<a;A++)e+=u[A],t+=A*u[A];const i=t/e;let n=0;for(let A=0;A<a;A++)n+=u[A]*(A-i)**2;const f=(s-w)/a,C=(i+.5)*f+w,N=Math.sqrt(n/(e-1))*f;y.push({min:w,max:s,avg:C,stddev:N})}return y}function H(d,y){const{pixelBlock:S,bandIds:w,returnHistogramLut:s,rasterInfo:a}=y;let u=null,e=null,t=d.stretchType;if("number"==typeof t&&(t=K.J[t]),d.dra)if("minMax"===t&&S?.statistics)u=S.statistics.map(T=>[T.minValue,T.maxValue,0,0]);else{const T=z(S);u=null!=T?T.statistics:null,e=null!=T?T.histograms:null}else u=d.statistics?.length?d.statistics:a.statistics,e="histograms"in d?d.histograms:void 0,e||(e=a.histograms);"percentClip"!==t&&"histogramEqualization"!==t||e?.length||(t="minMax");const i=u?.length||e?.length||a.bandCount,n=[],f=[];let C,N,A,D,L,j,I,k,E;u&&!Array.isArray(u[0])&&(u=u.map(T=>[T.min,T.max,T.avg,T.stddev]));const[V,O]=(0,ht.r)(a.pixelType);if(!u?.length){for(u=[],k=0;k<i;k++)u.push([V,O,1,1]);"standardDeviation"===t&&(t="minMax")}switch(t){case"none":for(k=0;k<i;k++)n[k]=V,f[k]=O;break;case"minMax":for(k=0;k<i;k++){const T=u[k];n[k]=T[0],f[k]=T[1]}break;case"standardDeviation":{const{numberOfStandardDeviations:T=2}=d;for(k=0;k<i;k++){const U=u[k];n[k]=U[2]-T*U[3],f[k]=U[2]+T*U[3],n[k]<U[0]&&(n[k]=U[0]),f[k]>U[1]&&(f[k]=U[1])}}break;case"histogramEqualization":for((0,J.O3)(e),k=0;k<i;k++)n[k]=e[k].min,f[k]=e[k].max;break;case"percentClip":for((0,J.O3)(e),k=0;k<e.length;k++){for(C=e[k],L=new Uint32Array(C.size),D=[...C.counts],D.length>=20&&(D[0]=D[1]=D[2]=D[D.length-1]=D[D.length-2]=0),A=0,N=(C.max-C.min)/C.size,I=-.5===C.min&&1===N?.5:0,E=0;E<C.size;E++)A+=D[E],L[E]=A;for(j=(d.minPercent||0)*A/100,n[k]=C.min+I,E=0;E<C.size;E++)if(L[E]>j){n[k]=C.min+N*(E+I);break}for(j=(1-(d.maxPercent||0)/100)*A,f[k]=C.max+I,E=C.size-2;E>=0;E--)if(L[E]<j){f[k]=C.min+N*(E+2-I);break}if(f[k]<n[k]){const T=n[k];n[k]=f[k],f[k]=T}}break;default:for(k=0;k<i;k++){const T=u[k];n[k]=T[0],f[k]=T[1]}}let r,b,_;return"histogramEqualization"===t?((0,J.O3)(e),b=e[0].size||256,r=0,s&&(_=e.map(T=>at(T)))):(b=d.max||255,r=d.min||0),function Q(d,y){if(null==y||0===y.length)return d;const S=Math.max.apply(null,y),{minCutOff:w,maxCutOff:s,outMin:a,outMax:u,histogramLut:e}=d;return w.length===y.length||w.length<=S?d:{minCutOff:y.map(t=>w[t]),maxCutOff:y.map(t=>s[t]),histogramLut:e?y.map(t=>e[t]):null,outMin:a,outMax:u}}({minCutOff:n,maxCutOff:f,outMax:b,outMin:r,histogramLut:_},w)}function ut(d,y){const S=new Float32Array(d);for(let w=0;w<d;w++)S[w]=y[w]>1?y[w]>2?6.5+(y[w]-2)**2.5:6.5+100*(2-y[w])**4:1;return S}function h(d,y){if(!d?.pixels?.length)return d;const{mask:S,bandMasks:w,width:s,height:a,pixels:u}=d,{minCutOff:e,maxCutOff:t,gamma:i}=y,n=y.outMin||0,f=y.outMax||255,C=s*a,N=y.outputPixelType||"u8",A=d.pixels.map(()=>ct.Z.createEmptyBand(N,C)),D=A.length,L=f-n,j=[],I=[];for(let r=0;r<D;r++)I[r]=t[r]-e[r],j[r]=0===I[r]?0:L/I[r];const k=N.startsWith("u")||N.startsWith("s"),V=!!y.isRenderer;if(i&&i.length>=D){const r=ut(D,i);for(let b=0;b<D;b++){const _=w?.[b]??S;for(let T=0;T<C;T++)if(null==_||_[T]){if(0===I[b]){A[b][T]=n;continue}const U=u[b][T],nt=(U-e[b])/I[b];let p=1;if(i[b]>1&&(p-=(1/L)**(nt*r[b])),U<t[b]&&U>e[b]){const l=p*L*nt**(1/i[b])+n;A[b][T]=V?Math.floor(l):k?Math.round(l):l}else A[b][T]=U>=t[b]?f:n}}}else for(let r=0;r<D;r++){const b=w?.[r]??S;for(let _=0;_<C;_++)if(null==b||b[_]){const T=u[r][_];if(T<t[r]&&T>e[r]){const U=(T-e[r])*j[r]+n;A[r][_]=V?Math.floor(U):k?Math.round(U):U}else A[r][_]=T>=t[r]?f:n}}const O=new ct.Z({width:s,height:a,mask:S,bandMasks:w,pixels:A,pixelType:N});return O.updateStatistics(),O}},5134:(St,wt,Z)=>{Z.d(wt,{M_:()=>et,Ne:()=>ot,TK:()=>vt,Ub:()=>tt,_p:()=>K,vC:()=>o,yg:()=>dt});var J=Z(8868),ct=Z(98797);const ht=1,K=1/111e3;function vt(W){let{altitude:z,azimuth:G}=W;const{hillshadeType:H,pixelSizePower:Q=1,pixelSizeFactor:ut=1,scalingType:h,isGCS:d,resolution:y}=W,S="multi-directional"===H?2*W.zFactor:W.zFactor,{x:w,y:s}=y;let a=S/(8*w),u=S/(8*s);if(d&&S>.001&&(a/=K,u/=K),"adjusted"===h)if(d){const V=w*K,O=s*K;a=(S+V**Q*ut)/(8*V),u=(S+O**Q*ut)/(8*O)}else a=(S+w**Q*ut)/(8*w),u=(S+s**Q*ut)/(8*s);let e=(90-z)*Math.PI/180,t=Math.cos(e),i=(360-G+90)*Math.PI/180,n=Math.sin(e)*Math.cos(i),f=Math.sin(e)*Math.sin(i);const C=[315,270,225,360,180,0],N=[60,60,60,60,60,90],A=new Float32Array([3,5,3,2,1,4]),D=A.reduce((V,O)=>V+O),L=A.map(V=>V/D),j="multi-directional"===H?C.length:1,I=new Float32Array(6),k=new Float32Array(6),E=new Float32Array(6);if("multi-directional"===H)for(let V=0;V<j;V++)z=N[V],G=C[V],e=(90-z)*Math.PI/180,t=Math.cos(e),i=(360-G+90)*Math.PI/180,n=Math.sin(e)*Math.cos(i),f=Math.sin(e)*Math.sin(i),I[V]=t,k[V]=n,E[V]=f;else I.fill(t),k.fill(n),E.fill(f);return{resolution:y,factor:[a,u],sinZcosA:n,sinZsinA:f,cosZ:t,sinZcosAs:k,sinZsinAs:E,cosZs:I,weights:L,hillshadeType:["traditional","multi-directional"].indexOf(H)}}function yt(W,z){const{width:G,height:H}=W,Q=G*H,ut=new Uint8Array(Q),h=null!=W.mask;let d;if(h){d=new Uint8Array(W.mask);for(let D=0;D<d.length;D++)d[D]&&(ut[D]=1,d[D]=1)}const y=W.pixels[0],S=new Float32Array(Q),w=new Float32Array(Q);let s,a=0;if(z){const{resolution:D}=z,L=D?(D.x+D.y)/2:1;a=200*z.zFactor/(L*L),s=new Float32Array(Q)}const u=z?.curvatureType;let e,t,i,n,f,C,N,A;for(let D=ht;D<H-ht;D++){const L=D*G;for(let j=ht;j<G-ht;j++){const I=L+j;if(!d||0!==d[I]){if(d){if(d[I-G-1]+d[I-G]+d[I-G+1]+d[I-1]+d[I+1]+d[I+G-1]+d[I+G]+d[I+G+1]<7){ut[I]=0;continue}e=d[I-G-1]?y[I-G-1]:y[I],t=d[I-G]?y[I-G]:y[I],i=d[I-G+1]?y[I-G+1]:y[I],n=d[I-1]?y[I-1]:y[I],f=d[I+1]?y[I+1]:y[I],C=d[I+G-1]?y[I+G-1]:y[I],N=d[I+G]?y[I+G]:y[I],A=d[I+G+1]?y[I+G+1]:y[I]}else e=y[I-G-1],t=y[I-G],i=y[I-G+1],n=y[I-1],f=y[I+1],C=y[I+G-1],N=y[I+G],A=y[I+G+1];if(S[I]=i+f+f+A-(e+n+n+C),w[I]=C+N+N+A-(e+t+t+i),null!=s){const k=y[I],E=.5*(n+f)-k,V=.5*(t+N)-k;if("standard"===u)s[I]=-a*(E+V);else{const O=(-e+i+C-A)/4,r=(-n+f)/2,b=(t-N)/2,_=r*r,T=b*b,U=_+T;U&&(s[I]="profile"===u?a*(E*_+V*T+O*r*b)/U:-a*(E*T+V*_-O*r*b)/U)}}}}}return{outMask:h?ut:null,dzxs:S,dzys:w,curvatures:s}}function at(W,z,G){for(let H=0;H<G;H++)W[H*z]=W[H*z+1],W[(H+1)*z-1]=W[(H+1)*z-2];for(let H=1;H<z-1;H++)W[H]=W[H+z],W[H+(G-1)*z]=W[H+(G-2)*z]}function o(W,z){if(!(0,ct.nk)(W))return W;const{factor:G,sinZcosA:H,sinZsinA:Q,cosZ:ut,sinZcosAs:h,sinZsinAs:d,cosZs:y,weights:S}=vt(z),[w,s]=G,a="traditional"===z.hillshadeType,{width:u,height:e}=W,t=new Uint8Array(u*e),{dzxs:i,dzys:n,outMask:f}=yt(W);for(let C=ht;C<e-ht;C++){const N=C*u;for(let A=ht;A<u-ht;A++){const D=N+A;if(!f||f[D]){const L=i[D]*w,j=n[D]*s,I=Math.sqrt(1+L*L+j*j);let k=0;if(a){let E=255*(ut+Q*j-H*L)/I;E<0&&(E=0),k=E}else{const E=d.length;for(let V=0;V<E;V++){let O=255*(y[V]+d[V]*j-h[V]*L)/I;O<0&&(O=0),k+=O*S[V]}}t[D]=255&k}}}return at(t,u,e),new J.Z({width:u,height:e,pixels:[t],mask:f,pixelType:"u8",validPixelCount:W.validPixelCount,statistics:[{minValue:0,maxValue:255}]})}function tt(W,z,G,H){if(!(0,ct.nk)(W)||!(0,ct.nk)(z))return;const{min:Q,max:ut}=H,h=W.pixels[0],{pixels:d,mask:y}=z,S=d[0],w=255.00001/(ut-Q),s=new Uint8ClampedArray(S.length),a=new Uint8ClampedArray(S.length),u=new Uint8ClampedArray(S.length),e=G.length-1;for(let t=0;t<S.length;t++){if(y&&0===y[t])continue;const i=Math.floor((S[t]-Q)*w),[n,f]=G[i<0?0:i>e?e:i],C=h[t],N=C*f,A=N*(1-Math.abs(n%2-1)),D=C-N;switch(Math.floor(n)){case 0:s[t]=N+D,a[t]=A+D,u[t]=D;break;case 1:s[t]=A+D,a[t]=N+D,u[t]=D;break;case 2:s[t]=D,a[t]=N+D,u[t]=A+D;break;case 3:s[t]=D,a[t]=A+D,u[t]=N+D;break;case 4:s[t]=A+D,a[t]=D,u[t]=N+D;break;case 5:case 6:s[t]=N+D,a[t]=D,u[t]=A+D}}W.pixels=[s,a,u],W.updateStatistics()}function dt(W,z){if(!(0,ct.nk)(W))return W;const G=z.zFactor,H=z.pixelSizePower??1,Q=z.pixelSizeFactor??1,ut=z.slopeType,h=z.isGCS,{x:d,y}=z.resolution;let S=G/(8*d),w=G/(8*y);h&&Math.abs(G-1)<1e-4&&(S/=K,w/=K),"adjusted"===ut&&(S=(G+d**H*Q)/(8*d),w=(G+y**H*Q)/(8*y));const{dzxs:s,dzys:a,outMask:u}=yt(W),{width:e,height:t}=W,i=new Float32Array(e*t);for(let f=ht;f<t-ht;f++){const C=f*e;for(let N=ht;N<e-ht;N++){const A=C+N;if(!u||u[A]){const D=s[A]*S,L=a[A]*w,j=Math.sqrt(D*D+L*L);i[C+N]="percent-rise"===ut?100*j:57.2957795*Math.atan(j)}}}at(i,e,t);const n=new J.Z({width:e,height:t,pixels:[i],mask:u,pixelType:"f32",validPixelCount:W.validPixelCount});return n.updateStatistics(),n}function et(W,z={}){if(!(0,ct.nk)(W))return W;const{resolution:G}=z,H=G?1/G.x:1,Q=G?1/G.y:1,{dzxs:ut,dzys:h,outMask:d}=yt(W),{width:y,height:S}=W,w=new Float32Array(y*S);for(let s=ht;s<S-ht;s++){const a=s*y;for(let u=ht;u<y-ht;u++){const e=a+u;if(!d||d[e]){const t=ut[e]*H,i=h[e]*Q;let n=-1;0===t&&0===i||(n=90-57.29578*Math.atan2(i,-t),n<0&&(n+=360),360===n?n=0:n>360&&(n%=360)),w[a+u]=n}}}return at(w,y,S),new J.Z({width:y,height:S,pixels:[w],mask:d,pixelType:"f32",validPixelCount:W.validPixelCount,statistics:[{minValue:-1,maxValue:360}]})}function ot(W,z){if(!(0,ct.nk)(W))return W;const{curvatures:G,outMask:H}=yt(W,z),{width:Q,height:ut}=W;at(G,Q,ut);const h=new J.Z({width:Q,height:ut,pixels:[G],mask:H,pixelType:"f32",validPixelCount:W.validPixelCount});return h.updateStatistics(),h}},41068:(St,wt,Z)=>{Z.d(wt,{Z:()=>ut});var J=Z(50484),ct=Z(70794),ht=Z(89317),K=Z(4703),vt=Z(80543),tt=(Z(1535),Z(57678),Z(14007),Z(10141)),dt=Z(65665),et=Z(98797),ot=Z(57618),W=Z(5134),z=Z(92865),G=Z(83071);let H=class extends ht.wq{constructor(h){super(h)}bind(){const{rendererJSON:h}=this;if(!h)return{success:!1};let d;switch(this.lookup={rendererJSON:{}},h.type){case"uniqueValue":d=this._updateUVRenderer(h);break;case"rasterColormap":d=this._updateColormapRenderer(h);break;case"rasterStretch":d=this._updateStretchRenderer(h);break;case"classBreaks":d=this._updateClassBreaksRenderer(h);break;case"rasterShadedRelief":d=this._updateShadedReliefRenderer(h);break;case"vectorField":d=this._updateVectorFieldRenderer();break;case"flowRenderer":d=this._updateFlowRenderer()}return d}symbolize(h){let d=h?.pixelBlock;if(!Q(d))return d;if(h.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(d,h.simpleStretchParams);try{let y;switch(d.pixels.length>3&&(d=d.extractBands([0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":y=this._symbolizeColormap(d);break;case"classBreaks":y=this._symbolizeClassBreaks(d);break;case"rasterStretch":y=this._symbolizeStretch(d,h.bandIds);break;case"rasterShadedRelief":{const S=h.extent;y=this._symbolizeShadedRelief(d,{isGCS:S.spatialReference.isGeographic,resolution:{x:(S.xmax-S.xmin)/d.width,y:(S.ymax-S.ymin)/d.height}});break}}return y}catch(y){return K.Z.getLogger(this).error("symbolize",y.message),d}}simpleStretch(h,d){if(!Q(h))return h;try{return h.pixels.length>3&&(h=h.extractBands([0,1,2])),(0,ot.dy)(h,{...d,isRenderer:!0})}catch(y){return K.Z.getLogger(this).error("symbolize",y.message),h}}generateWebGLParameters(h){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const{indexedColormap:a,offset:u}=this.lookup.colormapLut||{};return{colormap:a,colormapOffset:u,type:"lut"}}const{pixelBlock:d,isGCS:y,resolution:S,bandIds:w}=h,{rendererJSON:s}=this;return"rasterStretch"===s.type?this._generateStretchWebGLParams(d,s,w):"rasterShadedRelief"===s.type?this._generateShadedReliefWebGLParams(s,y,S??void 0):"vectorField"===s.type?this._generateVectorFieldWebGLParams(s):null}_isLUTChanged(h){return!this.lookup||!this.lookup.rendererJSON||("colorRamp"in this.rendererJSON&&h?JSON.stringify(this.rendererJSON.colorRamp)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON))}_symbolizeColormap(h){return this._isLUTChanged()&&!this.bind().success?h:(0,et.SJ)(h,this.lookup.colormapLut)}_symbolizeClassBreaks(h){const{canUseIndexedLUT:d}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&!this.bind().success?h:d?(0,et.SJ)(h,this.lookup.colormapLut):(0,et.zp)(h,this.lookup.remapLut??[])}_symbolizeStretch(h,d){const{rasterInfo:y}=this,{pixelType:S,bandCount:w}=y,s=this.rendererJSON,a=["u8","u16","s8","s16"].includes(S);let u,e;const{dra:t}=s,{gamma:i}=this.lookup;if("histogramEqualization"===s.stretchType){const n=t?null:this.lookup?.histogramLut,f=(0,ot.AV)(s,{rasterInfo:y,pixelBlock:h,bandIds:d,returnHistogramLut:!n}),C=(0,ot.dy)(h,{...f,gamma:i,isRenderer:!0});e=(0,et.XV)(C,{lut:t?f.histogramLut:n,offset:0})}else if(a){if(t){const n=(0,ot.AV)(s,{rasterInfo:y,pixelBlock:h,bandIds:d});u=(0,ot.hE)({pixelType:S,...n,gamma:i,rounding:"floor"})}else if(this._isLUTChanged()){if(!this.bind().success)return h;u=this.lookup?this.lookup.stretchLut:null}else u=this.lookup?this.lookup.stretchLut:null;if(!u)return h;w>1&&null!=d&&d.length===h?.pixels.length&&u?.lut.length===w&&(u={lut:d.map(n=>u.lut[n]),offset:u.offset}),e=(0,et.XV)(h,u)}else{const n=(0,ot.AV)(s,{rasterInfo:y,pixelBlock:h,bandIds:d});e=(0,ot.dy)(h,{...n,gamma:i,isRenderer:!0})}if(s.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return h;e=(0,et.SJ)(e,this.lookup?.colormapLut)}return e}_symbolizeShadedRelief(h,d){const y=this.rendererJSON,S={...y,...d},w=(0,W.vC)(h,S);if(!y.colorRamp)return w;let s;if(this._isLUTChanged(!0)){if(!this.bind().success)return w;s=this.lookup?this.lookup.hsvMap:null}else s=this.lookup?this.lookup.hsvMap:null;return s?((0,W.Ub)(w,h,s,this.rasterInfo.statistics?.[0]??{min:0,max:8e3}),w):w}_isVectorFieldData(){const{bandCount:h,dataType:d}=this.rasterInfo;return 2===h&&("vector-magdir"===d||"vector-uv"===d)}_updateVectorFieldRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}}_updateFlowRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}}_updateUVRenderer(h){const{bandCount:d,attributeTable:y,pixelType:S}=this.rasterInfo,w=h.field1;if(!w)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const s=h.defaultSymbol,a=1===d&&["u8","s8"].includes(S);if(!(0,G.MG)(this.rasterInfo,w)&&!a)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const u=[];if(null!=y){const t=y.fields.find(i=>"value"===i.name.toLowerCase());if(!t)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};y.features.forEach(i=>{const n=h.uniqueValueInfos?.find(C=>String(C.value)===String(i.attributes[w])),f=n?.symbol?.color;f?u.push([i.attributes[t.name]].concat(f)):s&&u.push([i.attributes[t.name]].concat(s.color))})}else{if("value"!==w.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};h.uniqueValueInfos?.forEach(t=>{const i=t?.symbol?.color;i?u.push([parseInt(""+t.value,10)].concat(i)):s&&u.push([parseInt(""+t.value,10)].concat(s?.color))})}if(0===u.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};const e=(0,et.Pz)({colormap:u});return this.lookup={rendererJSON:h,colormapLut:e},this.canRenderInWebGL=this._isColormapSupportedByWebGL(e?.indexedColormap),{success:!0}}_updateColormapRenderer(h){if(!(0,G.mO)(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};const d=h.colormapInfos.map(S=>[S.value].concat(S.color)).sort((S,w)=>S[0]-w[0]);if(!d||0===d.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};const y=(0,et.Pz)({colormap:d});return this.lookup={rendererJSON:h,colormapLut:y},this.canRenderInWebGL=this._isColormapSupportedByWebGL(y?.indexedColormap),{success:!0}}_updateShadedReliefRenderer(h){if(!(0,G.jX)(this.rasterInfo))return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(h.colorRamp){const d=(0,z.Jw)(h.colorRamp,{interpolateAlpha:!0}),y=(0,et.Pz)({colormap:d}),S=[],w=y.indexedColormap;for(let s=0;s<w.length;s+=4){const a=(0,ct._Y)({r:w[s],g:w[s+1],b:w[s+2]});S.push([a.h/60,a.s/100,255*a.v/100])}this.lookup={rendererJSON:h,colormapLut:y,hsvMap:S}}else this.lookup=null;return this.canRenderInWebGL=!0,{success:!0}}_analyzeClassBreaks(h){const{attributeTable:d,pixelType:y}=this.rasterInfo,S=null!=d?d.fields.find(a=>"value"===a.name.toLowerCase()):null,w=null!=d?d.fields.find(a=>a.name.toLowerCase()===h.field.toLowerCase()):null,s=null!=S&&null!==w;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(y)||s,tableValueField:S,tableBreakField:w}}_updateClassBreaksRenderer(h){const{attributeTable:d}=this.rasterInfo,{canUseIndexedLUT:y,tableValueField:S,tableBreakField:w}=this._analyzeClassBreaks(h),s=h.classBreakInfos;if(!s?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};const a=s.sort((n,f)=>n.classMaxValue-f.classMaxValue),u=a[a.length-1];let e=h.minValue;if(!y){const n=[];for(let f=0;f<a.length;f++)n.push({value:a[f].classMinValue??e,mappedColor:a[f].symbol.color}),e=a[f].classMaxValue;return n.push({value:u.classMaxValue,mappedColor:u.symbol.color}),this.lookup={rendererJSON:h,remapLut:n},this.canRenderInWebGL=!1,{success:!0}}const t=[];if(null!=d&&null!=S&&null!==w&&S!==w){const n=S.name,f=w.name,C=a[a.length-1],{classMaxValue:N}=C;e=h.minValue;for(const A of d.features){const D=A.attributes[n],L=A.attributes[f],j=L===N?C:L<e?null:a.find(({classMaxValue:I})=>I>L);j&&t.push([D].concat(j.symbol.color))}}else{e=Math.floor(h.minValue);for(let n=0;n<a.length;n++){const f=a[n];for(let C=e;C<f.classMaxValue;C++)t.push([C].concat(f.symbol.color));e=Math.ceil(f.classMaxValue)}u.classMaxValue===e&&t.push([u.classMaxValue].concat(u.symbol.color))}const i=(0,et.Pz)({colormap:t,fillUnspecified:!1});return this.lookup={rendererJSON:h,colormapLut:i},this.canRenderInWebGL=this._isColormapSupportedByWebGL(i?.indexedColormap),{success:!0}}_isColormapSupportedByWebGL(h){return!!h?.length&&h.length<=16384}_isHistogramRequired(h){return"percentClip"===h||"histogramEqualization"===h}_isValidRasterStatistics(h){return null!=h&&h.length>0&&null!=h[0].min&&null!=h[0].max}_updateStretchRenderer(h){let{stretchType:d,dra:y}=h;if(!("none"===d||h.statistics?.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||y))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};const S=h.histograms||this.rasterInfo.histograms;!this._isHistogramRequired(h.stretchType)||S?.length||y||(d="minMax");const{computeGamma:w,useGamma:s,colorRamp:a}=h;let{gamma:u}=h;s&&w&&!u?.length&&(u=(0,ot.ZF)(this.rasterInfo.pixelType,h.statistics?.length?h.statistics:this.rasterInfo.statistics));const e=this.rasterInfo.pixelType,t=!y&&["u8","u16","s8","s16"].includes(e);if("histogramEqualization"===d){const i=S.map(n=>(0,ot.oc)(n));this.lookup={rendererJSON:h,histogramLut:i}}else if(t){const i=(0,ot.AV)(h,{rasterInfo:this.rasterInfo}),n=(0,ot.hE)({pixelType:e,...i,gamma:s?u:null,rounding:"floor"});this.lookup={rendererJSON:h,stretchLut:n}}if(a&&!this._isStretchColorRampNoop(a)){const i=(0,z.Jw)(a,{interpolateAlpha:!0});this.lookup||(this.lookup={rendererJSON:h}),this.lookup.colormapLut=(0,et.Pz)({colormap:i}),this.lookup.rendererJSON=h}return this.lookup.gamma=s&&u?.length?u:null,this.canRenderInWebGL=!0,{success:!0}}_isStretchColorRampNoop(h){return"algorithmic"===h.type&&["0,0,0,255","0,0,0"].includes(h.fromColor.join(","))&&["255,255,255,255","255,255,255"].includes(h.toColor.join(","))}_generateStretchWebGLParams(h,d,y){let S=null,w=null;const s=this.lookup?.colormapLut;d.colorRamp&&s&&(S=s.indexedColormap,w=s.offset),"histogramEqualization"===d.stretchType&&(d={...d,stretchType:"minMax"});const{gamma:a}=this.lookup,u=!!(d.useGamma&&a&&a.some(I=>1!==I)),{minCutOff:e,maxCutOff:t,outMin:i,outMax:n}=(0,ot.AV)(d,{rasterInfo:this.rasterInfo,pixelBlock:h,bandIds:y});let f=0;null!=h&&(f=h.getPlaneCount(),2===f&&((h=h.clone()).statistics=[h.statistics[0]],h.pixels=[h.pixels[0]]));const{bandCount:C}=this.rasterInfo,N=Math.min(3,y?.length||f||C,C),A=new Float32Array(N),D=S||u?1:255;let L;for(L=0;L<e.length;L++)A[L]=t[L]===e[L]?0:(n-i)/(t[L]-e[L])/D;const j=new Float32Array(N);if(u&&a)for(L=0;L<N;L++)j[L]=a[L]>1?a[L]>2?6.5+(a[L]-2)**2.5:6.5+100*(2-a[L])**4:1;return{bandCount:N,outMin:i/D,outMax:n/D,minCutOff:e,maxCutOff:t,factor:A,useGamma:u,gamma:u?a:[1,1,1],gammaCorrection:u?j:[1,1,1],colormap:S,colormapOffset:w,stretchType:d.stretchType,type:"stretch"}}_generateShadedReliefWebGLParams(h,d=!1,y={x:0,y:0}){let S=null,w=null;const s=this.lookup?.colormapLut;h.colorRamp&&s&&(S=s.indexedColormap,w=s.offset);const a={...h,isGCS:d,resolution:y},u=(0,W.TK)(a),e=this.rasterInfo.statistics?.[0];return{...u,minValue:e?.min??0,maxValue:e?.max??8e3,hillshadeType:"traditional"===h.hillshadeType?0:1,type:"hillshade",colormap:S,colormapOffset:w}}_generateVectorFieldWebGLParams(h){const{style:d,inputUnit:y,outputUnit:S,visualVariables:w,symbolTileSize:s,flowRepresentation:a}=h;let u;const e=this.rasterInfo.statistics?.[0].min??0,t=this.rasterInfo.statistics?.[0].max??50,i=w?.find(L=>"sizeInfo"===L.type)??{type:"sizeInfo",field:"Magnitude",maxDataValue:t,maxSize:.8*s,minDataValue:e,minSize:.2*s},n=i.minDataValue??e,f=i.maxDataValue??t,C=null!=i.maxSize&&null!=i.minSize?[i.minSize/s,i.maxSize/s]:[.2,.8];"wind_speed"===d&&(C[0]=C[1]=(C[0]+C[1])/2);const N=null!=n&&null!=f?[n,f]:null;if("classified_arrow"===d)if(null!=n&&null!=f&&null!=i){u=[];const L=(i.maxDataValue-i.minDataValue)/5;for(let j=0;j<6;j++)u.push(i.minDataValue+L*j)}else u=[0,1e-6,3.5,7,10.5,14];const A="flow_to"===a==("ocean_current_kn"===d||"ocean_current_m"===d)?0:Math.PI,D=w?.find(L=>"rotationInfo"===L.type);return{breakValues:u,dataRange:N,inputUnit:y,outputUnit:S,symbolTileSize:s,symbolPercentRange:C,style:d||"single_arrow",rotation:A,rotationType:this.rasterInfo.storageInfo?.tileInfo&&"vector-uv"===this.rasterInfo.dataType?"geographic":D?.rotationType||h.rotationType,type:"vectorField"}}};function Q(h){return(0,et.nk)(h)&&0!==h.validPixelCount}(0,J._)([(0,vt.Cb)({json:{write:!0}})],H.prototype,"rendererJSON",void 0),(0,J._)([(0,vt.Cb)({type:dt.Z,json:{write:!0}})],H.prototype,"rasterInfo",void 0),(0,J._)([(0,vt.Cb)({json:{write:!0}})],H.prototype,"lookup",void 0),(0,J._)([(0,vt.Cb)()],H.prototype,"canRenderInWebGL",void 0),H=(0,J._)([(0,tt.j)("esri.renderers.support.RasterSymbolizer")],H);const ut=H},92865:(St,wt,Z)=>{Z.d(wt,{B4:()=>z,H0:()=>at,Jw:()=>S,Oi:()=>vt,Uh:()=>W,XL:()=>y,oI:()=>u,pM:()=>a,xK:()=>yt});var J=Z(66599),ct=Z(70794),ht=Z(84303),K=Z(89317);const vt=["random","ndvi","ndvi2","ndvi3","elevation","gray","hillshade"],yt=[{id:"aspect",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"black-to-white",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blue-bright",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blue-light-to-dark",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blue-green-bright",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blue-green-light-to-dark",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brown-light-to-dark",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brown-to-blue-green-diverging-right",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brown-to-blue-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficient-bias",fromColor:[214,214,255],toColor:[0,57,148]},{id:"cold-to-hot-diverging",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"condition-number",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyan-to-purple",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyan-light-to-blue-dark",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors",fromColor:[255,235,214],toColor:[196,10,10]},{id:"gray-light-to-dark",fromColor:[219,219,219],toColor:[69,69,69]},{id:"green-bright",fromColor:[204,255,204],toColor:[14,204,14]},{id:"green-light-to-dark",fromColor:[220,245,233],toColor:[34,102,51]},{id:"green-to-blue",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orange-bright",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orange-light-to-dark",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partial-spectrum",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partial-spectrum-1-diverging",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partial-spectrum-2-diverging",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pink-to-yellow-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pink-to-yellow-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purple-bright",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purple-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purple-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purple-blue-bright",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purple-blue-light-to-dark",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purple-red-bright",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purple-red-light-to-dark",fromColor:[250,215,246],toColor:[143,17,57]},{id:"red-bright",fromColor:[255,204,204],toColor:[219,0,0]},{id:"red-light-to-dark",fromColor:[255,224,224],toColor:[143,10,10]},{id:"red-to-blue-diverging-bright",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"red-to-blue-diverging-dark",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"red-to-green",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"red-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"red-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrum-full-bright",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrum-full-dark",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrum-full-light",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"white-to-black",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellow-to-dark-red",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellow-to-green-to-dark-blue",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellow-to-red",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellow-green-bright",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellow-green-light-to-dark",fromColor:[215,240,175],toColor:[96,107,45]}],at=new ht.X({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right","Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue","Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","Purple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright","Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright","Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});function o(e,t){if(!e||!t||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]>t[i]+2||e[i]<t[i]-2)return!1;return!0}function tt(e){const t=e.clone();return t.fromColor=e.toColor,t.toColor=e.fromColor,t.algorithm=e.algorithm,t}function et(e,t){if(!e)return;const i=t??yt;let n=null;return"algorithmic"===e.type?i.some(f=>{if(o(e.fromColor.toRgb(),f.fromColor)&&o(e.toColor.toRgb(),f.toColor))return n=f.id,!0}):"multipart"===e.type&&i.some(f=>{const C=e.colorRamps,N=f.colorRamps;if(C&&N&&C.length===N.length&&!N.some((A,D)=>{if(!o(C[D].fromColor.toRgb(),new J.Z(A.fromColor).toRgb())||!o(C[D].toColor.toRgb(),new J.Z(A.toColor).toRgb()))return!0})){if(n)return!0;n=f.id}}),n}function W(e,t=!1){const i="string"==typeof e?e:function ot(e,t,i=!1){if(!e)return;let n=et(e,t);return null!=n||i||(n=et(e=function dt(e){if("multipart"===e.type){const t=e.clone();return t.colorRamps?.length&&(t.colorRamps=t.colorRamps.reverse().map(i=>tt(i))),t}return tt(e)}(e),t)),n}(e,void 0,t);return i?at.toJSON(i):null}function z(e,t="esriCIELabAlgorithm"){const i=yt.find(({id:n})=>n===e);return i?i.colorRamps?{type:"multipart",colorRamps:i.colorRamps.map(n=>({type:"algorithmic",algorithm:t,fromColor:[...n.fromColor],toColor:[...n.toColor]}))}:{type:"algorithmic",algorithm:t,fromColor:[...i.fromColor],toColor:[...i.toColor]}:null}function G(e){const t=(e=e||{}).numColors||256,i=e.distanceOffset||0,n=null!=e.isCustomInterval?e.isCustomInterval:null!==e.distanceInterval&&e.distanceInterval!==1/(t-1),f=e.distanceInterval||1/(t-1);return{...e,numColors:t,distanceOffset:i,interpolateAlpha:!!e.interpolateAlpha,distanceInterval:f,isCustomInterval:n,weights:e.weights}}function h(e,t){let{fromColor:i,toColor:n}=e;i=[...i],n=[...n],3===i.length&&(i=i.concat([255])),3===n.length&&(n=n.concat([255]));const f=e.algorithm||"esriCIELabAlgorithm",C=G(t),{numColors:N,distanceOffset:A,isCustomInterval:D,interpolateAlpha:L}=C;if(1===N&&0===A)return[i];if(2===N&&0===A&&!D)return[i,n];const j={r:i[0],g:i[1],b:i[2]},I={r:n[0],g:n[1],b:n[2]},k="esriCIELabAlgorithm"===f?function Q(e,t,i){const{numColors:n,distanceOffset:f,distanceInterval:C,isCustomInterval:N}=i;let{l:A,a:D,b:L}=e;const j=(t.l-A)*C,I=(t.a-D)*C,k=(t.b-L)*C,E=[];if(f){const V=f/C;A+=V*j,D+=V*I,L+=V*k}for(let V=0;V<n-1;V++)E.push({l:A,a:D,b:L}),A+=j,D+=I,L+=k;return E.push(N?{l:A,a:D,b:L}:t),E}((0,ct.Y3)(j),(0,ct.Y3)(I),C):"esriHSVAlgorithm"===f?function H(e,t,i){const{numColors:n,distanceOffset:f,distanceInterval:C,isCustomInterval:N}=i,A=0===e.s,D=0===t.s;let L=e.h,j=t.h;A&&!D?L=j:D&&!A&&(t={...t,h:L},j=L);let I,k=Math.abs(j-L);const E=360;k<180?I=(j-L)*C:(k=E-k,I=L>j?k*C:-k*C);const V=(t.s-e.s)*C,O=(t.v-e.v)*C;let{s:r,v:b}=e,_=L;if(f){const U=f/C;_=(_+U*I+E)%E,r+=U*V,b+=U*O}const T=[];for(let U=0;U<n-1;U++)T.push({h:_,s:r,v:b}),_=(_+I+E)%E,r+=V,b+=O;return T.push(N?{h:_,s:r,v:b}:t),T}((0,ct._Y)(j),(0,ct._Y)(I),C):function ut(e,t,i){const{numColors:n,distanceOffset:f,distanceInterval:C,isCustomInterval:N}=i,A=e.h,D=t.h,L=2*Math.PI;let j;if(A<=D){const _=D-A,T=D-A-L;j=Math.abs(T)<Math.abs(_)?T:_}else{const _=D+L-A,T=D-A;j=Math.abs(T)<Math.abs(_)?T:_}const I=j*C,k=(t.l-e.l)*C,E=(t.c-e.c)*C;let{l:V,c:O,h:r}=e;if(f){const _=f/C;V+=_*k,O+=_*E,r=(r+_*I+L)%L}const b=[];for(let _=0;_<n-1;_++)b.push({l:V,c:O,h:r}),V+=k,O+=E,r=(r+I+L)%L;return b.push(N?{l:V,c:O,h:r}:t),b}((0,ct.sJ)(j),(0,ct.sJ)(I),C),E=[],V=i[3]??255,O=((n[3]??255)-V)/(N-1);for(let r=0;r<N;r++){const{r:b,g:_,b:T}=(0,ct.xr)(k[r]),U=L?Math.round(V+O*r):255;E.push([b,_,T,U])}return E}function y(e,t){const i=(0,K.AK)(e)?e.toJSON():e;return"multipart"===i.type?function d(e,t){const{numColors:i,interpolateAlpha:n}=G(t);let f=t?.weights;const{colorRamps:C}=e;if(f){const k=f.reduce((E,V)=>E+V);f=f.map(E=>E/k)}else{f=[];for(let k=0;k<C.length;k++)f[k]=1/C.length}const N=[];let A=0,D=0;const L=1/(i-1);let j=!1;for(let k=0;k<C.length;k++){let E=j?0:A*L-D,V=k===C.length-1?i-1-A:(f[k]-E)/L;if(j=Math.ceil(V)===V,V=Math.ceil(V),0===V)continue;E/=f[k];const O=h(C[k],{numColors:V,interpolateAlpha:n,distanceOffset:E,distanceInterval:L/f[k]});A+=O.length,N.push(...O),D+=f[k]}const I=[...C[C.length-1].toColor];return 3===I.length&&I.push(255),N.push(I),N}(i,t):h(i,t)}function S(e,t){const i=y(e,t),n=t?.interpolateAlpha;return i.forEach((f,C)=>{f.unshift(C),n||f.pop()}),i}function w(e){const t=(0,ct._Y)(e);return{type:"HsvColor",Hue:t.h,Saturation:t.s,Value:t.v,AlphaValue:255}}function s(e){return{Algorithm:e.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:w(e.fromColor),ToColor:w(e.toColor)}}function a(e){const t=W(e);if(!t)return null;if("algorithmic"===e.type)return{...s(e),Name:t};if(e.colorRamps){const i=e.colorRamps.map(s);return{type:"MultiPartColorRamp",NumColorRamps:i.length,ArrayOfColorRamp:i,Name:t}}return null}function u(e){const t=e.reverse().map(i=>{const n=i.toString(16);return n.length<2?"0"+n:n});return 4294967295&Number.parseInt(t.join(""),16)}},83071:(St,wt,Z)=>{function ct(o,tt){const{attributeTable:dt,bandCount:et}=o;return!(null!=dt||!function J(o){return["u8","s8"].includes(o.pixelType)&&null!=o.statistics?.[0]?.min&&null!=o.statistics[0]?.max&&1===o.bandCount}(o))||!(null==dt||et>1||tt&&null==dt.fields.find(ot=>ot.name.toLowerCase()===tt.toLowerCase()))}function ht(o){const{bandCount:tt,dataType:dt,pixelType:et}=o;return"elevation"===dt||"generic"===dt&&1===tt&&("s16"===et||"s32"===et||"f32"===et||"f64"===et)}function K(o,tt=!1){const{bandCount:dt,colormap:et,pixelType:ot}=o;return 1===dt&&(!!et?.length||!tt&&"u8"===ot)}function vt(o,tt=!1){const{attributeTable:dt,bandCount:et}=o;return 1===et&&(!tt||null!=dt||null!=o.histograms)}function yt(o){const{dataType:tt}=o;return"vector-uv"===tt||"vector-magdir"===tt}function at(o){const{dataType:tt}=o;return"vector-uv"===tt||"vector-magdir"===tt}Z.d(wt,{LV:()=>yt,MG:()=>ct,aG:()=>at,fI:()=>vt,jX:()=>ht,mO:()=>K})},11856:(St,wt,Z)=>{Z.d(wt,{J:()=>ht,v:()=>ct});const ct=new(Z(84303).X)({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"}),ht={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"}}}]);