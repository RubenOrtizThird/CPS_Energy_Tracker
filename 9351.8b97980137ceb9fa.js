"use strict";(self.webpackChunkjsapi_angular_cli=self.webpackChunkjsapi_angular_cli||[]).push([[9351,3715],{59211:(X,K,e)=>{e.d(K,{Z:()=>c});var P=e(15861),y=e(50484),B=e(73514),Z=e(57964),U=e(14007),S=e(79412),L=e(6785),D=e(80543),C=(e(1535),e(57678),e(10141)),A=e(11642),b=e(46054),W=e(15462),J=e(24859),$=(e(2189),e(82784)),x=e(91866),G=e(26894);function g(){return(g=(0,P.Z)(function*(d,u,f){const v=(0,W.en)(d);return(0,$.Vr)(v,x.Z.from(u),{...f}).then(T=>({count:T.data.count,extent:G.Z.fromJSON(T.data.extent)}))})).apply(this,arguments)}var n=e(61375),r=e(46708),i=e(36026),p=e(93792);let _=class extends B.Z{constructor(d){super(d),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return(0,L.mN)(this.url)}execute(d,u){var f=this;return(0,P.Z)(function*(){const v=yield f.executeJSON(d,u);return f.featureSetFromJSON(d,v,u)})()}executeJSON(d,u){var f=this;return(0,P.Z)(function*(){const v=f._normalizeQuery(d),T=null!=d.outStatistics?.[0],I=(0,U.Z)("featurelayer-pbf-statistics"),V=!T||I;let O;if(f.pbfSupported&&V)try{O=yield(0,i.t)(f.url,v,u)}catch(F){if("query:parsing-pbf"!==F.name)throw F;f.pbfSupported=!1}return f.pbfSupported&&V||(O=yield(0,r.F)(f.url,v,u)),f._normalizeFields(O.fields),O})()}featureSetFromJSON(d,u,f){var v=this;return(0,P.Z)(function*(){if(!v._queryIs3DObjectFormat(d)||null==v.infoFor3D||!u.features)return p.Z.fromJSON(u);const{meshFeatureSetFromJSON:T}=yield(0,S.Hl)(Promise.all([e.e(1716),e.e(4612),e.e(2859),e.e(6215),e.e(8592),e.e(7045)]).then(e.bind(e,17045)),f);return T(d,v.infoFor3D,u)})()}executeForCount(d,u){return(0,J.P)(this.url,this._normalizeQuery(d),u)}executeForExtent(d,u){return function z(d,u,f){return g.apply(this,arguments)}(this.url,this._normalizeQuery(d),u)}executeForIds(d,u){return(0,n.G)(this.url,this._normalizeQuery(d),u)}executeRelationshipQuery(d,u){var f=this;return(0,P.Z)(function*(){const[{default:v},{executeRelationshipQuery:T}]=yield(0,S.Hl)(Promise.all([Promise.resolve().then(e.bind(e,46556)),e.e(3005).then(e.bind(e,83005))]),u);return d=v.from(d),(f.gdbVersion||f.dynamicDataSource)&&((d=d.clone()).gdbVersion=d.gdbVersion||f.gdbVersion,d.dynamicDataSource=d.dynamicDataSource||f.dynamicDataSource),T(f.url,d,u)})()}executeRelationshipQueryForCount(d,u){var f=this;return(0,P.Z)(function*(){const[{default:v},{executeRelationshipQueryForCount:T}]=yield(0,S.Hl)(Promise.all([Promise.resolve().then(e.bind(e,46556)),e.e(3005).then(e.bind(e,83005))]),u);return d=v.from(d),(f.gdbVersion||f.dynamicDataSource)&&((d=d.clone()).gdbVersion=d.gdbVersion||f.gdbVersion,d.dynamicDataSource=d.dynamicDataSource||f.dynamicDataSource),T(f.url,d,u)})()}executeAttachmentQuery(d,u){var f=this;return(0,P.Z)(function*(){const{executeAttachmentQuery:v,fetchAttachments:T,processAttachmentQueryResult:I}=yield(0,S.Hl)(e.e(4662).then(e.bind(e,4662)),u),V=(0,W.en)(f.url);return I(V,yield f.queryAttachmentsSupported?v(V,d,u):T(V,d,u))})()}executeTopFeaturesQuery(d,u){var f=this;return(0,P.Z)(function*(){const{executeTopFeaturesQuery:v}=yield(0,S.Hl)(Promise.all([e.e(8592),e.e(8778)]).then(e.bind(e,38778)),u);return v(f.parsedUrl,d,f.sourceSpatialReference,u)})()}executeForTopIds(d,u){var f=this;return(0,P.Z)(function*(){const{executeForTopIds:v}=yield(0,S.Hl)(Promise.all([e.e(8592),e.e(8009)]).then(e.bind(e,98009)),u);return v(f.parsedUrl,d,u)})()}executeForTopExtents(d,u){var f=this;return(0,P.Z)(function*(){const{executeForTopExtents:v}=yield(0,S.Hl)(Promise.all([e.e(8592),e.e(8080)]).then(e.bind(e,78080)),u);return v(f.parsedUrl,d,u)})()}executeForTopCount(d,u){var f=this;return(0,P.Z)(function*(){const{executeForTopCount:v}=yield(0,S.Hl)(Promise.all([e.e(8592),e.e(4032)]).then(e.bind(e,34032)),u);return v(f.parsedUrl,d,u)})()}_normalizeQuery(d){let u=x.Z.from(d);u.sourceSpatialReference=u.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(u=u===d?u.clone():u,u.gdbVersion=d.gdbVersion||this.gdbVersion,u.dynamicDataSource=d.dynamicDataSource?b.n.from(d.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:f}=this;if(null!=f&&this._queryIs3DObjectFormat(d)){u=u===d?u.clone():u,u.formatOf3DObjects=null;const{supportedFormats:v,queryFormats:T}=f,I=(0,A.S0)("model/gltf-binary",v)??(0,A.Ow)("glb",v),V=(0,A.S0)("model/gltf+json",v)??(0,A.Ow)("gtlf",v);for(const O of T){if(O===I){u.formatOf3DObjects=O;break}O!==V||u.formatOf3DObjects||(u.formatOf3DObjects=O)}if(!u.formatOf3DObjects)throw new Z.Z("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(null==u.outFields||!u.outFields.includes("*")){u=u===d?u.clone():u,null==u.outFields&&(u.outFields=[]);const{originX:O,originY:F,originZ:Y,translationX:w,translationY:ee,translationZ:ae,scaleX:ne,scaleY:ie,scaleZ:re,rotationX:te,rotationY:le,rotationZ:ue,rotationDeg:de}=f.transformFieldRoles;u.outFields.push(O,F,Y,w,ee,ae,ne,ie,re,te,le,ue,de)}}return u}_normalizeFields(d){if(null!=this.fieldsIndex&&null!=d)for(const u of d){const f=this.fieldsIndex.get(u.name);f&&Object.assign(u,f.toJSON())}}_queryIs3DObjectFormat(d){return null!=this.infoFor3D&&!0===d.returnGeometry&&"xyFootprint"!==d.multipatchOption&&!d.outStatistics}};(0,y._)([(0,D.Cb)({type:b.n})],_.prototype,"dynamicDataSource",void 0),(0,y._)([(0,D.Cb)()],_.prototype,"fieldsIndex",void 0),(0,y._)([(0,D.Cb)()],_.prototype,"gdbVersion",void 0),(0,y._)([(0,D.Cb)()],_.prototype,"infoFor3D",void 0),(0,y._)([(0,D.Cb)({readOnly:!0})],_.prototype,"parsedUrl",null),(0,y._)([(0,D.Cb)()],_.prototype,"pbfSupported",void 0),(0,y._)([(0,D.Cb)()],_.prototype,"queryAttachmentsSupported",void 0),(0,y._)([(0,D.Cb)()],_.prototype,"sourceSpatialReference",void 0),(0,y._)([(0,D.Cb)({type:String})],_.prototype,"url",void 0),_=(0,y._)([(0,C.j)("esri.tasks.QueryTask")],_);const c=_},71413:(X,K,e)=>{e.d(K,{O:()=>z});var P=e(15861),y=e(50484),B=e(66476),Z=e(8611),U=e(79412),S=e(6785),L=e(93960),D=e(80543),A=(e(1535),e(57678),e(14007),e(62185)),b=e(10141),W=e(60301),J=e(26894),H=e(43814),$=e(89713),x=e(8966),G=e(50318);const z=g=>{let n=class extends g{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesMap=null}readCapabilities(r,i){const p=i.capabilities&&i.capabilities.split(",").map(ee=>ee.toLowerCase().trim());if(!p)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const _=this.type,c="tile"!==_&&!!i.supportsDynamicLayers,d=p.includes("query"),u=p.includes("map"),f=!!i.exportTilesAllowed,v=p.includes("tilemap"),T=p.includes("data"),I="tile"!==_&&(!i.tileInfo||c),V="tile"!==_&&(!i.tileInfo||c),O="tile"!==_,F=i.cimVersion&&L.G.parse(i.cimVersion),Y=F?.since(1,4)??!1,w=F?.since(2,0)??!1;return{operations:{supportsExportMap:u,supportsExportTiles:f,supportsIdentify:d,supportsQuery:T,supportsTileMap:v},exportMap:u?{supportsArcadeExpressionForLabeling:Y,supportsSublayersChanges:O,supportsDynamicLayers:c,supportsSublayerVisibility:I,supportsSublayerDefinitionExpression:V,supportsCIMSymbols:w}:null,exportTiles:f?{maxExportTilesCount:+i.maxExportTilesCount}:null}}readVersion(r,i){let p=i.currentVersion;return p||(p=i.hasOwnProperty("capabilities")||i.hasOwnProperty("tables")?10:i.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),p}fetchRelatedService(r){var i=this;return(0,P.Z)(function*(){const p=i.portalItem;if(!p||!(0,G.Fj)(p))return null;i._relatedFeatureServicePromise||(i._relatedFeatureServicePromise=p.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},r).then(c=>c.find(d=>"Feature Service"===d.type)??null,()=>null));const _=yield i._relatedFeatureServicePromise;return(0,U.k_)(r),_?{itemId:_.id,url:_.url}:null})()}fetchSublayerInfo(r,i){var p=this;return(0,P.Z)(function*(){const{source:_}=r;if(p?.portalItem&&"tile"===p.type&&"map-layer"===_?.type&&(0,G.Fj)(p.portalItem)&&r.originIdOf("url")<W.s3.SERVICE){const u=yield p.fetchRelatedService(i);u&&(r.url=(0,S.v_)(u.url,_.mapLayerId.toString()),r.layerItemId=u.itemId)}const{url:c}=r;let d;if("data-layer"===_.type)d=(yield(0,B.Z)(c,{responseType:"json",query:{f:"json",...p.customParameters,token:p.apiKey},...i})).data;else if(c&&r.originIdOf("url")>W.s3.SERVICE)try{const u=yield p._fetchAllLayersAndTablesFromService(c),f=(0,$.Qc)(c)?.sublayer??_.mapLayerId;d=u.get(f)}catch{}else{let u=r.id;"map-layer"===_?.type&&(u=_.mapLayerId);try{d=(yield p.fetchAllLayersAndTables(i)).get(u)}catch{}}return d})()}fetchAllLayersAndTables(r){var i=this;return(0,P.Z)(function*(){return i._fetchAllLayersAndTablesFromService(i.parsedUrl?.path,r)})()}_fetchAllLayersAndTablesFromService(r,i){var p=this;return(0,P.Z)(function*(){yield p.load(i),p._allLayersAndTablesMap||=new Map;const _=(0,$.Qc)(r),c=(0,Z.s1)(p._allLayersAndTablesMap,_?.url.path,()=>(0,B.Z)((0,S.v_)(_?.url.path,"/layers"),{responseType:"json",query:{f:"json",...p.customParameters,token:p.apiKey}}).then(u=>{const f=new Map;for(const v of u.data.layers)f.set(v.id,v);return{result:f}},u=>({error:u}))),d=yield c;if((0,U.k_)(i),"result"in d)return d.result;throw d.error})()}};return(0,y._)([(0,D.Cb)({readOnly:!0})],n.prototype,"capabilities",void 0),(0,y._)([(0,A.r)("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],n.prototype,"readCapabilities",null),(0,y._)([(0,D.Cb)({json:{read:{source:"copyrightText"}}})],n.prototype,"copyright",void 0),(0,y._)([(0,D.Cb)({type:J.Z})],n.prototype,"fullExtent",void 0),(0,y._)([(0,D.Cb)(x.id)],n.prototype,"id",void 0),(0,y._)([(0,D.Cb)({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],n.prototype,"legendEnabled",void 0),(0,y._)([(0,D.Cb)(x.C_)],n.prototype,"popupEnabled",void 0),(0,y._)([(0,D.Cb)({type:H.Z})],n.prototype,"spatialReference",void 0),(0,y._)([(0,D.Cb)({readOnly:!0})],n.prototype,"version",void 0),(0,y._)([(0,A.r)("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],n.prototype,"readVersion",null),n=(0,y._)([(0,b.j)("esri.layers.mixins.ArcGISMapService")],n),n}},22921:(X,K,e)=>{e.d(K,{x:()=>z});var P=e(50484),y=e(83944),B=e(5603),Z=e(57964),U=e(4703),S=e(77675),L=e(80543),C=(e(1535),e(57678),e(14007),e(49301)),A=e(10141),b=e(60301),W=e(25740),J=e(45859);const H=U.Z.getLogger("esri.layers.TileLayer"),x=y.Z.ofType(W.Z);function G(g,n){g&&g.forEach(r=>{n(r),r.sublayers&&r.sublayers.length&&G(r.sublayers,n)})}const z=g=>{let n=class extends g{constructor(...r){super(...r),this.allSublayers=new B.Z({getCollections:()=>[this.sublayers],getChildrenFunction:i=>i.sublayers}),this.sublayersSourceJSON={[b.s3.SERVICE]:{},[b.s3.PORTAL_ITEM]:{},[b.s3.WEB_SCENE]:{},[b.s3.WEB_MAP]:{}},this.addHandles((0,S.YP)(()=>this.sublayers,(i,p)=>this._handleSublayersChange(i,p),S.Z_))}destroy(){this.allSublayers.destroy()}readSublayers(r,i){if(!i||!r)return;const{sublayersSourceJSON:p}=this,_=(0,b.M9)(i.origin);if(_<b.s3.SERVICE||(p[_]={context:i,visibleLayers:r.visibleLayers||p[_].visibleLayers,layers:r.layers||p[_].layers},_>b.s3.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:c,origin:d}=this.createSublayersForOrigin("web-document"),u=(0,C.vw)(this);u.setDefaultOrigin(d),this._set("sublayers",new x(c)),u.setDefaultOrigin("user")}findSublayerById(r){return this.allSublayers.find(i=>i.id===r)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(r){const i=(0,b.M9)("web-document"===r?"web-map":r);let p=b.s3.SERVICE,_=this.sublayersSourceJSON[b.s3.SERVICE].layers,c=this.sublayersSourceJSON[b.s3.SERVICE].context,d=null;const u=[b.s3.PORTAL_ITEM,b.s3.WEB_SCENE,b.s3.WEB_MAP].filter(O=>O<=i);for(const O of u){const F=this.sublayersSourceJSON[O];(0,J.ac)(F.layers)&&(p=O,_=F.layers,c=F.context,F.visibleLayers&&(d={visibleLayers:F.visibleLayers,context:F.context}))}const f=[b.s3.PORTAL_ITEM,b.s3.WEB_SCENE,b.s3.WEB_MAP].filter(O=>O>p&&O<=i);let v=null;for(const O of f){const{layers:F,visibleLayers:Y,context:w}=this.sublayersSourceJSON[O];F&&(v={layers:F,context:w}),Y&&(d={visibleLayers:Y,context:w})}const T=function $(g,n){const r=[],i={};return g&&g.forEach(p=>{const _=new W.Z;if(_.read(p,n),i[_.id]=_,null!=p.parentLayerId&&-1!==p.parentLayerId){const c=i[p.parentLayerId];c.sublayers||(c.sublayers=[]),c.sublayers.unshift(_)}else r.unshift(_)}),r}(_,c),I=new Map,V=new Set;if(v)for(const O of v.layers)I.set(O.id,O);if(d?.visibleLayers)for(const O of d.visibleLayers)V.add(O);return G(T,O=>{v&&O.read(I.get(O.id),v.context),d&&O.read({defaultVisibility:V.has(O.id)},d.context)}),{origin:(0,b.x3)(p),sublayers:new x({items:T})}}read(r,i){super.read(r,i),this.readSublayers(r,i)}_handleSublayersChange(r,i){i&&(i.forEach(p=>{p.parent=null,p.layer=null}),this.removeHandles("sublayers-owner")),r&&(r.forEach(p=>{p.parent=this,p.layer=this}),this.addHandles([r.on("after-add",({item:p})=>{p.parent=this,p.layer=this}),r.on("after-remove",({item:p})=>{p.parent=null,p.layer=null})],"sublayers-owner"),"tile"===this.type&&this.addHandles(r.on("before-changes",p=>{H.error(new Z.Z("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),p.preventDefault()}),"sublayers-owner"))}};return(0,P._)([(0,L.Cb)({readOnly:!0})],n.prototype,"allSublayers",void 0),(0,P._)([(0,L.Cb)({readOnly:!0,type:y.Z.ofType(W.Z)})],n.prototype,"serviceSublayers",void 0),(0,P._)([(0,L.Cb)({value:null,type:x,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],n.prototype,"sublayers",void 0),(0,P._)([(0,L.Cb)({readOnly:!0})],n.prototype,"sublayersSourceJSON",void 0),n=(0,P._)([(0,A.j)("esri.layers.mixins.SublayersOwner")],n),n}},25740:(X,K,e)=>{e.d(K,{Z:()=>Ee});var se,P=e(15861),y=e(50484),Z=(e(2189),e(62691)),W=(e(36699),e(15212),e(53722),e(82752),e(28999),e(38748),e(50923),e(42212),e(91963),e(41007)),J=e(66476),H=e(71950),$=e(83944),x=e(57964),G=e(14007),z=e(84373),g=e(34222),n=e(67016),r=e(4703),i=e(3233),p=e(38955),_=e(6785),c=e(80543),d=e(73018),u=e(62185),f=e(10141),v=e(7547),T=e(1535),I=e(60301),V=e(49301),O=e(59211),F=e(50243),Y=e(81247),w=e(40100),ee=e(40591),ae=e(75421),ne=e(39557),ie=e(37556),re=e(46054),te=e(59341),le=e(12768),ue=e(91866),de=e(33331),he=e(26894),ye=e(31709);function pe(t){return null!=t&&"esriSMS"===t.type}function ce(t,s,l){const E=this.originIdOf(s)>=(0,I.M9)(l.origin);return{ignoreOrigin:!0,allowNull:E,enabled:!!l&&"map-image"===l.layer?.type&&(l.writeSublayerStructure||E)}}function _e(t,s,l){return{enabled:!!l&&"tile"===l.layer?.type&&(l.origin&&this.originIdOf(s)>=(0,I.M9)(l.origin)||this._isOverridden(s))}}function Q(t,s,l){return{ignoreOrigin:!0,enabled:l&&l.writeSublayerStructure||!1}}function oe(t,s,l){return{ignoreOrigin:!0,enabled:!!l&&(l.writeSublayerStructure||this.originIdOf(s)>=(0,I.M9)(l.origin))}}let me=0;const k=new Set;k.add("layer"),k.add("parent"),k.add("loaded"),k.add("loadStatus"),k.add("loadError"),k.add("loadWarnings");let h=se=class extends((0,i.R)((0,z.IG)(n.Z))){constructor(t){super(t),this.capabilities=void 0,this.maxScaleRange={minScale:0,maxScale:0},this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.type="sublayer",this.types=null,this._lastParsedUrl=null}load(t){var s=this;return(0,P.Z)(function*(){return s.addResolvingPromise((0,P.Z)(function*(){const{layer:l,url:E}=s;if(!l&&!E)throw new x.Z("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:s});const m=l?yield l.fetchSublayerInfo(s,t):(yield(0,J.Z)(E,{responseType:"json",query:{f:"json"},...t})).data;m&&(s.sourceJSON=m,s.read({layerDefinition:m},{origin:"service"}))})()),s})()}readCapabilities(t,s){s=s.layerDefinition||s;const{operations:{supportsQuery:l,supportsQueryAttachments:E},query:{supportsFormatPBF:m},data:{supportsAttachment:M}}=(0,ie.h)(s,this.url);return{exportMap:{supportsModification:!!s.canModifyLayer},operations:{supportsQuery:l,supportsQueryAttachments:E},data:{supportsAttachment:M},query:{supportsFormatPBF:m}}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(t){this._setAndNotifyLayer("definitionExpression",t)}get effectiveScaleRange(){const{minScale:t,maxScale:s}=this;return{minScale:t,maxScale:s}}readMaxScaleRange(t,s){return{minScale:(s=s.layerDefinition||s).minScale??0,maxScale:s.maxScale??0}}get fieldsIndex(){return new w.Z(this.fields||[])}set floorInfo(t){this._setAndNotifyLayer("floorInfo",t)}readGlobalIdFieldFromService(t,s){if((s=s.layerDefinition||s).globalIdField)return s.globalIdField;if(s.fields)for(const l of s.fields)if("esriFieldTypeGlobalID"===l.type)return l.name}get id(){return this._get("id")??me++}set id(t){this._get("id")!==t&&(!1!==this.layer?.capabilities?.exportMap?.supportsDynamicLayers?this._set("id",t):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(t){this._setAndNotifyLayer("labelingInfo",t)}writeLabelingInfo(t,s,l,E){t&&t.length&&(s.layerDefinition={drawingInfo:{labelingInfo:t.map(m=>m.write({},E))}})}set labelsVisible(t){this._setAndNotifyLayer("labelsVisible",t)}set layer(t){this._set("layer",t),this.sublayers&&this.sublayers.forEach(s=>s.layer=t)}set listMode(t){this._set("listMode",t)}set minScale(t){this._setAndNotifyLayer("minScale",t)}readMinScale(t,s){return s.minScale||s.layerDefinition?.minScale||0}set maxScale(t){this._setAndNotifyLayer("maxScale",t)}readMaxScale(t,s){return s.maxScale||s.layerDefinition?.maxScale||0}readObjectIdFieldFromService(t,s){if((s=s.layerDefinition||s).objectIdField)return s.objectIdField;if(s.fields)for(const l of s.fields)if("esriFieldTypeOID"===l.type)return l.name}set opacity(t){this._setAndNotifyLayer("opacity",t)}readOpacity(t,s){const l=s.layerDefinition;return 1-.01*((null!=l?.transparency?l.transparency:l?.drawingInfo?.transparency)??0)}writeOpacity(t,s,l,E){s.layerDefinition={drawingInfo:{transparency:100-100*t}}}writeParent(t,s){s.parentLayerId=this.parent&&this.parent!==this.layer?(0,T.vU)(this.parent.id):-1}get queryTask(){if(!this.layer)return null;const{spatialReference:t}=this.layer,s="gdbVersion"in this.layer?this.layer.gdbVersion:void 0,{capabilities:l,fieldsIndex:E}=this,m=(0,G.Z)("featurelayer-pbf")&&l?.query.supportsFormatPBF;return new O.Z({url:this.url,pbfSupported:m,fieldsIndex:E,gdbVersion:s,sourceSpatialReference:t,queryAttachmentsSupported:l?.operations?.supportsQueryAttachments??!1})}set renderer(t){if(t)for(const s of t.getSymbols())if((0,H.dU)(s)){r.Z.getLogger(this).warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",t)}get source(){return this._get("source")||new te.R({mapLayerId:this.id})}set source(t){this._setAndNotifyLayer("source",t)}set sublayers(t){this._handleSublayersChange(t,this._get("sublayers")),this._set("sublayers",t)}castSublayers(t){return(0,T.se)($.Z.ofType(se),t)}writeSublayers(t,s,l){this.sublayers?.length&&(s[l]=this.sublayers.map(E=>E.id).toArray().reverse())}readTitle(t,s){return s.layerDefinition?.name??s.name}readTypeIdField(t,s){let l=(s=s.layerDefinition||s).typeIdField;if(l&&s.fields){l=l.toLowerCase();const E=s.fields.find(m=>m.name.toLowerCase()===l);E&&(l=E.name)}return l}get url(){const t=this.layer?.parsedUrl??this._lastParsedUrl,s=this.source;if(!t)return null;if(this._lastParsedUrl=t,"map-layer"===s?.type)return`${t.path}/${s.mapLayerId}`;const l={layer:JSON.stringify({source:this.source})};return`${t.path}/dynamicLayer?${(0,_.B7)(l)}`}set url(t){this._overrideIfSome("url",t)}set visible(t){this._setAndNotifyLayer("visible",t)}writeVisible(t,s,l,E){s[l]=this.getAtOrigin("defaultVisibility","service")||t}clone(){const{store:t}=(0,V.vw)(this),s=new se;return(0,V.vw)(s).store=t.clone(k),this.commitProperty("url"),s._lastParsedUrl=this._lastParsedUrl,s}createPopupTemplate(t){return(0,de.eZ)(this,t)}createQuery(){return new ue.Z({returnGeometry:!0,where:this.definitionExpression||"1=1"})}createFeatureLayer(){var t=this;return(0,P.Z)(function*(){if(t.hasOwnProperty("sublayers"))return null;const s=(yield Promise.resolve().then(e.bind(e,90373))).default,{layer:l,url:E}=t;let m;if(E&&t.originIdOf("url")>I.s3.SERVICE)m=new s({url:E});else{if(!l?.parsedUrl)throw new x.Z("createFeatureLayer:missing-information","Cannot create a FeatureLayer without a url or a parent layer");{const M=l.parsedUrl;m=new s({url:M.path}),M&&t.source&&("map-layer"===t.source.type?m.layerId=t.source.mapLayerId:m.dynamicDataSource=t.source)}}return null!=l?.refreshInterval&&(m.refreshInterval=l.refreshInterval),t.definitionExpression&&(m.definitionExpression=t.definitionExpression),t.floorInfo&&(m.floorInfo=(0,g.d9)(t.floorInfo)),t.originIdOf("labelingInfo")>I.s3.SERVICE&&(m.labelingInfo=(0,g.d9)(t.labelingInfo)),t.originIdOf("labelsVisible")>I.s3.DEFAULTS&&(m.labelsVisible=t.labelsVisible),t.originIdOf("legendEnabled")>I.s3.DEFAULTS&&(m.legendEnabled=t.legendEnabled),t.originIdOf("visible")>I.s3.DEFAULTS&&(m.visible=t.visible),t.originIdOf("minScale")>I.s3.DEFAULTS&&(m.minScale=t.minScale),t.originIdOf("maxScale")>I.s3.DEFAULTS&&(m.maxScale=t.maxScale),t.originIdOf("opacity")>I.s3.DEFAULTS&&(m.opacity=t.opacity),t.originIdOf("popupTemplate")>I.s3.DEFAULTS&&(m.popupTemplate=(0,g.d9)(t.popupTemplate)),t.originIdOf("renderer")>I.s3.SERVICE&&(m.renderer=(0,g.d9)(t.renderer)),"data-layer"===t.source?.type&&(m.dynamicDataSource=t.source.clone()),t.originIdOf("title")>I.s3.DEFAULTS&&(m.title=t.title),"map-image"===l?.type&&l.originIdOf("customParameters")>I.s3.DEFAULTS&&(m.customParameters=l.customParameters),"tile"===l?.type&&l.originIdOf("customParameters")>I.s3.DEFAULTS&&(m.customParameters=l.customParameters),m})()}getField(t){return this.fieldsIndex.get(t)}getFeatureType(t){const{typeIdField:s,types:l}=this;if(!s||!t)return null;const E=t.attributes?t.attributes[s]:void 0;if(null==E)return null;let m=null;return l?.some(M=>{const{id:N}=M;return null!=N&&(N.toString()===E.toString()&&(m=M),!!m)}),m}getFieldDomain(t,s){const l=s?.feature,E=this.getFeatureType(l);if(E){const m=E.domains&&E.domains[t];if(m&&"inherited"!==m.type)return m}return this._getLayerDomain(t)}queryAttachments(t,s){var l=this;return(0,P.Z)(function*(){yield l.load(),t=le.Z.from(t);const E=l.capabilities;if(!E?.data?.supportsAttachment)throw new x.Z("queryAttachments:not-supported","this layer doesn't support attachments");const{attachmentTypes:m,objectIds:M,globalIds:N,num:q,size:ve,start:ge,where:fe}=t;if(!E?.operations?.supportsQueryAttachments&&(m?.length>0||N?.length>0||ve?.length>0||q||ge||fe))throw new x.Z("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(M?.length||N?.length||fe))throw new x.Z("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);return l.queryTask.executeAttachmentQuery(t,s)})()}queryFeatures(t=this.createQuery(),s){var l=this;return(0,P.Z)(function*(){if(yield l.load(),!l.capabilities.operations.supportsQuery)throw new x.Z("queryFeatures:not-supported","this layer doesn't support queries.");if(!l.url)throw new x.Z("queryFeatures:not-supported","this layer has no url.");const E=yield l.queryTask.execute(t,{...s,query:{...l.layer?.customParameters,token:l.layer?.apiKey}});if(E?.features)for(const m of E.features)m.sourceLayer=l;return E})()}toExportImageJSON(t){const s={id:this.id,source:this.source?.toJSON()||{mapLayerId:this.id,type:"mapLayer"}},l=(0,p._)(t,this.definitionExpression);null!=l&&(s.definitionExpression=l);const E=["renderer","labelingInfo","opacity","labelsVisible"].reduce((M,N)=>(M[N]=this.originIdOf(N),M),{});if(Object.keys(E).some(M=>E[M]>I.s3.SERVICE)){const M=s.drawingInfo={};if(E.renderer>I.s3.SERVICE&&(M.renderer=this.renderer?this.renderer.toJSON():null),E.labelsVisible>I.s3.SERVICE&&(M.showLabels=this.labelsVisible),this.labelsVisible&&E.labelingInfo>I.s3.SERVICE)if(this.labelingInfo){!this.loaded&&this.labelingInfo?.some(q=>!q.labelPlacement)&&r.Z.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let N=this.labelingInfo;null!=this.geometryType&&(N=(0,ae.a)(this.labelingInfo,ye.M.toJSON(this.geometryType))),M.showLabels=!0,M.labelingInfo=N.filter(q=>q.labelPlacement).map(q=>q.toJSON({origin:"service",layer:this.layer}))}else M.showLabels=!1;E.opacity>I.s3.SERVICE&&(M.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(M.renderer)}return s}_assignDefaultSymbolColors(t){this._forEachSimpleMarkerSymbols(t,s=>{s.color||"esriSMSX"!==s.style&&"esriSMSCross"!==s.style||(s.color=s.outline?.color?s.outline.color:[0,0,0,0])})}_forEachSimpleMarkerSymbols(t,s){if(t){const l=("uniqueValueInfos"in t?t.uniqueValueInfos:"classBreakInfos"in t?t.classBreakInfos:null)??[];for(const E of l)pe(E.symbol)&&s(E.symbol);"symbol"in t&&pe(t.symbol)&&s(t.symbol),"defaultSymbol"in t&&pe(t.defaultSymbol)&&s(t.defaultSymbol)}}_setAndNotifyLayer(t,s){const l=this.layer,E=this._get(t);let m,M;switch(t){case"definitionExpression":case"floorInfo":m="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":m="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":m="supportsDynamicLayers",M="supportsModification"}const N=(0,V.vw)(this).getDefaultOrigin();if("service"!==N){if(m&&!1===this.layer?.capabilities?.exportMap?.[m])return void this._logLockedError(t,`capability not available 'layer.capabilities.exportMap.${m}'`);if(M&&!1===this.capabilities?.exportMap[M])return void this._logLockedError(t,`capability not available 'capabilities.exportMap.${M}'`)}"source"!==t||"not-loaded"===this.loadStatus?(this._set(t,s),"service"!==N&&E!==s&&l&&l.emit&&l.emit("sublayer-update",{propertyName:t,target:this})):this._logLockedError(t,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(t,s){s&&(s.forEach(l=>{l.parent=null,l.layer=null}),this.removeAllHandles()),t&&(t.forEach(l=>{l.parent=this,l.layer=this.layer}),this.addHandles([t.on("after-add",({item:l})=>{l.parent=this,l.layer=this.layer}),t.on("after-remove",({item:l})=>{l.parent=null,l.layer=null}),t.on("before-changes",l=>{const E=this.layer?.capabilities?.exportMap?.supportsSublayersChanges;null==E||E||(r.Z.getLogger(this).error(new x.Z("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),l.preventDefault())})]))}_logLockedError(t,s){const{layer:l,declaredClass:E}=this;r.Z.getLogger(E).error(new x.Z("sublayer:locked",`Property '${String(t)}' can't be changed on Sublayer from the layer '${l?.id}'`,{reason:s,sublayer:this,layer:l}))}_getLayerDomain(t){const s=this.fieldsIndex.get(t);return s?s.domain:null}};h.test={isMapImageLayerOverridePolicy:t=>t===Q||t===ce,isTileImageLayerOverridePolicy:t=>t===_e},(0,y._)([(0,c.Cb)({readOnly:!0})],h.prototype,"capabilities",void 0),(0,y._)([(0,u.r)("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],h.prototype,"readCapabilities",null),(0,y._)([(0,c.Cb)()],h.prototype,"defaultPopupTemplate",null),(0,y._)([(0,c.Cb)({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:ce}}})],h.prototype,"definitionExpression",null),(0,y._)([(0,c.Cb)({readOnly:!0})],h.prototype,"effectiveScaleRange",null),(0,y._)([(0,u.r)("service","maxScaleRange",["minScale","maxScale"])],h.prototype,"readMaxScaleRange",null),(0,y._)([(0,c.Cb)({type:[Y.Z],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],h.prototype,"fields",void 0),(0,y._)([(0,c.Cb)({readOnly:!0})],h.prototype,"fieldsIndex",null),(0,y._)([(0,c.Cb)({type:ne.Z,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:ce},origins:{"web-scene":{read:!1,write:!1}}}})],h.prototype,"floorInfo",null),(0,y._)([(0,c.Cb)({type:he.Z,json:{read:{source:"layerDefinition.extent"}}})],h.prototype,"fullExtent",void 0),(0,y._)([(0,c.Cb)({type:ye.M.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:ye.M.read}}}}})],h.prototype,"geometryType",void 0),(0,y._)([(0,c.Cb)({type:String})],h.prototype,"globalIdField",void 0),(0,y._)([(0,u.r)("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],h.prototype,"readGlobalIdFieldFromService",null),(0,y._)([(0,c.Cb)({type:T.z8,json:{write:{ignoreOrigin:!0}}})],h.prototype,"id",null),(0,y._)([(0,c.Cb)({value:null,type:[ee.Z],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:Q}}})],h.prototype,"labelingInfo",null),(0,y._)([(0,v.c)("labelingInfo")],h.prototype,"writeLabelingInfo",null),(0,y._)([(0,c.Cb)({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:Q}}})],h.prototype,"labelsVisible",null),(0,y._)([(0,c.Cb)({value:null})],h.prototype,"layer",null),(0,y._)([(0,c.Cb)({type:String,json:{write:{overridePolicy:_e}}})],h.prototype,"layerItemId",void 0),(0,y._)([(0,c.Cb)({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:oe}}})],h.prototype,"legendEnabled",void 0),(0,y._)([(0,c.Cb)({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],h.prototype,"listMode",null),(0,y._)([(0,c.Cb)({type:Number,value:0,json:{write:{overridePolicy:Q}}})],h.prototype,"minScale",null),(0,y._)([(0,u.r)("minScale",["minScale","layerDefinition.minScale"])],h.prototype,"readMinScale",null),(0,y._)([(0,c.Cb)({type:Number,value:0,json:{write:{overridePolicy:Q}}})],h.prototype,"maxScale",null),(0,y._)([(0,u.r)("maxScale",["maxScale","layerDefinition.maxScale"])],h.prototype,"readMaxScale",null),(0,y._)([(0,c.Cb)({type:String})],h.prototype,"objectIdField",void 0),(0,y._)([(0,u.r)("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],h.prototype,"readObjectIdFieldFromService",null),(0,y._)([(0,c.Cb)({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:Q}}})],h.prototype,"opacity",null),(0,y._)([(0,u.r)("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],h.prototype,"readOpacity",null),(0,y._)([(0,v.c)("opacity")],h.prototype,"writeOpacity",null),(0,y._)([(0,c.Cb)({json:{type:T.z8,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:Q}}})],h.prototype,"parent",void 0),(0,y._)([(0,v.c)("parent")],h.prototype,"writeParent",null),(0,y._)([(0,c.Cb)({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(t,s)=>!s.disablePopup},write:{target:"disablePopup",overridePolicy:oe,writer(t,s,l){s[l]=!t}}}})],h.prototype,"popupEnabled",void 0),(0,y._)([(0,c.Cb)({type:Z.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:oe}}})],h.prototype,"popupTemplate",void 0),(0,y._)([(0,c.Cb)({readOnly:!0})],h.prototype,"queryTask",null),(0,y._)([(0,c.Cb)({types:W.A,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:Q},origins:{"web-scene":{types:W.o,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:Q}}}}})],h.prototype,"renderer",null),(0,y._)([(0,c.Cb)({types:{key:"type",base:null,typeMap:{"data-layer":re.n,"map-layer":te.R}},cast(t){if(t){if("mapLayerId"in t)return(0,T.TJ)(te.R,t);if("dataSource"in t)return(0,T.TJ)(re.n,t)}return t},json:{name:"layerDefinition.source",write:{overridePolicy:Q}}})],h.prototype,"source",null),(0,y._)([(0,c.Cb)()],h.prototype,"sourceJSON",void 0),(0,y._)([(0,c.Cb)({value:null,json:{type:[T.z8],write:{target:"subLayerIds",allowNull:!0,overridePolicy:Q}}})],h.prototype,"sublayers",null),(0,y._)([(0,d.p)("sublayers")],h.prototype,"castSublayers",null),(0,y._)([(0,v.c)("sublayers")],h.prototype,"writeSublayers",null),(0,y._)([(0,c.Cb)({type:String,json:{name:"name",write:{overridePolicy:oe}}})],h.prototype,"title",void 0),(0,y._)([(0,u.r)("service","title",["name","layerDefinition.name"])],h.prototype,"readTitle",null),(0,y._)([(0,c.Cb)({type:String})],h.prototype,"typeIdField",void 0),(0,y._)([(0,c.Cb)({json:{read:!1},readOnly:!0,value:"sublayer"})],h.prototype,"type",void 0),(0,y._)([(0,u.r)("typeIdField",["layerDefinition.typeIdField"])],h.prototype,"readTypeIdField",null),(0,y._)([(0,c.Cb)({type:[F.Z],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],h.prototype,"types",void 0),(0,y._)([(0,c.Cb)({type:String,json:{name:"layerUrl",write:{overridePolicy:_e}}})],h.prototype,"url",null),(0,y._)([(0,c.Cb)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:Q}}})],h.prototype,"visible",null),(0,y._)([(0,v.c)("visible")],h.prototype,"writeVisible",null),h=se=(0,y._)([(0,f.j)("esri.layers.support.Sublayer")],h);const Ee=h},53715:(X,K,e)=>{e.d(K,{V:()=>S,g:()=>Z});var P=e(15861),y=e(57964),B=e(79412);function Z(D,j,R){return U.apply(this,arguments)}function U(){return(U=(0,P.Z)(function*(D,j,R){let C;try{C=yield createImageBitmap(D)}catch(A){throw new y.Z("request:server",`Unable to load ${j}`,{url:j,error:A})}return(0,B.k_)(R),C})).apply(this,arguments)}function S(D,j,R,C,A){return L.apply(this,arguments)}function L(){return(L=(0,P.Z)(function*(D,j,R,C,A){let b;try{b=yield createImageBitmap(D)}catch(W){throw new y.Z("request:server",`Unable to load tile ${j}/${R}/${C}`,{error:W,level:j,row:R,col:C})}return(0,B.k_)(A),b})).apply(this,arguments)}},24859:(X,K,e)=>{e.d(K,{P:()=>U});var P=e(15861),y=e(15462),B=e(82784),Z=e(91866);function U(L,D,j){return S.apply(this,arguments)}function S(){return(S=(0,P.Z)(function*(L,D,j){const R=(0,y.en)(L);return(0,B.hH)(R,Z.Z.from(D),{...j}).then(C=>C.data.count)})).apply(this,arguments)}},61375:(X,K,e)=>{e.d(K,{G:()=>U});var P=e(15861),y=e(15462),B=e(82784),Z=e(91866);function U(L,D,j){return S.apply(this,arguments)}function S(){return(S=(0,P.Z)(function*(L,D,j){const R=(0,y.en)(L);return(0,B.Ev)(R,Z.Z.from(D),{...j}).then(C=>C.data.objectIds)})).apply(this,arguments)}},46708:(X,K,e)=>{e.d(K,{F:()=>D,e:()=>S});var P=e(15861),y=e(15462),B=e(82784),Z=e(93792),U=e(91866);function S(R,C,A){return L.apply(this,arguments)}function L(){return(L=(0,P.Z)(function*(R,C,A){const b=yield D(R,C,A);return Z.Z.fromJSON(b)})).apply(this,arguments)}function D(R,C,A){return j.apply(this,arguments)}function j(){return(j=(0,P.Z)(function*(R,C,A){const b=(0,y.en)(R),W={...A},J=U.Z.from(C),{data:H}=yield(0,B.JT)(b,J,J.sourceSpatialReference,W);return H})).apply(this,arguments)}},36026:(X,K,e)=>{e.d(K,{t:()=>G});var P=e(15861),y=e(15462),B=e(51172),Z=e(53456),U=e(10842);function S(g,n){return n}function L(g,n,r,i){switch(r){case 0:return C(g,n+i,0);case 1:return"lowerLeft"===g.originPosition?C(g,n+i,1):function A({translate:g,scale:n},r,i){return g[i]-r*n[i]}(g,n+i,1)}}function D(g,n,r,i){return 2===r?C(g,n,2):L(g,n,r,i)}function j(g,n,r,i){return 2===r?C(g,n,3):L(g,n,r,i)}function R(g,n,r,i){return 3===r?C(g,n,3):D(g,n,r,i)}function C({translate:g,scale:n},r,i){return g[i]+r*n[i]}class b{constructor(n){this._options=n,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=S,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(n){if(this._options.applyTransform&&(n.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!n.hasZ)return;const r=(0,Z.k)(n.geometryType,this._options.sourceSpatialReference,n.spatialReference);if(null!=r)for(const i of n.features)r(i.geometry)}createSpatialReference(){return{}}addField(n,r){const i=n.fields;(0,B.O3)(i),i.push(r);const p=i.map(_=>_.name);this._attributesConstructor=function(){for(const _ of p)this[_]=null}}addFeature(n,r){n.features.push(r)}prepareFeatures(n){switch(this._transform=n.transform,this._options.applyTransform&&n.transform&&(this._applyTransform=this._deriveApplyTransform(n)),this._vertexDimension=2,n.hasZ&&this._vertexDimension++,n.hasM&&this._vertexDimension++,n.geometryType){case"esriGeometryPoint":this.addCoordinate=(r,i,p)=>this.addCoordinatePoint(r,i,p),this.createGeometry=r=>this.createPointGeometry(r);break;case"esriGeometryPolygon":this.addCoordinate=(r,i,p)=>this._addCoordinatePolygon(r,i,p),this.createGeometry=r=>this._createPolygonGeometry(r);break;case"esriGeometryPolyline":this.addCoordinate=(r,i,p)=>this._addCoordinatePolyline(r,i,p),this.createGeometry=r=>this._createPolylineGeometry(r);break;case"esriGeometryMultipoint":this.addCoordinate=(r,i,p)=>this._addCoordinateMultipoint(r,i,p),this.createGeometry=r=>this._createMultipointGeometry(r)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(n,r,i){0===this._lengths.length&&(this._toAddInCurrentPath=r),this._lengths.push(r)}addQueryGeometry(n,r){const{queryGeometry:i,queryGeometryType:p}=r,_=(0,U.$g)(i.clone(),i,!1,!1,this._transform),c=(0,U.di)(_,p,!1,!1);n.queryGeometryType=p,n.queryGeometry={...c}}createPointGeometry(n){const r={x:0,y:0,spatialReference:n.spatialReference};return n.hasZ&&(r.z=0),n.hasM&&(r.m=0),r}addCoordinatePoint(n,r,i){switch(r=this._applyTransform(this._transform,r,i,0),i){case 0:n.x=r;break;case 1:n.y=r;break;case 2:"z"in n?n.z=r:n.m=r;break;case 3:n.m=r}}_transformPathLikeValue(n,r){let i=0;return r<=1&&(i=this._previousCoordinate[r],this._previousCoordinate[r]+=n),this._applyTransform(this._transform,n,r,i)}_addCoordinatePolyline(n,r,i){this._dehydratedAddPointsCoordinate(n.paths,r,i)}_addCoordinatePolygon(n,r,i){this._dehydratedAddPointsCoordinate(n.rings,r,i)}_addCoordinateMultipoint(n,r,i){0===i&&n.points.push([]);const p=this._transformPathLikeValue(r,i);n.points[n.points.length-1].push(p)}_createPolygonGeometry(n){return{rings:[[]],spatialReference:n.spatialReference,hasZ:!!n.hasZ,hasM:!!n.hasM}}_createPolylineGeometry(n){return{paths:[[]],spatialReference:n.spatialReference,hasZ:!!n.hasZ,hasM:!!n.hasM}}_createMultipointGeometry(n){return{points:[],spatialReference:n.spatialReference,hasZ:!!n.hasZ,hasM:!!n.hasM}}_dehydratedAddPointsCoordinate(n,r,i){0===i&&0==this._toAddInCurrentPath--&&(n.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const p=this._transformPathLikeValue(r,i),_=n[n.length-1];0===i&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),_.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=p}_deriveApplyTransform(n){const{hasZ:r,hasM:i}=n;return r&&i?R:r?D:i?j:L}}var W=e(82784),H=(e(93792),e(91866));function G(g,n,r){return z.apply(this,arguments)}function z(){return(z=(0,P.Z)(function*(g,n,r){const i=(0,y.en)(g),p={...r},_=H.Z.from(n),c=!_.quantizationParameters,{data:d}=yield(0,W.qp)(i,_,new b({sourceSpatialReference:_.sourceSpatialReference,applyTransform:c}),p);return d})).apply(this,arguments)}}}]);